{"version":3,"file":"inertiaui-modal.umd.cjs","sources":["../../vue/src/config.ts","../node_modules/react/cjs/react-jsx-runtime.production.js","../node_modules/react/cjs/react-jsx-runtime.development.js","../node_modules/react/jsx-runtime.js","../../vue/src/helpers.ts","../src/ModalRoot.tsx","../src/ModalRenderer.tsx","../src/useModal.ts","../src/Deferred.tsx","../src/HeadlessModal.tsx","../src/CloseButton.tsx","../node_modules/clsx/dist/clsx.mjs","../../vue/src/constants.ts","../src/ModalContent.tsx","../src/SlideoverContent.tsx","../src/Modal.tsx","../src/ModalLink.tsx","../src/WhenVisible.tsx","../src/inertiauiModal.ts"],"sourcesContent":["export interface ModalTypeConfig {\n    closeButton: boolean\n    closeExplicitly: boolean\n    closeOnClickOutside: boolean\n    maxWidth: string\n    paddingClasses: string\n    panelClasses: string\n    position: string\n}\n\nexport interface ModalConfig {\n    type: 'modal' | 'slideover'\n    navigate: boolean\n    useNativeDialog: boolean\n    modal: ModalTypeConfig\n    slideover: ModalTypeConfig\n}\n\nconst defaultConfig: ModalConfig = {\n    type: 'modal',\n    navigate: false,\n    useNativeDialog: true,\n    modal: {\n        closeButton: true,\n        closeExplicitly: false,\n        closeOnClickOutside: true,\n        maxWidth: '2xl',\n        paddingClasses: 'p-4 sm:p-6',\n        panelClasses: 'bg-white rounded',\n        position: 'center',\n    },\n    slideover: {\n        closeButton: true,\n        closeExplicitly: false,\n        closeOnClickOutside: true,\n        maxWidth: 'md',\n        paddingClasses: 'p-4 sm:p-6',\n        panelClasses: 'bg-white min-h-screen',\n        position: 'right',\n    },\n}\n\nclass Config {\n    private config: ModalConfig\n\n    constructor() {\n        this.config = {} as ModalConfig\n        this.reset()\n    }\n\n    reset(): void {\n        this.config = JSON.parse(JSON.stringify(defaultConfig))\n    }\n\n    put(key: string | Partial<ModalConfig>, value?: unknown): void {\n        if (typeof key === 'object') {\n            this.config = {\n                type: key.type ?? defaultConfig.type,\n                navigate: key.navigate ?? defaultConfig.navigate,\n                useNativeDialog: key.useNativeDialog ?? defaultConfig.useNativeDialog,\n                modal: { ...defaultConfig.modal, ...(key.modal ?? {}) },\n                slideover: { ...defaultConfig.slideover, ...(key.slideover ?? {}) },\n            }\n            return\n        }\n        const keys = key.split('.')\n        let current: Record<string, unknown> = this.config as unknown as Record<string, unknown>\n        for (let i = 0; i < keys.length - 1; i++) {\n            current = (current[keys[i]] = current[keys[i]] || {}) as Record<string, unknown>\n        }\n        current[keys[keys.length - 1]] = value\n    }\n\n    get(key?: string): unknown {\n        if (typeof key === 'undefined') {\n            return this.config\n        }\n        const keys = key.split('.')\n        let current: unknown = this.config\n        for (const k of keys) {\n            if (current === null || current === undefined || typeof current !== 'object') {\n                return null\n            }\n            current = (current as Record<string, unknown>)[k]\n        }\n        return current === undefined ? null : current\n    }\n}\n\nconst configInstance = new Config()\n\nexport const resetConfig = (): void => configInstance.reset()\nexport const putConfig = (key: string | Partial<ModalConfig>, value?: unknown): void => configInstance.put(key, value)\nexport const getConfig = (key?: string): unknown => configInstance.get(key)\nexport const getConfigByType = (isSlideover: boolean, key: string): unknown =>\n    configInstance.get(isSlideover ? `slideover.${key}` : `modal.${key}`)\n","/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\");\nfunction jsxProd(type, config, maybeKey) {\n  var key = null;\n  void 0 !== maybeKey && (key = \"\" + maybeKey);\n  void 0 !== config.key && (key = \"\" + config.key);\n  if (\"key\" in config) {\n    maybeKey = {};\n    for (var propName in config)\n      \"key\" !== propName && (maybeKey[propName] = config[propName]);\n  } else maybeKey = config;\n  config = maybeKey.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== config ? config : null,\n    props: maybeKey\n  };\n}\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.jsx = jsxProd;\nexports.jsxs = jsxProd;\n","/**\n * @license React\n * react-jsx-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      isValidElement(node)\n        ? node._store && (node._store.validated = 1)\n        : \"object\" === typeof node &&\n          null !== node &&\n          node.$$typeof === REACT_LAZY_TYPE &&\n          (\"fulfilled\" === node._payload.status\n            ? isValidElement(node._payload.value) &&\n              node._payload.value._store &&\n              (node._payload.value._store.validated = 1)\n            : node._store && (node._store.validated = 1));\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    var React = require(\"react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsx = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !1,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n    exports.jsxs = function (type, config, maybeKey) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        !0,\n        trackActualOwner\n          ? Error(\"react-stack-top-frame\")\n          : unknownOwnerDebugStack,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","// Re-export from vanilla package\nimport { generateId as vanillaGenerateId, except, only, rejectNullValues, kebabCase, isStandardDomEvent } from '@inertiaui/vanilla'\nexport { except, only, rejectNullValues, kebabCase, isStandardDomEvent }\n\n// Modal-specific helpers\n\nlet generateIdUsingCallback: (() => string) | null = null\n\nfunction generateIdUsing(callback: () => string): void {\n    generateIdUsingCallback = callback\n}\n\nfunction generateId(prefix: string = 'inertiaui_modal_'): string {\n    if (generateIdUsingCallback) {\n        return generateIdUsingCallback()\n    }\n    return vanillaGenerateId(prefix)\n}\n\nfunction sameUrlPath(url1: string | URL, url2: string | URL): boolean {\n    const origin = typeof window !== 'undefined' ? window.location.origin : 'http://localhost'\n    const parsed1 = typeof url1 === 'string' ? new URL(url1, origin) : url1\n    const parsed2 = typeof url2 === 'string' ? new URL(url2, origin) : url2\n\n    return `${parsed1.origin}${parsed1.pathname}` === `${parsed2.origin}${parsed2.pathname}`\n}\n\nexport { generateIdUsing, generateId, sameUrlPath }\n","import { createElement, useEffect, useState, useRef, useReducer, ReactNode, ComponentType } from 'react'\nimport { default as Axios, AxiosResponse, InternalAxiosRequestConfig } from 'axios'\nimport { except, kebabCase, generateId, sameUrlPath } from './helpers'\nimport { router, usePage, progress } from '@inertiajs/react'\nimport { mergeDataIntoQueryString, type RequestPayload } from '@inertiajs/core'\nimport { createContext, useContext } from 'react'\nimport ModalRenderer from './ModalRenderer'\nimport { getConfig } from './config'\nimport type {\n    Modal,\n    ModalConfig,\n    ModalResponseData,\n    ModalStackContextValue,\n    VisitOptions,\n    ReloadOptions,\n    EventCallback,\n    ComponentResolver,\n    PageProps,\n    ModalRootProps,\n    LocalModal,\n    PrefetchOptions,\n} from './types'\n\nconst ModalStackContext = createContext<ModalStackContextValue | null>(null)\nModalStackContext.displayName = 'ModalStackContext'\n\nlet pageVersion: string | null = null\nlet resolveComponent: ComponentResolver | null = null\nlet baseUrl: string | null = null\n\n// Prefetch cache (#146)\ninterface PrefetchCacheEntry {\n    response: AxiosResponse\n    timestamp: number\n    expiresAt: number\n}\n\nconst prefetchCache = new Map<string, PrefetchCacheEntry>()\nconst prefetchInFlight = new Map<string, Promise<AxiosResponse>>()\n\nfunction getPrefetchCacheKey(url: string, method: string, data: RequestPayload): string {\n    return `${method}:${url}:${JSON.stringify(data)}`\n}\n\nfunction getCachedResponse(url: string, method: string, data: RequestPayload): AxiosResponse | null {\n    const key = getPrefetchCacheKey(url, method, data)\n    const cached = prefetchCache.get(key)\n\n    if (!cached) {\n        return null\n    }\n\n    if (Date.now() > cached.expiresAt) {\n        prefetchCache.delete(key)\n        return null\n    }\n\n    return cached.response\n}\n\nfunction setCachedResponse(url: string, method: string, data: RequestPayload, response: AxiosResponse, cacheFor: number): void {\n    const key = getPrefetchCacheKey(url, method, data)\n    prefetchCache.set(key, {\n        response,\n        timestamp: Date.now(),\n        expiresAt: Date.now() + cacheFor,\n    })\n}\n\nexport function prefetch(href: string, options: PrefetchOptions = {}): Promise<void> {\n    if (href.startsWith('#')) {\n        return Promise.resolve()\n    }\n\n    const method = (options.method ?? 'get').toLowerCase()\n    const data = options.data ?? ({} as RequestPayload)\n    const headers = options.headers ?? {}\n    const queryStringArrayFormat = options.queryStringArrayFormat ?? 'brackets'\n    const cacheFor = options.cacheFor ?? 30000\n\n    const [url, mergedData] = mergeDataIntoQueryString(method as 'get' | 'post' | 'put' | 'patch' | 'delete', href || '', data, queryStringArrayFormat)\n\n    // Check if already cached\n    const cached = getCachedResponse(url, method, mergedData)\n    if (cached) {\n        return Promise.resolve()\n    }\n\n    // Check if already in flight\n    const cacheKey = getPrefetchCacheKey(url, method, mergedData)\n    const inFlight = prefetchInFlight.get(cacheKey)\n    if (inFlight) {\n        return inFlight.then(() => {})\n    }\n\n    options.onPrefetching?.()\n\n    const requestHeaders: Record<string, string> = {\n        ...headers,\n        Accept: 'text/html, application/xhtml+xml',\n        'X-Requested-With': 'XMLHttpRequest',\n        'X-Inertia': 'true',\n        'X-Inertia-Version': pageVersion ?? '',\n        'X-InertiaUI-Modal': generateId(),\n        'X-InertiaUI-Modal-Base-Url': baseUrl ?? '',\n    }\n\n    const request = Axios({\n        url,\n        method,\n        data: mergedData,\n        headers: requestHeaders,\n    })\n        .then((response) => {\n            setCachedResponse(url, method, mergedData, response, cacheFor)\n            options.onPrefetched?.()\n            return response\n        })\n        .finally(() => {\n            prefetchInFlight.delete(cacheKey)\n        })\n\n    prefetchInFlight.set(cacheKey, request)\n\n    return request.then(() => {})\n}\n\ninterface ModalStackProviderProps {\n    children: ReactNode\n}\n\nexport const ModalStackProvider = ({ children }: ModalStackProviderProps) => {\n    // Use ref for synchronous access to stack, state only for triggering re-renders\n    const stackRef = useRef<Modal[]>([])\n    const [, forceUpdate] = useReducer((x) => x + 1, 0)\n    const [localModals, setLocalModals] = useState<Record<string, LocalModal>>({})\n\n    const updateStack = (withStack: (prevStack: Modal[]) => Modal[]) => {\n        const newStack = withStack([...stackRef.current])\n\n        const isOnTopOfStack = (modalId: string) => {\n            if (newStack.length < 2) {\n                return true\n            }\n\n            return (\n                newStack\n                    .map((modal) => ({ id: modal.id, shouldRender: modal.shouldRender }))\n                    .reverse()\n                    .find((modal) => modal.shouldRender)?.id === modalId\n            )\n        }\n\n        newStack.forEach((modal, index) => {\n            newStack[index].onTopOfStack = isOnTopOfStack(modal.id)\n            newStack[index].getParentModal = () => {\n                if (index < 1) {\n                    // This is the first modal in the stack\n                    return null\n                }\n\n                // Find the first open modal before this one\n                return (\n                    stackRef.current\n                        .slice(0, index)\n                        .reverse()\n                        .find((m) => m.isOpen) ?? null\n                )\n            }\n            newStack[index].getChildModal = () => {\n                if (index === stackRef.current.length - 1) {\n                    // This is the last modal in the stack\n                    return null\n                }\n\n                // Find the first open modal after this one\n                return stackRef.current.slice(index + 1).find((m) => m.isOpen) ?? null\n            }\n        })\n\n        stackRef.current = newStack\n        forceUpdate()\n    }\n\n    class ModalClass implements Modal {\n        id: string\n        isOpen: boolean\n        shouldRender: boolean\n        listeners: Record<string, EventCallback[]>\n        component: ComponentType | null\n        props: Record<string, unknown>\n        response: ModalResponseData\n        config: ModalConfig\n        onCloseCallback: (() => void) | null\n        afterLeaveCallback: (() => void) | null\n        index: number\n        onTopOfStack: boolean\n        name?: string\n        getParentModal: () => Modal | null\n        getChildModal: () => Modal | null\n\n        constructor(\n            component: ComponentType | null,\n            response: ModalResponseData,\n            config?: ModalConfig | null,\n            onClose?: (() => void) | null,\n            afterLeave?: (() => void) | null,\n        ) {\n            this.id = response.id ?? generateId()\n            this.isOpen = false\n            this.shouldRender = false\n            this.listeners = {}\n\n            this.component = component\n            this.props = response.props ?? {}\n            this.response = response\n            this.config = config ?? {}\n            this.onCloseCallback = onClose ?? null\n            this.afterLeaveCallback = afterLeave ?? null\n\n            this.index = -1 // Will be set when added to the stack\n            this.getParentModal = () => null // Will be set in push()\n            this.getChildModal = () => null // Will be set in push()\n            this.onTopOfStack = true // Will be updated in push()\n        }\n\n        show = () => {\n            updateStack((prevStack) =>\n                prevStack.map((modal) => {\n                    if (modal.id === this.id && !modal.isOpen) {\n                        modal.isOpen = true\n                        modal.shouldRender = true\n                    }\n                    return modal\n                }),\n            )\n        }\n\n        setOpen = (open: boolean) => {\n            if (open) {\n                this.show()\n            } else {\n                this.close()\n            }\n        }\n\n        close = () => {\n            updateStack((currentStack) => {\n                let modalClosed = false\n\n                const newStack = currentStack.map((modal) => {\n                    if (modal.id === this.id && modal.isOpen) {\n                        Object.keys(modal.listeners).forEach((event) => {\n                            modal.off(event)\n                        })\n\n                        modal.isOpen = false\n                        modal.onCloseCallback?.()\n                        modalClosed = true\n                    }\n                    return modal\n                })\n\n                return modalClosed ? newStack : currentStack\n            })\n        }\n\n        afterLeave = () => {\n            if (this.isOpen) {\n                return\n            }\n\n            updateStack((prevStack) => {\n                const updatedStack = prevStack.map((modal) => {\n                    if (modal.id === this.id && !modal.isOpen) {\n                        modal.shouldRender = false\n                        modal.afterLeaveCallback?.()\n                        modal.afterLeaveCallback = null\n                    }\n                    return modal\n                })\n\n                if (this.index === 0) {\n                    // Update browser URL back to base when all modals are closed\n                    if (baseUrl && typeof window !== 'undefined') {\n                        router.push({\n                            url: baseUrl,\n                            preserveScroll: true,\n                            preserveState: true,\n                            // Clear _inertiaui_modal prop to prevent modal from reopening\n                            props: (currentProps: Record<string, unknown>) => {\n                                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                                const { _inertiaui_modal, ...rest } = currentProps\n                                return { ...rest, _inertiaui_modal: undefined }\n                            },\n                        })\n                    }\n                    baseUrl = null\n                    return []\n                }\n\n                return updatedStack\n            })\n        }\n\n        on = (event: string, callback: EventCallback) => {\n            event = kebabCase(event)\n            this.listeners[event] = this.listeners[event] ?? []\n            this.listeners[event].push(callback)\n        }\n\n        off = (event: string, callback?: EventCallback) => {\n            event = kebabCase(event)\n            if (callback) {\n                this.listeners[event] = this.listeners[event]?.filter((cb) => cb !== callback) ?? []\n            } else {\n                delete this.listeners[event]\n            }\n        }\n\n        emit = (event: string, ...args: unknown[]) => {\n            this.listeners[kebabCase(event)]?.forEach((callback) => callback(...args))\n        }\n\n        registerEventListenersFromProps = (props: Record<string, unknown>) => {\n            const unsubscribers: (() => void)[] = []\n\n            Object.keys(props)\n                .filter((key) => key.startsWith('on'))\n                .forEach((key) => {\n                    // e.g. onRefreshKey -> refresh-key\n                    const eventName = kebabCase(key).replace(/^on-/, '')\n                    const callback = props[key] as EventCallback\n                    this.on(eventName, callback)\n                    unsubscribers.push(() => this.off(eventName, callback))\n                })\n\n            return () => unsubscribers.forEach((unsub) => unsub())\n        }\n\n        reload = (options: ReloadOptions = {}) => {\n            let keys = Object.keys(this.response.props)\n\n            if (options.only) {\n                keys = options.only\n            }\n\n            if (options.except) {\n                keys = except(keys, options.except) as string[]\n            }\n\n            if (!this.response?.url) {\n                return\n            }\n\n            const method = (options.method ?? 'get').toLowerCase()\n            const data = options.data ?? {}\n\n            options.onStart?.()\n\n            Axios({\n                url: this.response.url,\n                method,\n                data: method === 'get' ? {} : data,\n                params: method === 'get' ? data : {},\n                headers: {\n                    ...(options.headers ?? {}),\n                    Accept: 'text/html, application/xhtml+xml',\n                    'X-Inertia': 'true',\n                    'X-Inertia-Partial-Component': this.response.component,\n                    'X-Inertia-Version': this.response.version ?? '',\n                    'X-Inertia-Partial-Data': keys.join(','),\n                    'X-InertiaUI-Modal': generateId(),\n                    'X-InertiaUI-Modal-Base-Url': baseUrl ?? '',\n                },\n            })\n                .then((response) => {\n                    this.updateProps(response.data.props)\n\n                    options.onSuccess?.(response)\n                })\n                .catch((error) => {\n                    options.onError?.(error)\n                })\n                .finally(() => {\n                    options.onFinish?.()\n                })\n        }\n\n        updateProps = (props: Record<string, unknown>) => {\n            Object.assign(this.props, props)\n            updateStack((prevStack) => prevStack) // Trigger re-render\n        }\n    }\n\n    const isValidModalResponse = (data: unknown): data is ModalResponseData => {\n        return (\n            typeof data === 'object' &&\n            data !== null &&\n            'component' in data &&\n            typeof (data as ModalResponseData).component === 'string'\n        )\n    }\n\n    const pushFromResponseData = (\n        responseData: ModalResponseData,\n        config: ModalConfig = {},\n        onClose: (() => void) | null = null,\n        onAfterLeave: (() => void) | null = null,\n    ): Promise<Modal> => {\n        if (!resolveComponent) {\n            return Promise.reject(new Error('resolveComponent not set'))\n        }\n\n        if (!isValidModalResponse(responseData)) {\n            return Promise.reject(\n                new Error(\n                    'Invalid modal response. This usually happens when the server returns a redirect (e.g., due to session expiration). ' +\n                        'Check if the user is still authenticated.',\n                ),\n            )\n        }\n\n        return resolveComponent(responseData.component).then((component) =>\n            push(component, responseData, config, onClose, onAfterLeave),\n        )\n    }\n\n    const loadDeferredProps = (modal: Modal) => {\n        const deferred = modal.response?.meta?.deferredProps\n\n        if (!deferred) {\n            return\n        }\n\n        Object.keys(deferred).forEach((key) => {\n            modal.reload({ only: deferred[key] })\n        })\n    }\n\n    const push = (\n        component: ComponentType | null,\n        response: ModalResponseData,\n        config?: ModalConfig | null,\n        onClose?: (() => void) | null,\n        afterLeave?: (() => void) | null,\n    ): Modal => {\n        const newModal = new ModalClass(component, response, config, onClose, afterLeave)\n        newModal.index = stackRef.current.length\n\n        updateStack((prevStack) => [...prevStack, newModal])\n        loadDeferredProps(newModal)\n\n        newModal.show()\n\n        return newModal\n    }\n\n    function pushLocalModal(\n        name: string,\n        config?: ModalConfig | null,\n        onClose?: (() => void) | null,\n        afterLeave?: (() => void) | null,\n        props?: Record<string, unknown> | null,\n    ): Modal {\n        if (!localModals[name]) {\n            throw new Error(`The local modal \"${name}\" has not been registered.`)\n        }\n\n        const responseData = { props: props ?? {} } as ModalResponseData\n        const modal = push(null, responseData, config, onClose, afterLeave)\n        modal.name = name\n        localModals[name].callback(modal)\n        return modal\n    }\n\n    const visitModal = (url: string, options: VisitOptions = {}): Promise<Modal> =>\n        visit(\n            url,\n            options.method ?? 'get',\n            options.data ?? ({} as RequestPayload),\n            options.headers ?? {},\n            options.config ?? {},\n            options.onClose ?? null,\n            options.onAfterLeave ?? null,\n            options.queryStringArrayFormat ?? 'brackets',\n            options.navigate ?? (getConfig('navigate') as boolean),\n            options.onStart ?? null,\n            options.onSuccess ?? null,\n            options.onError ?? null,\n            options.props ?? null,\n        ).then((modal) => {\n            const listeners = options.listeners ?? {}\n\n            Object.keys(listeners).forEach((event) => {\n                // e.g. refreshKey -> refresh-key\n                const eventName = kebabCase(event)\n                modal.on(eventName, listeners[event])\n            })\n\n            return modal\n        })\n\n    const updateBrowserUrl = (url: string | undefined, useBrowserHistory: boolean, modalData?: ModalResponseData): void => {\n        if (!url || !useBrowserHistory || typeof window === 'undefined') {\n            return\n        }\n\n        router.push({\n            url,\n            preserveScroll: true,\n            preserveState: true,\n            // Store modal data in page props for history navigation\n            props: modalData\n                ? (currentProps: Record<string, unknown>) => ({\n                      ...currentProps,\n                      _inertiaui_modal: {\n                          ...modalData,\n                          baseUrl,\n                      },\n                  })\n                : undefined,\n        })\n    }\n\n    const visit = (\n        href: string,\n        method: string,\n        payload: RequestPayload = {},\n        headers: Record<string, string> = {},\n        config: ModalConfig = {},\n        onClose: (() => void) | null = null,\n        onAfterLeave: (() => void) | null = null,\n        queryStringArrayFormat: 'brackets' | 'indices' = 'brackets',\n        useBrowserHistory = false,\n        onStart: (() => void) | null = null,\n        onSuccess: ((response?: AxiosResponse) => void) | null = null,\n        onError: ((...args: unknown[]) => void) | null = null,\n        props: Record<string, unknown> | null = null,\n    ): Promise<Modal> => {\n        const modalId = generateId()\n\n        return new Promise((resolve, reject) => {\n            if (href.startsWith('#')) {\n                resolve(pushLocalModal(href.substring(1), config, onClose, onAfterLeave, props))\n                return\n            }\n\n            const [url, data] = mergeDataIntoQueryString(method as 'get' | 'post' | 'put' | 'patch' | 'delete', href || '', payload, queryStringArrayFormat)\n\n            // Check for cached prefetch response (#146)\n            const cachedResponse = getCachedResponse(url, method, data)\n            if (cachedResponse) {\n                onSuccess?.(cachedResponse)\n                pushFromResponseData(cachedResponse.data, config, onClose, onAfterLeave)\n                    .then((modal) => {\n                        updateBrowserUrl(cachedResponse.data.url, useBrowserHistory, cachedResponse.data)\n                        resolve(modal)\n                    })\n                    .catch(reject)\n                return\n            }\n\n            if (stackRef.current.length === 0) {\n                baseUrl = typeof window !== 'undefined' ? window.location.href : ''\n            }\n\n            const requestHeaders: Record<string, string> = {\n                ...headers,\n                Accept: 'text/html, application/xhtml+xml',\n                'X-Requested-With': 'XMLHttpRequest',\n                'X-Inertia': 'true',\n                'X-Inertia-Version': pageVersion ?? '',\n                'X-InertiaUI-Modal': modalId,\n                'X-InertiaUI-Modal-Base-Url': baseUrl ?? '',\n            }\n\n            onStart?.()\n\n            progress?.start()\n\n            Axios({\n                url,\n                method,\n                data,\n                headers: requestHeaders,\n            })\n                .then((response) => {\n                    onSuccess?.(response)\n                    pushFromResponseData(response.data, config, onClose, onAfterLeave)\n                        .then((modal) => {\n                            updateBrowserUrl(response.data.url, useBrowserHistory, response.data)\n                            resolve(modal)\n                        })\n                        .catch(reject)\n                })\n                .catch((...args: unknown[]) => {\n                    onError?.(...args)\n                    reject(args[0])\n                })\n                .finally(() => {\n                    progress?.finish()\n                })\n        })\n    }\n\n    const registerLocalModal = (name: string, callback: (modal: Modal) => void) => {\n        setLocalModals((prevLocalModals) => ({\n            ...prevLocalModals,\n            [name]: { name, callback },\n        }))\n    }\n\n    const removeLocalModal = (name: string) => {\n        setLocalModals((prevLocalModals) => {\n            const newLocalModals = { ...prevLocalModals }\n            delete newLocalModals[name]\n            return newLocalModals\n        })\n    }\n\n    // Create value object with getter for stack to ensure we always get current ref value\n    const value: ModalStackContextValue = {\n        get stack() {\n            return stackRef.current\n        },\n        localModals,\n        push,\n        pushFromResponseData,\n        length: () => stackRef.current.length,\n        closeAll: (force = false) => {\n            if (force) {\n                // Force close: immediately remove all modals without transition\n                updateStack(() => [])\n            } else {\n                // Normal close: trigger leave transition for each modal\n                ;[...stackRef.current].reverse().forEach((modal) => modal.close())\n            }\n        },\n        reset: () => updateStack(() => []),\n        visit,\n        visitModal,\n        registerLocalModal,\n        removeLocalModal,\n    }\n\n    return <ModalStackContext.Provider value={value}>{children}</ModalStackContext.Provider>\n}\n\nexport const useModalStack = (): ModalStackContextValue => {\n    const context = useContext(ModalStackContext)\n    if (context === null) {\n        throw new Error('useModalStack must be used within a ModalStackProvider')\n    }\n    return context\n}\n\nexport const modalPropNames = ['closeButton', 'closeExplicitly', 'closeOnClickOutside', 'maxWidth', 'paddingClasses', 'panelClasses', 'position', 'slideover']\n\nexport const initFromPageProps = (pageProps: PageProps) => {\n    if (pageProps.initialPage) {\n        pageVersion = pageProps.initialPage.version ?? null\n    }\n\n    if (pageProps.resolveComponent) {\n        resolveComponent = pageProps.resolveComponent\n    }\n}\n\ninterface RenderInertiaAppProps {\n    Component: ComponentType & { layout?: ((page: ReactNode) => ReactNode) | ComponentType[] }\n    props: Record<string, unknown>\n    key: string\n}\n\nexport const renderApp = (App: ComponentType<{ children: (props: RenderInertiaAppProps) => ReactNode }>, pageProps: PageProps) => {\n    initFromPageProps(pageProps)\n\n    const renderInertiaApp = ({ Component, props, key }: RenderInertiaAppProps) => {\n        const renderComponent = () => {\n            const child = createElement(Component, { key, ...props })\n\n            if (typeof Component.layout === 'function') {\n                return Component.layout(child)\n            }\n\n            if (Array.isArray(Component.layout)) {\n                return Component.layout\n                    .slice()\n                    .reverse()\n                    .reduce(\n                        (acc, Layout) => createElement(Layout as ComponentType<Record<string, unknown>>, props, acc),\n                        child as ReactNode,\n                    )\n            }\n\n            return child\n        }\n\n        return (\n            <>\n                {renderComponent()}\n                <ModalRoot />\n            </>\n        )\n    }\n\n    return (\n        <ModalStackProvider>\n            <App {...(pageProps as Record<string, unknown>)}>{renderInertiaApp}</App>\n        </ModalStackProvider>\n    )\n}\n\ninterface InertiaUIModalPageProps {\n    _inertiaui_modal?: ModalResponseData & { baseUrl: string }\n    [key: string]: unknown\n}\n\nexport const ModalRoot = ({ children }: ModalRootProps) => {\n    const context = useContext(ModalStackContext)\n    const $page = usePage<InertiaUIModalPageProps>()\n    const pendingModalKeysRef = useRef(new Set<string>())\n\n    // Generate a unique key for deduplication (handles case when modal has no id)\n    const getModalKey = (modalData: ModalResponseData) => modalData.id || `${modalData.component}:${modalData.url}`\n\n    const isNavigatingRef = useRef(false)\n    const initialModalStillOpenedRef = useRef(!!$page.props?._inertiaui_modal)\n\n    useEffect(() => router.on('start', () => (isNavigatingRef.current = true)), [])\n    useEffect(() => router.on('finish', () => (isNavigatingRef.current = false)), [])\n    useEffect(\n        () =>\n            router.on('navigate', function ($event) {\n                const modalOnBase = ($event as { detail: { page: { props: InertiaUIModalPageProps; url: string } } }).detail.page.props._inertiaui_modal\n                const pageUrl = ($event as { detail: { page: { url: string } } }).detail.page.url\n\n                if (!modalOnBase) {\n                    // No modal data - close any open modals (force close without transition)\n                    context?.closeAll(true)\n                    baseUrl = null\n                    initialModalStillOpenedRef.current = false\n                    return\n                }\n\n                // If the page URL doesn't match the modal URL, close all modals\n                if (!sameUrlPath(pageUrl, modalOnBase.url)) {\n                    context?.closeAll(true)\n                    baseUrl = null\n                    initialModalStillOpenedRef.current = false\n                    return\n                }\n\n                baseUrl = modalOnBase.baseUrl\n\n                // Skip if this modal is already being pushed (handles duplicate navigate events)\n                const modalKey = getModalKey(modalOnBase)\n                if (pendingModalKeysRef.current.has(modalKey)) {\n                    return\n                }\n\n                // Also skip if a modal with this id is already in the stack\n                if (modalOnBase.id && context?.stack.some((m) => m.id === modalOnBase.id)) {\n                    return\n                }\n\n                // Skip if a modal with the same component and URL is already open\n                if (context?.stack.some((m) => m.response?.component === modalOnBase.component && sameUrlPath(m.response?.url, modalOnBase.url))) {\n                    return\n                }\n\n                pendingModalKeysRef.current.add(modalKey)\n\n                context\n                    ?.pushFromResponseData(modalOnBase, {}, () => {\n                        if (!modalOnBase.baseUrl) {\n                            console.error('No base url in modal response data so cannot navigate back')\n                            return\n                        }\n                        if (!isNavigatingRef.current && typeof window !== 'undefined' && window.location.href !== modalOnBase.baseUrl) {\n                            router.visit(modalOnBase.baseUrl, {\n                                preserveScroll: true,\n                                preserveState: true,\n                            })\n                        }\n                    })\n                    .then(() => {\n                        pendingModalKeysRef.current.delete(modalKey)\n                    })\n            }),\n        [],\n    )\n\n    const axiosRequestInterceptor = (config: InternalAxiosRequestConfig) => {\n        // A Modal is opened on top of a base route, so we need to pass this base route\n        // so it can redirect back with the back() helper method...\n        // Only send the header when we have an actual base URL value\n        const baseUrlValue = baseUrl ?? (initialModalStillOpenedRef.current ? $page.props._inertiaui_modal?.baseUrl : null)\n        if (baseUrlValue) {\n            config.headers['X-InertiaUI-Modal-Base-Url'] = baseUrlValue\n        }\n\n        return config\n    }\n\n    useEffect(() => {\n        const interceptorId = Axios.interceptors.request.use(axiosRequestInterceptor)\n        return () => Axios.interceptors.request.eject(interceptorId)\n    }, [])\n\n    const previousModalRef = useRef<(ModalResponseData & { baseUrl: string }) | undefined>(undefined)\n\n    useEffect(() => {\n        const newModal = $page.props?._inertiaui_modal\n        const previousModal = previousModalRef.current\n\n        // Store the current value for the next render\n        previousModalRef.current = newModal\n\n        if (!newModal) {\n            return\n        }\n\n        // If there's a previous modal with same component/URL, update its props\n        if (previousModal && newModal.component === previousModal.component && sameUrlPath(newModal.url, previousModal.url)) {\n            context?.stack[0]?.updateProps(newModal.props ?? {})\n            return\n        }\n\n        // If there's no previous modal but we have modals in the stack (opened via XHR),\n        // check if the new modal matches any open modal and update its props\n        if (!previousModal && context && context.stack.length > 0) {\n            const existingModal = context.stack.find(\n                (m) => m.response?.component === newModal.component && sameUrlPath(m.response?.url, newModal.url),\n            )\n            if (existingModal) {\n                existingModal.updateProps(newModal.props ?? {})\n            }\n        }\n    }, [$page.props?._inertiaui_modal])\n\n    return (\n        <>\n            {children}\n            {context && context.stack.length > 0 && <ModalRenderer index={0} />}\n        </>\n    )\n}\n","import React, { useMemo, createElement } from 'react'\nimport { useModalStack } from './ModalRoot'\nimport type { ModalRendererProps } from './types'\n\nconst ModalIndexContext = React.createContext<number | null>(null)\nModalIndexContext.displayName = 'ModalIndexContext'\n\nexport const useModalIndex = (): number | null => {\n    return React.useContext(ModalIndexContext)\n}\n\nconst ModalRenderer = ({ index }: ModalRendererProps) => {\n    const { stack } = useModalStack()\n\n    const modalContext = useMemo(() => {\n        return stack[index]\n    }, [stack, index])\n\n    if (!modalContext?.component) {\n        return null\n    }\n\n    return (\n        <ModalIndexContext.Provider value={index}>\n            {createElement(modalContext.component as React.ComponentType<Record<string, unknown>>, {\n                ...modalContext.props,\n                onModalEvent: (...args: unknown[]) => modalContext.emit('modal-event', ...args),\n            })}\n        </ModalIndexContext.Provider>\n    )\n}\n\nexport default ModalRenderer\n","import { useModalIndex } from './ModalRenderer'\nimport { useModalStack } from './ModalRoot'\nimport type { Modal } from './types'\n\nexport default function useModal(): Modal | null {\n    return useModalStack().stack[useModalIndex()] ?? null\n}\n","// See: https://github.com/inertiajs/inertia/blob/48bcd21fb7daf467d0df1bfde2408f161f94a579/packages/react/src/Deferred.ts\nimport { useEffect, useState, ReactNode } from 'react'\nimport useModal from './useModal'\n\ninterface DeferredProps {\n    children: ReactNode\n    data: string | string[]\n    fallback?: ReactNode\n}\n\nconst Deferred = ({ children, data, fallback }: DeferredProps) => {\n    if (!data) {\n        throw new Error('`<Deferred>` requires a `data` prop to be a string or array of strings')\n    }\n\n    const [loaded, setLoaded] = useState(false)\n    const keys = Array.isArray(data) ? data : [data]\n    const modal = useModal()\n    const modalProps = modal?.props ?? {}\n\n    useEffect(() => {\n        setLoaded(keys.every((key) => modalProps[key] !== undefined))\n    }, [modalProps, keys])\n\n    return loaded ? children : fallback\n}\n\nDeferred.displayName = 'InertiaModalDeferred'\n\nexport default Deferred\n","import { useMemo, useState, forwardRef, useImperativeHandle, useEffect, useRef, ReactNode } from 'react'\nimport { getConfig, getConfigByType } from './config'\nimport { useModalIndex } from './ModalRenderer'\nimport { useModalStack } from './ModalRoot'\nimport ModalRenderer from './ModalRenderer'\nimport type { Modal, ModalConfig, ReloadOptions } from './types'\n\ninterface HeadlessModalConfig {\n    slideover: boolean\n    closeButton: boolean\n    closeExplicitly: boolean\n    closeOnClickOutside: boolean\n    maxWidth: string\n    paddingClasses: string\n    panelClasses: string\n    position: string\n}\n\ninterface HeadlessModalRenderProps {\n    afterLeave: () => void\n    close: () => void\n    config: HeadlessModalConfig\n    emit: (event: string, ...args: unknown[]) => void\n    getChildModal: () => Modal | null\n    getParentModal: () => Modal | null\n    id: string\n    index: number\n    isOpen: boolean\n    modalContext: Modal\n    onTopOfStack: boolean\n    reload: (options?: ReloadOptions) => void\n    setOpen: (open: boolean) => void\n    shouldRender: boolean\n    // Allow additional props from visitModal\n    [key: string]: unknown\n}\n\ninterface HeadlessModalBaseProps {\n    name?: string\n    children: ReactNode | ((props: HeadlessModalRenderProps) => ReactNode)\n    onFocus?: () => void\n    onBlur?: () => void\n    onClose?: () => void\n    onSuccess?: () => void\n    slideover?: boolean\n    closeButton?: boolean\n    closeExplicitly?: boolean\n    closeOnClickOutside?: boolean\n    maxWidth?: string\n    paddingClasses?: string\n    panelClasses?: string\n    position?: string\n}\n\ntype HeadlessModalProps = HeadlessModalBaseProps & Record<string, unknown>\n\nexport interface HeadlessModalRef {\n    afterLeave: () => void\n    close: () => void\n    emit: (event: string, ...args: unknown[]) => void\n    getChildModal: () => Modal | null | undefined\n    getParentModal: () => Modal | null | undefined\n    reload: (options?: ReloadOptions) => void\n    setOpen: (open: boolean) => void\n    readonly id: string | undefined\n    readonly index: number | undefined\n    readonly isOpen: boolean | undefined\n    readonly config: ModalConfig | undefined\n    readonly modalContext: Modal | null\n    readonly onTopOfStack: boolean | undefined\n    readonly shouldRender: boolean | undefined\n}\n\nconst HeadlessModal = forwardRef<HeadlessModalRef, HeadlessModalProps>(\n    (allProps, ref) => {\n        const { name, children, onFocus, onBlur, onClose, onSuccess, ...props } = allProps as HeadlessModalBaseProps & Record<string, unknown>\n        const modalIndex = useModalIndex()\n        const { stack, registerLocalModal, removeLocalModal } = useModalStack()\n\n        const [localModalContext, setLocalModalContext] = useState<Modal | null>(null)\n        const modalContext = useMemo(\n            () => (name ? localModalContext : stack[modalIndex]),\n            [name, localModalContext, modalIndex, stack],\n        )\n\n        const nextIndex = useMemo(() => {\n            return stack.find((m) => m.shouldRender && m.index > (modalContext?.index ?? -1))?.index\n        }, [modalIndex, stack])\n\n        const configSlideover = useMemo(\n            () => modalContext?.config.slideover ?? props.slideover ?? getConfig('type') === 'slideover',\n            [props.slideover, modalContext?.config.slideover],\n        )\n\n        const config: HeadlessModalConfig = useMemo(\n            () => ({\n                slideover: configSlideover as boolean,\n                closeButton: (props.closeButton ?? getConfigByType(configSlideover as boolean, 'closeButton')) as boolean,\n                closeExplicitly: (props.closeExplicitly ?? getConfigByType(configSlideover as boolean, 'closeExplicitly')) as boolean,\n                closeOnClickOutside: (props.closeOnClickOutside ?? getConfigByType(configSlideover as boolean, 'closeOnClickOutside')) as boolean,\n                maxWidth: (props.maxWidth ?? getConfigByType(configSlideover as boolean, 'maxWidth')) as string,\n                paddingClasses: (props.paddingClasses ?? getConfigByType(configSlideover as boolean, 'paddingClasses')) as string,\n                panelClasses: (props.panelClasses ?? getConfigByType(configSlideover as boolean, 'panelClasses')) as string,\n                position: (props.position ?? getConfigByType(configSlideover as boolean, 'position')) as string,\n                ...modalContext?.config,\n            }),\n            [props, modalContext?.config, configSlideover],\n        )\n\n        useEffect(() => {\n            if (name) {\n                let removeListeners: (() => void) | null = null\n\n                registerLocalModal(name as string, (localContext) => {\n                    removeListeners = localContext.registerEventListenersFromProps(props as Record<string, unknown>)\n                    setLocalModalContext(localContext)\n                })\n\n                return () => {\n                    removeListeners?.()\n                    removeListeners = null\n                    removeLocalModal(name as string)\n                }\n            }\n\n            return modalContext?.registerEventListenersFromProps(props as Record<string, unknown>)\n        }, [name])\n\n        // Store the latest modalContext in a ref to maintain reference\n        const modalContextRef = useRef(modalContext)\n\n        // Update the ref whenever modalContext changes\n        useEffect(() => {\n            modalContextRef.current = modalContext\n        }, [modalContext])\n\n        // Track previous isOpen value to only emit close when transitioning from true to false\n        const previousIsOpenRef = useRef<boolean | undefined>(undefined)\n\n        useEffect(() => {\n            if (modalContext !== null) {\n                if (modalContext.isOpen) {\n                    onSuccess?.()\n                } else if (previousIsOpenRef.current === true) {\n                    // Only call onClose when transitioning from open to closed,\n                    // not when the component first mounts with isOpen undefined/false\n                    onClose?.()\n                }\n                previousIsOpenRef.current = modalContext.isOpen\n            }\n        }, [modalContext?.isOpen])\n\n        const [rendered, setRendered] = useState(false)\n\n        useEffect(() => {\n            if (rendered && modalContext !== null && modalContext.isOpen) {\n                if (modalContext.onTopOfStack) {\n                    onFocus?.()\n                } else {\n                    onBlur?.()\n                }\n            }\n\n            setRendered(true)\n        }, [modalContext?.onTopOfStack])\n\n        useImperativeHandle(\n            ref,\n            () => ({\n                afterLeave: () => modalContextRef.current?.afterLeave(),\n                close: () => modalContextRef.current?.close(),\n                emit: (...args: [string, ...unknown[]]) => modalContextRef.current?.emit(...args),\n                getChildModal: () => modalContextRef.current?.getChildModal(),\n                getParentModal: () => modalContextRef.current?.getParentModal(),\n                reload: (options?: ReloadOptions) => modalContextRef.current?.reload(options),\n                setOpen: (open: boolean) => modalContextRef.current?.setOpen(open),\n\n                get id() {\n                    return modalContextRef.current?.id\n                },\n                get index() {\n                    return modalContextRef.current?.index\n                },\n                get isOpen() {\n                    return modalContextRef.current?.isOpen\n                },\n                get config() {\n                    return modalContextRef.current?.config\n                },\n                get modalContext() {\n                    return modalContextRef.current\n                },\n                get onTopOfStack() {\n                    return modalContextRef.current?.onTopOfStack\n                },\n                get shouldRender() {\n                    return modalContextRef.current?.shouldRender\n                },\n            }),\n            [modalContext],\n        )\n\n        if (!modalContext?.shouldRender) {\n            return null\n        }\n\n        return (\n            <>\n                {typeof children === 'function'\n                    ? children({\n                          // Spread props first so they can be overridden by built-in props\n                          ...modalContext.props,\n                          afterLeave: modalContext.afterLeave,\n                          close: modalContext.close,\n                          config,\n                          emit: modalContext.emit,\n                          getChildModal: modalContext.getChildModal,\n                          getParentModal: modalContext.getParentModal,\n                          id: modalContext.id,\n                          index: modalContext.index,\n                          isOpen: modalContext.isOpen,\n                          modalContext,\n                          onTopOfStack: modalContext.onTopOfStack,\n                          reload: modalContext.reload,\n                          setOpen: modalContext.setOpen,\n                          shouldRender: modalContext.shouldRender,\n                      })\n                    : children}\n\n                {/* Next modal in the stack */}\n                {nextIndex !== undefined && <ModalRenderer index={nextIndex} />}\n            </>\n        )\n    },\n)\n\nHeadlessModal.displayName = 'HeadlessModal'\nexport default HeadlessModal\n","interface CloseButtonProps {\n    onClick: () => void\n}\n\nexport default function CloseButton({ onClick }: CloseButtonProps) {\n    return (\n        <button\n            type=\"button\"\n            className=\"im-close-button text-gray-400 hover:text-gray-500\"\n            onClick={onClick}\n        >\n            <span className=\"sr-only\">Close</span>\n            <svg\n                className=\"size-6\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                strokeWidth=\"2\"\n                stroke=\"currentColor\"\n                aria-hidden=\"true\"\n            >\n                <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M6 18L18 6M6 6l12 12\"\n                />\n            </svg>\n        </button>\n    )\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","/**\n * Max width classes for modals and slideovers.\n * Uses a map lookup for Tailwind 4 compatibility (scanner picks up full class strings).\n */\nexport const maxWidthClasses: Record<string, string> = {\n    sm: 'sm:max-w-sm',\n    md: 'sm:max-w-md',\n    lg: 'sm:max-w-md md:max-w-lg',\n    xl: 'sm:max-w-md md:max-w-xl',\n    '2xl': 'sm:max-w-md md:max-w-xl lg:max-w-2xl',\n    '3xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl',\n    '4xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-4xl',\n    '5xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-5xl',\n    '6xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-5xl 2xl:max-w-6xl',\n    '7xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-5xl 2xl:max-w-7xl',\n}\n\nexport const defaultMaxWidth = '2xl'\n\nexport function getMaxWidthClass(maxWidth: string): string {\n    return maxWidthClasses[maxWidth] || maxWidthClasses[defaultMaxWidth]\n}\n","import { useState, useEffect, useRef, useCallback, useMemo, ReactNode, SyntheticEvent, MouseEvent } from 'react'\nimport CloseButton from './CloseButton'\nimport clsx from 'clsx'\nimport { createFocusTrap, onEscapeKey } from '../../vue/src/dialog'\nimport { getMaxWidthClass } from '../../vue/src/constants'\nimport type { Modal } from './types'\n\ninterface ModalContentConfig {\n    maxWidth: string\n    paddingClasses: string\n    panelClasses: string\n    position: string\n    closeButton: boolean\n    closeExplicitly?: boolean\n    closeOnClickOutside?: boolean\n}\n\ninterface ModalContentProps {\n    modalContext: Modal\n    config: ModalContentConfig\n    useNativeDialog: boolean\n    isFirstModal: boolean\n    onAfterLeave?: () => void\n    children: ReactNode | ((props: { modalContext: Modal; config: ModalContentConfig }) => ReactNode)\n}\n\nconst ModalContent = ({ modalContext, config, useNativeDialog, isFirstModal, onAfterLeave, children }: ModalContentProps) => {\n    const [entered, setEntered] = useState(false)\n    const [isLeaving, setIsLeaving] = useState(false)\n    const [transitionState, setTransitionState] = useState<'entering' | 'entered' | 'leaving' | 'exited'>('entering')\n    const wrapperRef = useRef<HTMLDivElement>(null)\n    const dialogRef = useRef<HTMLDialogElement>(null)\n    const cleanupFocusTrapRef = useRef<(() => void) | null>(null)\n    const cleanupEscapeKeyRef = useRef<(() => void) | null>(null)\n    const initialRender = useRef(true)\n\n    const maxWidthClass = useMemo(() => getMaxWidthClass(config.maxWidth), [config.maxWidth])\n\n    // ============ Non-native dialog handlers ============\n\n    const setupFocusTrap = useCallback(() => {\n        if (useNativeDialog) return\n        if (!wrapperRef.current || !modalContext.onTopOfStack) return\n        if (cleanupFocusTrapRef.current) return\n\n        cleanupFocusTrapRef.current = createFocusTrap(wrapperRef.current, {\n            initialFocus: true,\n            returnFocus: false,\n        })\n    }, [modalContext.onTopOfStack, useNativeDialog])\n\n    const cleanupFocusTrap = useCallback(() => {\n        if (cleanupFocusTrapRef.current) {\n            cleanupFocusTrapRef.current()\n            cleanupFocusTrapRef.current = null\n        }\n    }, [])\n\n    const setupEscapeKey = useCallback(() => {\n        if (useNativeDialog) return\n        if (cleanupEscapeKeyRef.current) return\n        if (config?.closeExplicitly) return\n\n        cleanupEscapeKeyRef.current = onEscapeKey(() => {\n            if (modalContext.onTopOfStack) {\n                modalContext.close()\n            }\n        })\n    }, [config?.closeExplicitly, modalContext, useNativeDialog])\n\n    const cleanupEscapeKey = useCallback(() => {\n        if (cleanupEscapeKeyRef.current) {\n            cleanupEscapeKeyRef.current()\n            cleanupEscapeKeyRef.current = null\n        }\n    }, [])\n\n    const handleClickOutside = useCallback(\n        (event: MouseEvent) => {\n            if (useNativeDialog) return\n            if (!modalContext.onTopOfStack) return\n            if (config?.closeExplicitly) return\n            if (config?.closeOnClickOutside === false) return\n            if (!wrapperRef.current) return\n\n            if (!wrapperRef.current.contains(event.target as Node)) {\n                modalContext.close()\n            }\n        },\n        [modalContext, config?.closeExplicitly, config?.closeOnClickOutside, useNativeDialog],\n    )\n\n    // ============ Native dialog handlers ============\n\n    const handleCancel = useCallback(\n        (event: SyntheticEvent) => {\n            event.preventDefault()\n            if (modalContext.onTopOfStack && !config?.closeExplicitly) {\n                modalContext.close()\n            }\n        },\n        [modalContext, config?.closeExplicitly],\n    )\n\n    const handleDialogClick = useCallback(\n        (event: MouseEvent) => {\n            if (event.target === dialogRef.current) {\n                if (modalContext.onTopOfStack && !config?.closeExplicitly && config?.closeOnClickOutside !== false) {\n                    modalContext.close()\n                }\n            }\n        },\n        [modalContext, config?.closeExplicitly, config?.closeOnClickOutside],\n    )\n\n    const openDialog = useCallback(() => {\n        if (dialogRef.current && !dialogRef.current.open) {\n            dialogRef.current.showModal()\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    setEntered(true)\n                })\n            })\n        }\n    }, [])\n\n    const closeDialog = useCallback(() => {\n        if (dialogRef.current && dialogRef.current.open) {\n            setIsLeaving(true)\n            setEntered(false)\n            setTimeout(() => {\n                if (dialogRef.current) {\n                    dialogRef.current.close()\n                }\n                setIsLeaving(false)\n                onAfterLeave?.()\n                modalContext.afterLeave()\n            }, 300)\n        }\n    }, [onAfterLeave, modalContext])\n\n    // ============ Lifecycle ============\n\n    // Initial mount\n    useEffect(() => {\n        if (useNativeDialog) {\n            if (modalContext.isOpen) {\n                openDialog()\n            }\n        } else {\n            setupEscapeKey()\n        }\n        return () => {\n            if (useNativeDialog) {\n                if (dialogRef.current?.open) {\n                    dialogRef.current.close()\n                }\n            } else {\n                cleanupFocusTrap()\n                cleanupEscapeKey()\n            }\n        }\n    }, [])\n\n    // Handle becoming top of stack / losing top of stack (non-native only)\n    useEffect(() => {\n        if (useNativeDialog) return\n\n        if (modalContext.onTopOfStack) {\n            setupEscapeKey()\n            if (entered) {\n                setupFocusTrap()\n            }\n        } else {\n            cleanupFocusTrap()\n            cleanupEscapeKey()\n        }\n    }, [modalContext.onTopOfStack, entered, setupEscapeKey, setupFocusTrap, cleanupFocusTrap, cleanupEscapeKey, useNativeDialog])\n\n    // Handle enter animation (non-native only)\n    useEffect(() => {\n        if (useNativeDialog) return\n\n        if (initialRender.current && modalContext.isOpen) {\n            initialRender.current = false\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    setTransitionState('entered')\n                    setTimeout(() => {\n                        setEntered(true)\n                        setupFocusTrap()\n                    }, 300)\n                })\n            })\n        }\n    }, [modalContext.isOpen, setupFocusTrap, useNativeDialog])\n\n    // Handle leave animation (non-native only)\n    useEffect(() => {\n        if (useNativeDialog) return\n\n        if (!modalContext.isOpen && transitionState === 'entered') {\n            setTransitionState('leaving')\n            setTimeout(() => {\n                setTransitionState('exited')\n                onAfterLeave?.()\n                modalContext.afterLeave()\n            }, 300)\n        }\n    }, [modalContext.isOpen, transitionState, onAfterLeave, modalContext, useNativeDialog])\n\n    // Watch for open state changes (native only)\n    useEffect(() => {\n        if (!useNativeDialog) return\n\n        if (modalContext.isOpen) {\n            openDialog()\n        } else if (!isLeaving) {\n            closeDialog()\n        }\n    }, [modalContext.isOpen, openDialog, closeDialog, isLeaving, useNativeDialog])\n\n    // ============ Render ============\n\n    const renderContent = () => (\n        <div\n            className={`im-modal-content relative ${config.paddingClasses} ${config.panelClasses}`}\n            data-inertiaui-modal-entered={entered}\n        >\n            {config.closeButton && (\n                <div className=\"absolute right-0 top-0 pr-3 pt-3\">\n                    <CloseButton onClick={modalContext.close} />\n                </div>\n            )}\n            {typeof children === 'function' ? children({ modalContext, config }) : children}\n        </div>\n    )\n\n    // Native dialog mode\n    if (useNativeDialog) {\n        return (\n            <dialog\n                ref={dialogRef}\n                className={clsx(\n                    'im-modal-dialog m-0 overflow-visible bg-transparent p-0',\n                    'size-full max-h-none max-w-none',\n                    'backdrop:bg-black/75 backdrop:transition-opacity backdrop:duration-300',\n                    entered ? 'backdrop:opacity-100' : 'backdrop:opacity-0',\n                    !isFirstModal && 'backdrop:bg-transparent',\n                )}\n                onCancel={handleCancel}\n                onClick={handleDialogClick}\n            >\n                <div className=\"im-modal-container fixed inset-0 overflow-y-auto p-4\">\n                    <div\n                        className={clsx('im-modal-positioner flex min-h-full justify-center', {\n                            'items-start': config.position === 'top',\n                            'items-center': config.position === 'center',\n                            'items-end': config.position === 'bottom',\n                        })}\n                    >\n                        <div\n                            className={clsx(\n                                'im-modal-wrapper w-full transition duration-300 ease-in-out',\n                                modalContext.onTopOfStack ? '' : 'blur-xs',\n                                entered && !isLeaving ? 'translate-y-0 opacity-100 sm:scale-100' : 'translate-y-4 opacity-0 sm:translate-y-0 sm:scale-95',\n                                maxWidthClass,\n                            )}\n                        >\n                            {renderContent()}\n                        </div>\n                    </div>\n                </div>\n            </dialog>\n        )\n    }\n\n    // Non-native dialog mode\n    if (transitionState === 'exited') return null\n\n    const isEntering = transitionState === 'entering'\n    const isLeavingNonNative = transitionState === 'leaving'\n\n    return (\n        <div\n            className=\"im-modal-container fixed inset-0 z-40 overflow-y-auto p-4\"\n            onMouseDown={handleClickOutside}\n        >\n            <div\n                className={clsx('im-modal-positioner flex min-h-full justify-center', {\n                    'items-start': config.position === 'top',\n                    'items-center': config.position === 'center',\n                    'items-end': config.position === 'bottom',\n                })}\n                onMouseDown={handleClickOutside}\n            >\n                <div\n                    ref={wrapperRef}\n                    role=\"dialog\"\n                    aria-modal=\"true\"\n                    className={clsx(\n                        'im-modal-wrapper w-full transition duration-300 ease-in-out',\n                        modalContext.onTopOfStack ? '' : 'blur-xs',\n                        isEntering || isLeavingNonNative ? 'translate-y-4 opacity-0 sm:translate-y-0 sm:scale-95' : 'translate-y-0 opacity-100 sm:scale-100',\n                        maxWidthClass,\n                    )}\n                >\n                    <span className=\"sr-only\">Dialog</span>\n                    {renderContent()}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ModalContent\n","import { useState, useEffect, useRef, useCallback, useMemo, ReactNode, SyntheticEvent, MouseEvent } from 'react'\nimport CloseButton from './CloseButton'\nimport clsx from 'clsx'\nimport { createFocusTrap, onEscapeKey } from '../../vue/src/dialog'\nimport { getMaxWidthClass } from '../../vue/src/constants'\nimport type { Modal } from './types'\n\ninterface SlideoverContentConfig {\n    maxWidth: string\n    paddingClasses: string\n    panelClasses: string\n    position: string\n    closeButton: boolean\n    closeExplicitly?: boolean\n    closeOnClickOutside?: boolean\n}\n\ninterface SlideoverContentProps {\n    modalContext: Modal\n    config: SlideoverContentConfig\n    useNativeDialog: boolean\n    isFirstModal: boolean\n    onAfterLeave?: () => void\n    children: ReactNode | ((props: { modalContext: Modal; config: SlideoverContentConfig }) => ReactNode)\n}\n\nconst SlideoverContent = ({ modalContext, config, useNativeDialog, isFirstModal, onAfterLeave, children }: SlideoverContentProps) => {\n    const [entered, setEntered] = useState(false)\n    const [isLeaving, setIsLeaving] = useState(false)\n    const [transitionState, setTransitionState] = useState<'entering' | 'entered' | 'leaving' | 'exited'>('entering')\n    const wrapperRef = useRef<HTMLDivElement>(null)\n    const dialogRef = useRef<HTMLDialogElement>(null)\n    const cleanupFocusTrapRef = useRef<(() => void) | null>(null)\n    const cleanupEscapeKeyRef = useRef<(() => void) | null>(null)\n    const initialRender = useRef(true)\n\n    const isLeft = config.position === 'left'\n\n    const maxWidthClass = useMemo(() => getMaxWidthClass(config.maxWidth), [config.maxWidth])\n\n    // Transform classes for slideover animation\n    const getTransformClass = useCallback(\n        (isHidden: boolean) => {\n            if (isHidden) {\n                return isLeft ? '-translate-x-full opacity-0' : 'translate-x-full opacity-0'\n            }\n            return 'translate-x-0 opacity-100'\n        },\n        [isLeft],\n    )\n\n    // ============ Non-native dialog handlers ============\n\n    const setupFocusTrap = useCallback(() => {\n        if (useNativeDialog) return\n        if (!wrapperRef.current || !modalContext.onTopOfStack) return\n        if (cleanupFocusTrapRef.current) return\n\n        cleanupFocusTrapRef.current = createFocusTrap(wrapperRef.current, {\n            initialFocus: true,\n            returnFocus: false,\n        })\n    }, [modalContext.onTopOfStack, useNativeDialog])\n\n    const cleanupFocusTrap = useCallback(() => {\n        if (cleanupFocusTrapRef.current) {\n            cleanupFocusTrapRef.current()\n            cleanupFocusTrapRef.current = null\n        }\n    }, [])\n\n    const setupEscapeKey = useCallback(() => {\n        if (useNativeDialog) return\n        if (cleanupEscapeKeyRef.current) return\n        if (config?.closeExplicitly) return\n\n        cleanupEscapeKeyRef.current = onEscapeKey(() => {\n            if (modalContext.onTopOfStack) {\n                modalContext.close()\n            }\n        })\n    }, [config?.closeExplicitly, modalContext, useNativeDialog])\n\n    const cleanupEscapeKey = useCallback(() => {\n        if (cleanupEscapeKeyRef.current) {\n            cleanupEscapeKeyRef.current()\n            cleanupEscapeKeyRef.current = null\n        }\n    }, [])\n\n    const handleClickOutside = useCallback(\n        (event: MouseEvent) => {\n            if (useNativeDialog) return\n            if (!modalContext.onTopOfStack) return\n            if (config?.closeExplicitly) return\n            if (config?.closeOnClickOutside === false) return\n            if (!wrapperRef.current) return\n\n            if (!wrapperRef.current.contains(event.target as Node)) {\n                modalContext.close()\n            }\n        },\n        [modalContext, config?.closeExplicitly, config?.closeOnClickOutside, useNativeDialog],\n    )\n\n    // ============ Native dialog handlers ============\n\n    const handleCancel = useCallback(\n        (event: SyntheticEvent) => {\n            event.preventDefault()\n            if (modalContext.onTopOfStack && !config?.closeExplicitly) {\n                modalContext.close()\n            }\n        },\n        [modalContext, config?.closeExplicitly],\n    )\n\n    const handleDialogClick = useCallback(\n        (event: MouseEvent) => {\n            if (event.target === dialogRef.current) {\n                if (modalContext.onTopOfStack && !config?.closeExplicitly && config?.closeOnClickOutside !== false) {\n                    modalContext.close()\n                }\n            }\n        },\n        [modalContext, config?.closeExplicitly, config?.closeOnClickOutside],\n    )\n\n    const openDialog = useCallback(() => {\n        if (dialogRef.current && !dialogRef.current.open) {\n            dialogRef.current.showModal()\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    setEntered(true)\n                })\n            })\n        }\n    }, [])\n\n    const closeDialog = useCallback(() => {\n        if (dialogRef.current && dialogRef.current.open) {\n            setIsLeaving(true)\n            setEntered(false)\n            setTimeout(() => {\n                if (dialogRef.current) {\n                    dialogRef.current.close()\n                }\n                setIsLeaving(false)\n                onAfterLeave?.()\n                modalContext.afterLeave()\n            }, 300)\n        }\n    }, [onAfterLeave, modalContext])\n\n    // ============ Lifecycle ============\n\n    // Initial mount\n    useEffect(() => {\n        if (useNativeDialog) {\n            if (modalContext.isOpen) {\n                openDialog()\n            }\n        } else {\n            setupEscapeKey()\n        }\n        return () => {\n            if (useNativeDialog) {\n                if (dialogRef.current?.open) {\n                    dialogRef.current.close()\n                }\n            } else {\n                cleanupFocusTrap()\n                cleanupEscapeKey()\n            }\n        }\n    }, [])\n\n    // Handle becoming top of stack / losing top of stack (non-native only)\n    useEffect(() => {\n        if (useNativeDialog) return\n\n        if (modalContext.onTopOfStack) {\n            setupEscapeKey()\n            if (entered) {\n                setupFocusTrap()\n            }\n        } else {\n            cleanupFocusTrap()\n            cleanupEscapeKey()\n        }\n    }, [modalContext.onTopOfStack, entered, setupEscapeKey, setupFocusTrap, cleanupFocusTrap, cleanupEscapeKey, useNativeDialog])\n\n    // Handle enter animation (non-native only)\n    useEffect(() => {\n        if (useNativeDialog) return\n\n        if (initialRender.current && modalContext.isOpen) {\n            initialRender.current = false\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    setTransitionState('entered')\n                    setTimeout(() => {\n                        setEntered(true)\n                        setupFocusTrap()\n                    }, 300)\n                })\n            })\n        }\n    }, [modalContext.isOpen, setupFocusTrap, useNativeDialog])\n\n    // Handle leave animation (non-native only)\n    useEffect(() => {\n        if (useNativeDialog) return\n\n        if (!modalContext.isOpen && transitionState === 'entered') {\n            setTransitionState('leaving')\n            setTimeout(() => {\n                setTransitionState('exited')\n                onAfterLeave?.()\n                modalContext.afterLeave()\n            }, 300)\n        }\n    }, [modalContext.isOpen, transitionState, onAfterLeave, modalContext, useNativeDialog])\n\n    // Watch for open state changes (native only)\n    useEffect(() => {\n        if (!useNativeDialog) return\n\n        if (modalContext.isOpen) {\n            openDialog()\n        } else if (!isLeaving) {\n            closeDialog()\n        }\n    }, [modalContext.isOpen, openDialog, closeDialog, isLeaving, useNativeDialog])\n\n    // ============ Render ============\n\n    const renderContent = () => (\n        <div\n            className={`im-slideover-content relative ${config.paddingClasses} ${config.panelClasses}`}\n            data-inertiaui-modal-entered={entered}\n        >\n            {config.closeButton && (\n                <div className=\"absolute right-0 top-0 pr-3 pt-3\">\n                    <CloseButton onClick={modalContext.close} />\n                </div>\n            )}\n            {typeof children === 'function' ? children({ modalContext, config }) : children}\n        </div>\n    )\n\n    // Native dialog mode\n    if (useNativeDialog) {\n        return (\n            <dialog\n                ref={dialogRef}\n                className={clsx(\n                    'im-slideover-dialog m-0 overflow-visible bg-transparent p-0',\n                    'size-full max-h-none max-w-none',\n                    'backdrop:bg-black/75 backdrop:transition-opacity backdrop:duration-300',\n                    entered ? 'backdrop:opacity-100' : 'backdrop:opacity-0',\n                    !isFirstModal && 'backdrop:bg-transparent',\n                )}\n                onCancel={handleCancel}\n                onClick={handleDialogClick}\n            >\n                <div className=\"im-slideover-container fixed inset-0 overflow-y-auto overflow-x-hidden\">\n                    <div\n                        className={clsx('im-slideover-positioner flex min-h-full items-center', {\n                            'justify-start rtl:justify-end': config?.position === 'left',\n                            'justify-end rtl:justify-start': config?.position === 'right',\n                        })}\n                    >\n                        <div\n                            className={clsx(\n                                'im-slideover-wrapper w-full transition duration-300 ease-in-out',\n                                modalContext.onTopOfStack ? '' : 'blur-xs',\n                                getTransformClass(!(entered && !isLeaving)),\n                                maxWidthClass,\n                            )}\n                        >\n                            {renderContent()}\n                        </div>\n                    </div>\n                </div>\n            </dialog>\n        )\n    }\n\n    // Non-native dialog mode\n    if (transitionState === 'exited') return null\n\n    const isEntering = transitionState === 'entering'\n    const isLeavingNonNative = transitionState === 'leaving'\n\n    return (\n        <div\n            className=\"im-slideover-container fixed inset-0 z-40 overflow-y-auto overflow-x-hidden\"\n            onMouseDown={handleClickOutside}\n        >\n            <div\n                className={clsx('im-slideover-positioner flex min-h-full items-center', {\n                    'justify-start rtl:justify-end': config?.position === 'left',\n                    'justify-end rtl:justify-start': config?.position === 'right',\n                })}\n                onMouseDown={handleClickOutside}\n            >\n                <div\n                    ref={wrapperRef}\n                    role=\"dialog\"\n                    aria-modal=\"true\"\n                    className={clsx(\n                        'im-slideover-wrapper w-full transition duration-300 ease-in-out',\n                        modalContext.onTopOfStack ? '' : 'blur-xs',\n                        getTransformClass(isEntering || isLeavingNonNative),\n                        maxWidthClass,\n                    )}\n                >\n                    <span className=\"sr-only\">Dialog</span>\n                    {renderContent()}\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default SlideoverContent\n","import { forwardRef, useRef, useImperativeHandle, useState, useEffect, useCallback, useMemo, ReactNode } from 'react'\nimport { createPortal } from 'react-dom'\nimport HeadlessModal, { HeadlessModalRef } from './HeadlessModal'\nimport ModalContent from './ModalContent'\nimport SlideoverContent from './SlideoverContent'\nimport { lockScroll, markAriaHidden } from '../../vue/src/dialog'\nimport { getConfig } from './config'\nimport type { Modal as ModalType, ReloadOptions } from './types'\n\ninterface ModalConfig {\n    slideover: boolean\n    closeButton: boolean\n    closeExplicitly: boolean\n    maxWidth: string\n    paddingClasses: string\n    panelClasses: string\n    position: string\n}\n\ninterface ModalRenderProps {\n    afterLeave: () => void\n    close: () => void\n    config: ModalConfig\n    emit: (event: string, ...args: unknown[]) => void\n    getChildModal: () => ModalType | null\n    getParentModal: () => ModalType | null\n    id: string\n    index: number\n    isOpen: boolean\n    modalContext: ModalType\n    onTopOfStack: boolean\n    reload: (options?: ReloadOptions) => void\n    setOpen: (open: boolean) => void\n    shouldRender: boolean\n    // Allow additional props from visitModal\n    [key: string]: unknown\n}\n\ninterface ModalBaseProps {\n    name?: string\n    children: ReactNode | ((props: ModalRenderProps) => ReactNode)\n    onFocus?: () => void\n    onBlur?: () => void\n    onClose?: () => void\n    onSuccess?: () => void\n    onAfterLeave?: () => void\n    slideover?: boolean\n    closeButton?: boolean\n    closeExplicitly?: boolean\n    maxWidth?: string\n    paddingClasses?: string\n    panelClasses?: string\n    position?: string\n}\n\ntype ModalProps = ModalBaseProps & Record<string, unknown>\n\ninterface BackdropTransitionProps {\n    show: boolean\n    appear: boolean\n    onAfterAppear?: () => void\n}\n\nconst Modal = forwardRef<HeadlessModalRef, ModalProps>(\n    (allProps, ref) => {\n        const { name, children, onFocus, onBlur, onClose, onSuccess, onAfterLeave, ...props } = allProps as ModalBaseProps & Record<string, unknown>\n        const renderChildren = (contentProps: ModalRenderProps) => {\n            if (typeof children === 'function') {\n                return children(contentProps)\n            }\n\n            return children\n        }\n\n        const headlessModalRef = useRef<HeadlessModalRef>(null)\n        const cleanupScrollLockRef = useRef<(() => void) | null>(null)\n        const cleanupAriaHiddenRef = useRef<(() => void) | null>(null)\n        const [rendered, setRendered] = useState(false)\n        const useNativeDialog = useMemo(() => getConfig('useNativeDialog') as boolean, [])\n\n        useImperativeHandle(ref, () => headlessModalRef.current!, [headlessModalRef])\n\n        // Cleanup on unmount\n        useEffect(() => {\n            return () => {\n                cleanupScrollLockRef.current?.()\n                cleanupAriaHiddenRef.current?.()\n            }\n        }, [])\n\n        const handleSuccess = useCallback(() => {\n            onSuccess?.()\n            if (!cleanupScrollLockRef.current) {\n                cleanupScrollLockRef.current = lockScroll()\n                cleanupAriaHiddenRef.current = markAriaHidden('#app')\n            }\n        }, [onSuccess])\n\n        const handleClose = useCallback(() => {\n            onClose?.()\n            cleanupScrollLockRef.current?.()\n            cleanupAriaHiddenRef.current?.()\n            cleanupScrollLockRef.current = null\n            cleanupAriaHiddenRef.current = null\n        }, [onClose])\n\n        const handleAfterLeave = useCallback(() => {\n            onAfterLeave?.()\n        }, [onAfterLeave])\n\n        return (\n            <HeadlessModal\n                ref={headlessModalRef}\n                name={name}\n                onFocus={onFocus ?? undefined}\n                onBlur={onBlur ?? undefined}\n                onClose={handleClose}\n                onSuccess={handleSuccess}\n                {...props}\n            >\n                {({\n                    afterLeave,\n                    close,\n                    config,\n                    emit,\n                    getChildModal,\n                    getParentModal,\n                    id,\n                    index,\n                    isOpen,\n                    modalContext,\n                    onTopOfStack,\n                    reload,\n                    setOpen,\n                    shouldRender,\n                    ...extraProps\n                }) => (\n                    <ModalPortal>\n                        <div\n                            className=\"im-dialog relative z-20\"\n                            data-inertiaui-modal-id={id}\n                            data-inertiaui-modal-index={index}\n                            aria-hidden={!onTopOfStack}\n                        >\n                            {/* Only render backdrop for the first modal (non-native dialog mode) */}\n                            {/* Native dialog uses ::backdrop pseudo-element instead */}\n                            {index === 0 && !useNativeDialog && (\n                                <BackdropTransition\n                                    show={isOpen}\n                                    appear={!rendered}\n                                    onAfterAppear={() => setRendered(true)}\n                                />\n                            )}\n\n                            {/* The modal/slideover content itself */}\n                            {config.slideover ? (\n                                <SlideoverContent\n                                    modalContext={modalContext}\n                                    config={config}\n                                    useNativeDialog={useNativeDialog}\n                                    isFirstModal={index === 0}\n                                    onAfterLeave={handleAfterLeave}\n                                >\n                                    {renderChildren({\n                                        ...extraProps,\n                                        afterLeave,\n                                        close,\n                                        config,\n                                        emit,\n                                        getChildModal,\n                                        getParentModal,\n                                        id,\n                                        index,\n                                        isOpen,\n                                        modalContext,\n                                        onTopOfStack,\n                                        reload,\n                                        setOpen,\n                                        shouldRender,\n                                    })}\n                                </SlideoverContent>\n                            ) : (\n                                <ModalContent\n                                    modalContext={modalContext}\n                                    config={config}\n                                    useNativeDialog={useNativeDialog}\n                                    isFirstModal={index === 0}\n                                    onAfterLeave={handleAfterLeave}\n                                >\n                                    {renderChildren({\n                                        ...extraProps,\n                                        afterLeave,\n                                        close,\n                                        config,\n                                        emit,\n                                        getChildModal,\n                                        getParentModal,\n                                        id,\n                                        index,\n                                        isOpen,\n                                        modalContext,\n                                        onTopOfStack,\n                                        reload,\n                                        setOpen,\n                                        shouldRender,\n                                    })}\n                                </ModalContent>\n                            )}\n                        </div>\n                    </ModalPortal>\n                )}\n            </HeadlessModal>\n        )\n    },\n)\n\n// Simple portal component\nfunction ModalPortal({ children }: { children: ReactNode }) {\n    const [mounted, setMounted] = useState(false)\n\n    useEffect(() => {\n        setMounted(true)\n    }, [])\n\n    if (!mounted) return null\n\n    return createPortal(children, document.body)\n}\n\n// Backdrop with CSS transition\nfunction BackdropTransition({ show, appear, onAfterAppear }: BackdropTransitionProps) {\n    const [state, setState] = useState<'entering' | 'entered' | 'leaving' | 'exited'>(() => {\n        if (appear && show) return 'entering'\n        return show ? 'entered' : 'exited'\n    })\n    const initialRender = useRef(true)\n\n    useEffect(() => {\n        if (initialRender.current) {\n            initialRender.current = false\n            if (appear && show) {\n                requestAnimationFrame(() => {\n                    setState('entered')\n                    setTimeout(() => onAfterAppear?.(), 300)\n                })\n            }\n            return\n        }\n\n        if (show) {\n            setState('entering')\n            requestAnimationFrame(() => {\n                setState('entered')\n            })\n        } else {\n            setState('leaving')\n            setTimeout(() => setState('exited'), 300)\n        }\n    }, [show, appear, onAfterAppear])\n\n    if (state === 'exited') return null\n\n    const isVisible = state === 'entered'\n\n    return (\n        <div\n            className={`im-backdrop fixed inset-0 z-30 bg-black/75 transition-opacity duration-300 ease-in-out ${isVisible ? 'opacity-100' : 'opacity-0'}`}\n            aria-hidden=\"true\"\n        />\n    )\n}\n\nModal.displayName = 'Modal'\nexport default Modal\n","import { useCallback, useState, useEffect, useMemo, useRef, ReactNode, ElementType, MouseEvent } from 'react'\nimport { useModalStack, modalPropNames, prefetch as prefetchModal } from './ModalRoot'\nimport { only, rejectNullValues, isStandardDomEvent } from './helpers'\nimport { getConfig } from './config'\nimport type { Modal, PrefetchOption } from './types'\nimport type { RequestPayload } from '@inertiajs/core'\n\ninterface ModalLinkProps {\n    href: string\n    method?: string\n    data?: RequestPayload\n    as?: ElementType\n    headers?: Record<string, string>\n    queryStringArrayFormat?: 'brackets' | 'indices'\n    onAfterLeave?: () => void\n    onBlur?: () => void\n    onClose?: () => void\n    onError?: (error: unknown) => void\n    onFocus?: () => void\n    onStart?: () => void\n    onSuccess?: () => void\n    onPrefetching?: () => void\n    onPrefetched?: () => void\n    navigate?: boolean\n    // Prefetch options (#146)\n    prefetch?: PrefetchOption\n    cacheFor?: number\n    children: ReactNode | ((props: { loading: boolean }) => ReactNode)\n    [key: string]: unknown\n}\n\nconst ModalLink = ({\n    href,\n    method = 'get',\n    data = {} as RequestPayload,\n    as: Component = 'a',\n    headers = {},\n    queryStringArrayFormat = 'brackets' as const,\n    onAfterLeave,\n    onBlur,\n    onClose,\n    onError,\n    onFocus,\n    onStart,\n    onSuccess,\n    onPrefetching,\n    onPrefetched,\n    navigate,\n    prefetch = false,\n    cacheFor = 30000,\n    children,\n    ...props\n}: ModalLinkProps) => {\n    const [loading, setLoading] = useState(false)\n    const [modalContext, setModalContext] = useState<Modal | null>(null)\n    const { stack, visit } = useModalStack()\n    const hoverTimeout = useRef<ReturnType<typeof setTimeout> | null>(null)\n\n    const shouldNavigate = useMemo(() => {\n        return navigate ?? (getConfig('navigate') as boolean)\n    }, [navigate])\n\n    // Prefetch logic (#146)\n    const prefetchModes = useMemo(() => {\n        if (prefetch === true) {\n            return ['hover']\n        }\n        if (prefetch === false) {\n            return []\n        }\n        if (Array.isArray(prefetch)) {\n            return prefetch\n        }\n        return [prefetch]\n    }, [prefetch])\n\n    const doPrefetch = useCallback(() => {\n        prefetchModal(href, {\n            method,\n            data,\n            headers,\n            queryStringArrayFormat,\n            cacheFor,\n            onPrefetching: onPrefetching ?? undefined,\n            onPrefetched: onPrefetched ?? undefined,\n        })\n    }, [href, method, data, headers, queryStringArrayFormat, cacheFor, onPrefetching, onPrefetched])\n\n    const handleMouseEnter = useCallback(() => {\n        if (!prefetchModes.includes('hover')) return\n\n        hoverTimeout.current = setTimeout(() => {\n            doPrefetch()\n        }, 75) // Small delay to avoid prefetching on accidental hovers\n    }, [prefetchModes, doPrefetch])\n\n    const handleMouseLeave = useCallback(() => {\n        if (hoverTimeout.current) {\n            clearTimeout(hoverTimeout.current)\n            hoverTimeout.current = null\n        }\n    }, [])\n\n    const handleMouseDown = useCallback(\n        (event: MouseEvent) => {\n            if (!prefetchModes.includes('click')) return\n            if (event.button !== 0) return // Only left click\n\n            doPrefetch()\n        },\n        [prefetchModes, doPrefetch],\n    )\n\n    // Prefetch on mount\n    useEffect(() => {\n        if (prefetchModes.includes('mount')) {\n            doPrefetch()\n        }\n    }, [])\n\n    // Cleanup hover timeout on unmount\n    useEffect(() => {\n        return () => {\n            if (hoverTimeout.current) {\n                clearTimeout(hoverTimeout.current)\n            }\n        }\n    }, [])\n\n    // Separate standard props from custom event handlers\n    const standardProps: Record<string, unknown> = {}\n    const customEvents: Record<string, (...args: unknown[]) => void> = {}\n\n    Object.keys(props).forEach((key) => {\n        if (modalPropNames.includes(key)) {\n            return\n        }\n\n        if (key.startsWith('on') && typeof props[key] === 'function') {\n            if (isStandardDomEvent(key)) {\n                standardProps[key] = props[key]\n            } else {\n                customEvents[key] = props[key] as (...args: unknown[]) => void\n            }\n        } else {\n            standardProps[key] = props[key]\n        }\n    })\n\n    const [isBlurred, setIsBlurred] = useState(false)\n\n    useEffect(() => {\n        if (!modalContext) {\n            return\n        }\n\n        if (modalContext.onTopOfStack && isBlurred) {\n            onFocus?.()\n        } else if (!modalContext.onTopOfStack && !isBlurred) {\n            onBlur?.()\n        }\n\n        setIsBlurred(!modalContext.onTopOfStack)\n    }, [stack])\n\n    const onCloseCallback = useCallback(() => {\n        onClose?.()\n    }, [onClose])\n\n    const onAfterLeaveCallback = useCallback(() => {\n        setModalContext(null)\n        onAfterLeave?.()\n    }, [onAfterLeave])\n\n    const handle = useCallback(\n        (e?: MouseEvent) => {\n            e?.preventDefault()\n            if (loading) return\n\n            if (!href.startsWith('#')) {\n                setLoading(true)\n                onStart?.()\n            }\n\n            visit(\n                href,\n                method,\n                data,\n                headers,\n                rejectNullValues(only(props, modalPropNames)) as Record<string, unknown>,\n                () => onCloseCallback(),\n                onAfterLeaveCallback,\n                queryStringArrayFormat,\n                shouldNavigate,\n            )\n                .then((newModalContext) => {\n                    setModalContext(newModalContext)\n                    newModalContext.registerEventListenersFromProps(customEvents)\n                    onSuccess?.()\n                })\n                .catch((error) => {\n                    console.error(error)\n                    onError?.(error)\n                })\n                .finally(() => setLoading(false))\n        },\n        [href, method, data, headers, queryStringArrayFormat, props, onCloseCallback, onAfterLeaveCallback],\n    )\n\n    return (\n        <Component\n            {...standardProps}\n            href={href}\n            onClick={handle}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n            onMouseDown={handleMouseDown}\n        >\n            {typeof children === 'function' ? children({ loading }) : children}\n        </Component>\n    )\n}\n\nexport default ModalLink\n","// See: https://github.com/inertiajs/inertia/blob/48bcd21fb7daf467d0df1bfde2408f161f94a579/packages/react/src/WhenVisible.ts\nimport { createElement, useCallback, useEffect, useRef, useState, ReactNode, ElementType } from 'react'\nimport useModal from './useModal'\nimport type { ReloadOptions } from './types'\n\ninterface WhenVisibleProps {\n    children: ReactNode\n    data?: string | string[]\n    params?: ReloadOptions\n    buffer?: number\n    as?: ElementType\n    always?: boolean\n    fallback?: ReactNode\n}\n\nconst WhenVisible = ({ children, data, params, buffer, as, always, fallback }: WhenVisibleProps) => {\n    always = always ?? false\n    as = as ?? 'div'\n    fallback = fallback ?? null\n\n    const [loaded, setLoaded] = useState(false)\n    const hasFetched = useRef(false)\n    const fetching = useRef(false)\n    const ref = useRef<HTMLElement>(null)\n\n    const modal = useModal()\n\n    const getReloadParams = useCallback((): ReloadOptions => {\n        if (data) {\n            return {\n                only: Array.isArray(data) ? data : [data],\n            }\n        }\n\n        if (!params) {\n            throw new Error('You must provide either a `data` or `params` prop.')\n        }\n\n        return params\n    }, [params, data])\n\n    useEffect(() => {\n        if (!ref.current) {\n            return\n        }\n\n        const observer = new IntersectionObserver(\n            (entries) => {\n                if (!entries[0].isIntersecting) {\n                    return\n                }\n\n                if (!always && hasFetched.current) {\n                    observer.disconnect()\n                }\n\n                if (fetching.current) {\n                    return\n                }\n\n                hasFetched.current = true\n                fetching.current = true\n\n                const reloadParams = getReloadParams()\n\n                modal?.reload({\n                    ...reloadParams,\n                    onStart: () => {\n                        fetching.current = true\n                        reloadParams.onStart?.()\n                    },\n                    onFinish: () => {\n                        setLoaded(true)\n                        fetching.current = false\n                        reloadParams.onFinish?.()\n\n                        if (!always) {\n                            observer.disconnect()\n                        }\n                    },\n                })\n            },\n            {\n                rootMargin: `${buffer || 0}px`,\n            },\n        )\n\n        observer.observe(ref.current)\n\n        return () => {\n            observer.disconnect()\n        }\n    }, [ref, getReloadParams, buffer])\n\n    if (always || !loaded) {\n        return createElement(\n            as,\n            {\n                props: null,\n                ref,\n            },\n            loaded ? children : fallback,\n        )\n    }\n\n    return loaded ? children : null\n}\n\nWhenVisible.displayName = 'InertiaWhenVisible'\n\nexport default WhenVisible\n","import { createElement } from 'react'\nimport { getConfig, putConfig, resetConfig } from './config'\nimport { useModalIndex } from './ModalRenderer'\nimport { useModalStack, ModalRoot, ModalStackProvider, renderApp, initFromPageProps, modalPropNames, prefetch } from './ModalRoot'\nimport useModal from './useModal'\nimport Deferred from './Deferred'\nimport HeadlessModal from './HeadlessModal'\nimport Modal from './Modal'\nimport ModalLink from './ModalLink'\nimport WhenVisible from './WhenVisible'\nimport * as dialogUtils from '../../vue/src/dialog'\n\n// Types\nexport type {\n    Modal as ModalInstance,\n    ModalConfig,\n    ModalResponseData,\n    ModalStackContextValue,\n    VisitOptions,\n    ReloadOptions,\n    EventCallback,\n    ComponentResolver,\n    PageProps,\n    ModalRootProps,\n    ModalRendererProps,\n    LocalModal,\n    // Prefetch types (#146)\n    PrefetchOption,\n    PrefetchOptions,\n} from './types'\n\nexport type {\n    CleanupFunction,\n    FocusTrapOptions,\n    ClickOutsideOptions,\n    EscapeKeyOptions,\n    DialogOptions,\n    Dialog,\n} from '@inertiaui/vanilla'\n\nconst setPageLayout = <T extends { default: { layout?: (page: React.ReactNode) => React.ReactNode } }>(\n    layout: React.ComponentType<{ children?: React.ReactNode }>,\n) => (module: T): T => {\n    module.default.layout = (page) => createElement(layout, { children: page })\n    return module\n}\n\nexport {\n    Deferred,\n    HeadlessModal,\n    Modal,\n    ModalLink,\n    ModalRoot,\n    ModalStackProvider,\n    WhenVisible,\n    getConfig,\n    initFromPageProps,\n    modalPropNames,\n    putConfig,\n    renderApp,\n    resetConfig,\n    setPageLayout,\n    useModal,\n    useModalIndex,\n    useModalStack,\n    // Prefetch function (#146)\n    prefetch,\n    // Dialog utilities (framework-agnostic)\n    dialogUtils,\n}\n"],"names":["defaultConfig","Config","key","value","keys","current","i","k","configInstance","resetConfig","putConfig","getConfig","getConfigByType","isSlideover","REACT_ELEMENT_TYPE","REACT_FRAGMENT_TYPE","jsxProd","type","config","maybeKey","propName","reactJsxRuntime_production","getComponentNameFromType","REACT_CLIENT_REFERENCE","REACT_PROFILER_TYPE","REACT_STRICT_MODE_TYPE","REACT_SUSPENSE_TYPE","REACT_SUSPENSE_LIST_TYPE","REACT_ACTIVITY_TYPE","REACT_PORTAL_TYPE","REACT_CONTEXT_TYPE","REACT_CONSUMER_TYPE","REACT_FORWARD_REF_TYPE","innerType","REACT_MEMO_TYPE","REACT_LAZY_TYPE","testStringCoercion","checkKeyStringCoercion","JSCompiler_inline_result","JSCompiler_temp_const","JSCompiler_inline_result$jscomp$0","getTaskName","name","getOwner","dispatcher","ReactSharedInternals","UnknownOwner","hasValidKey","hasOwnProperty","getter","defineKeyPropWarningGetter","props","displayName","warnAboutAccessingKey","specialPropKeyWarningShown","elementRefGetterWithDeprecationWarning","componentName","didWarnAboutElementRef","ReactElement","owner","debugStack","debugTask","refProp","jsxDEVImpl","isStaticChildren","children","isArrayImpl","validateChildKeys","didWarnAboutKeySpread","node","isValidElement","object","React","require$$0","createTask","callStackForError","unknownOwnerDebugStack","unknownOwnerDebugTask","reactJsxRuntime_development","trackActualOwner","jsxRuntimeModule","require$$1","generateId","prefix","vanillaGenerateId","sameUrlPath","url1","url2","origin","parsed1","parsed2","ModalStackContext","createContext","pageVersion","resolveComponent","baseUrl","prefetchCache","prefetchInFlight","getPrefetchCacheKey","url","method","data","getCachedResponse","cached","setCachedResponse","response","cacheFor","prefetch","href","options","headers","queryStringArrayFormat","mergedData","mergeDataIntoQueryString","cacheKey","inFlight","_a","requestHeaders","request","Axios","ModalStackProvider","stackRef","useRef","forceUpdate","useReducer","x","localModals","setLocalModals","useState","updateStack","withStack","newStack","isOnTopOfStack","modalId","modal","index","m","ModalClass","component","onClose","afterLeave","prevStack","open","currentStack","modalClosed","event","updatedStack","router","currentProps","_inertiaui_modal","rest","callback","kebabCase","cb","args","unsubscribers","eventName","unsub","except","_b","error","isValidModalResponse","pushFromResponseData","responseData","onAfterLeave","push","loadDeferredProps","deferred","newModal","pushLocalModal","visitModal","visit","listeners","updateBrowserUrl","useBrowserHistory","modalData","payload","onStart","onSuccess","onError","resolve","reject","cachedResponse","progress","force","prevLocalModals","newLocalModals","jsx","useModalStack","context","useContext","modalPropNames","initFromPageProps","pageProps","renderApp","App","renderInertiaApp","Component","renderComponent","child","createElement","acc","Layout","jsxs","Fragment","ModalRoot","$page","usePage","pendingModalKeysRef","getModalKey","isNavigatingRef","initialModalStillOpenedRef","useEffect","$event","modalOnBase","pageUrl","modalKey","axiosRequestInterceptor","baseUrlValue","interceptorId","previousModalRef","previousModal","existingModal","ModalRenderer","ModalIndexContext","useModalIndex","stack","modalContext","useMemo","useModal","Deferred","fallback","loaded","setLoaded","modalProps","HeadlessModal","forwardRef","allProps","ref","onFocus","onBlur","modalIndex","registerLocalModal","removeLocalModal","localModalContext","setLocalModalContext","nextIndex","configSlideover","removeListeners","localContext","modalContextRef","previousIsOpenRef","rendered","setRendered","useImperativeHandle","CloseButton","onClick","r","e","t","f","n","o","clsx","maxWidthClasses","defaultMaxWidth","getMaxWidthClass","maxWidth","ModalContent","useNativeDialog","isFirstModal","entered","setEntered","isLeaving","setIsLeaving","transitionState","setTransitionState","wrapperRef","dialogRef","cleanupFocusTrapRef","cleanupEscapeKeyRef","initialRender","maxWidthClass","setupFocusTrap","useCallback","createFocusTrap","cleanupFocusTrap","setupEscapeKey","onEscapeKey","cleanupEscapeKey","handleClickOutside","handleCancel","handleDialogClick","openDialog","closeDialog","renderContent","isEntering","isLeavingNonNative","SlideoverContent","isLeft","getTransformClass","isHidden","Modal","renderChildren","contentProps","headlessModalRef","cleanupScrollLockRef","cleanupAriaHiddenRef","handleSuccess","lockScroll","markAriaHidden","handleClose","handleAfterLeave","close","emit","getChildModal","getParentModal","id","isOpen","onTopOfStack","reload","setOpen","shouldRender","extraProps","ModalPortal","BackdropTransition","mounted","setMounted","createPortal","show","appear","onAfterAppear","state","setState","isVisible","ModalLink","onPrefetching","onPrefetched","navigate","loading","setLoading","setModalContext","hoverTimeout","shouldNavigate","prefetchModes","doPrefetch","prefetchModal","handleMouseEnter","handleMouseLeave","handleMouseDown","standardProps","customEvents","isStandardDomEvent","isBlurred","setIsBlurred","onCloseCallback","onAfterLeaveCallback","handle","rejectNullValues","only","newModalContext","WhenVisible","params","buffer","as","always","hasFetched","fetching","getReloadParams","observer","entries","reloadParams","setPageLayout","layout","module","page"],"mappings":"kiBAkBA,MAAMA,EAA6B,CAC/B,KAAM,QACN,SAAU,GACV,gBAAiB,GACjB,MAAO,CACH,YAAa,GACb,gBAAiB,GACjB,oBAAqB,GACrB,SAAU,MACV,eAAgB,aAChB,aAAc,mBACd,SAAU,QAAA,EAEd,UAAW,CACP,YAAa,GACb,gBAAiB,GACjB,oBAAqB,GACrB,SAAU,KACV,eAAgB,aAChB,aAAc,wBACd,SAAU,OAAA,CAElB,EAEA,MAAMC,EAAO,CAGT,aAAc,CACV,KAAK,OAAS,CAAA,EACd,KAAK,MAAA,CACT,CAEA,OAAc,CACV,KAAK,OAAS,KAAK,MAAM,KAAK,UAAUD,CAAa,CAAC,CAC1D,CAEA,IAAIE,EAAoCC,EAAuB,CAC3D,GAAI,OAAOD,GAAQ,SAAU,CACzB,KAAK,OAAS,CACV,KAAMA,EAAI,MAAQF,EAAc,KAChC,SAAUE,EAAI,UAAYF,EAAc,SACxC,gBAAiBE,EAAI,iBAAmBF,EAAc,gBACtD,MAAO,CAAE,GAAGA,EAAc,MAAO,GAAIE,EAAI,OAAS,EAAC,EACnD,UAAW,CAAE,GAAGF,EAAc,UAAW,GAAIE,EAAI,WAAa,CAAA,CAAC,CAAG,EAEtE,MACJ,CACA,MAAME,EAAOF,EAAI,MAAM,GAAG,EAC1B,IAAIG,EAAmC,KAAK,OAC5C,QAASC,EAAI,EAAGA,EAAIF,EAAK,OAAS,EAAGE,IACjCD,EAAWA,EAAQD,EAAKE,CAAC,CAAC,EAAID,EAAQD,EAAKE,CAAC,CAAC,GAAK,CAAA,EAEtDD,EAAQD,EAAKA,EAAK,OAAS,CAAC,CAAC,EAAID,CACrC,CAEA,IAAID,EAAuB,CACvB,GAAI,OAAOA,EAAQ,IACf,OAAO,KAAK,OAEhB,MAAME,EAAOF,EAAI,MAAM,GAAG,EAC1B,IAAIG,EAAmB,KAAK,OAC5B,UAAWE,KAAKH,EAAM,CAClB,GAAIC,GAAY,MAAiC,OAAOA,GAAY,SAChE,OAAO,KAEXA,EAAWA,EAAoCE,CAAC,CACpD,CACA,OAAOF,IAAY,OAAY,KAAOA,CAC1C,CACJ,CAEA,MAAMG,GAAiB,IAAIP,GAEdQ,GAAc,IAAYD,GAAe,MAAA,EACzCE,GAAY,CAACR,EAAoCC,IAA0BK,GAAe,IAAIN,EAAKC,CAAK,EACxGQ,GAAaT,GAA0BM,GAAe,IAAIN,CAAG,EAC7DU,EAAkB,CAACC,EAAsBX,IAClDM,GAAe,IAAIK,EAAc,aAAaX,CAAG,GAAK,SAASA,CAAG,EAAE;;;;;;;;6CCpFxE,IAAIY,EAAqB,OAAO,IAAI,4BAA4B,EAC9DC,EAAsB,OAAO,IAAI,gBAAgB,EACnD,SAASC,EAAQC,EAAMC,EAAQC,EAAU,CACvC,IAAIjB,EAAM,KAGV,GAFWiB,IAAX,SAAwBjB,EAAM,GAAKiB,GACxBD,EAAO,MAAlB,SAA0BhB,EAAM,GAAKgB,EAAO,KACxC,QAASA,EAAQ,CACnBC,EAAW,CAAA,EACX,QAASC,KAAYF,EACTE,IAAV,QAAuBD,EAASC,CAAQ,EAAIF,EAAOE,CAAQ,EACjE,MAASD,EAAWD,EAClB,OAAAA,EAASC,EAAS,IACX,CACL,SAAUL,EACV,KAAMG,EACN,IAAKf,EACL,IAAgBgB,IAAX,OAAoBA,EAAS,KAClC,MAAOC,EAEX,CACA,OAAAE,GAAA,SAAmBN,EACnBM,GAAA,IAAcL,EACdK,GAAA,KAAeL;;;;;;;;yCCtBE,QAAQ,IAAI,WAA7B,eACG,UAAY,CACX,SAASM,EAAyBL,EAAM,CACtC,GAAYA,GAAR,KAAc,OAAO,KACzB,GAAmB,OAAOA,GAAtB,WACF,OAAOA,EAAK,WAAaM,EACrB,KACAN,EAAK,aAAeA,EAAK,MAAQ,KACvC,GAAiB,OAAOA,GAApB,SAA0B,OAAOA,EACrC,OAAQA,EAAI,CACV,KAAKF,EACH,MAAO,WACT,KAAKS,EACH,MAAO,WACT,KAAKC,EACH,MAAO,aACT,KAAKC,EACH,MAAO,WACT,KAAKC,EACH,MAAO,eACT,KAAKC,EACH,MAAO,UACjB,CACM,GAAiB,OAAOX,GAApB,SACF,OACgB,OAAOA,EAAK,KAAzB,UACC,QAAQ,MACN,qHAEJA,EAAK,SACf,CACU,KAAKY,EACH,MAAO,SACT,KAAKC,EACH,OAAOb,EAAK,aAAe,UAC7B,KAAKc,EACH,OAAQd,EAAK,SAAS,aAAe,WAAa,YACpD,KAAKe,EACH,IAAIC,EAAYhB,EAAK,OACrB,OAAAA,EAAOA,EAAK,YACZA,IACIA,EAAOgB,EAAU,aAAeA,EAAU,MAAQ,GACnDhB,EAAcA,IAAP,GAAc,cAAgBA,EAAO,IAAM,cAC9CA,EACT,KAAKiB,EACH,OACGD,EAAYhB,EAAK,aAAe,KACxBgB,IAAT,KACIA,EACAX,EAAyBL,EAAK,IAAI,GAAK,OAE/C,KAAKkB,EACHF,EAAYhB,EAAK,SACjBA,EAAOA,EAAK,MACZ,GAAI,CACF,OAAOK,EAAyBL,EAAKgB,CAAS,CAAC,CAC7D,MAAwB,CAAA,CACxB,CACM,OAAO,IACb,CACI,SAASG,EAAmBjC,EAAO,CACjC,MAAO,GAAKA,CAClB,CACI,SAASkC,EAAuBlC,EAAO,CACrC,GAAI,CACFiC,EAAmBjC,CAAK,EACxB,IAAImC,EAA2B,EACvC,MAAkB,CACVA,EAA2B,EACnC,CACM,GAAIA,EAA0B,CAC5BA,EAA2B,QAC3B,IAAIC,EAAwBD,EAAyB,MACjDE,EACc,OAAO,QAAtB,YACC,OAAO,aACPrC,EAAM,OAAO,WAAW,GAC1BA,EAAM,YAAY,MAClB,SACF,OAAAoC,EAAsB,KACpBD,EACA,2GACAE,GAEKJ,EAAmBjC,CAAK,CACvC,CACA,CACI,SAASsC,EAAYxB,EAAM,CACzB,GAAIA,IAASF,EAAqB,MAAO,KACzC,GACe,OAAOE,GAApB,UACSA,IAAT,MACAA,EAAK,WAAakB,EAElB,MAAO,QACT,GAAI,CACF,IAAIO,EAAOpB,EAAyBL,CAAI,EACxC,OAAOyB,EAAO,IAAMA,EAAO,IAAM,OACzC,MAAkB,CACV,MAAO,OACf,CACA,CACI,SAASC,GAAW,CAClB,IAAIC,EAAaC,EAAqB,EACtC,OAAgBD,IAAT,KAAsB,KAAOA,EAAW,SAAQ,CAC7D,CACI,SAASE,GAAe,CACtB,OAAO,MAAM,uBAAuB,CAC1C,CACI,SAASC,EAAY7B,EAAQ,CAC3B,GAAI8B,EAAe,KAAK9B,EAAQ,KAAK,EAAG,CACtC,IAAI+B,EAAS,OAAO,yBAAyB/B,EAAQ,KAAK,EAAE,IAC5D,GAAI+B,GAAUA,EAAO,eAAgB,MAAO,EACpD,CACM,OAAkB/B,EAAO,MAAlB,MACb,CACI,SAASgC,EAA2BC,EAAOC,EAAa,CACtD,SAASC,GAAwB,CAC/BC,IACIA,EAA6B,GAC/B,QAAQ,MACN,0OACAF,CACZ,EACA,CACMC,EAAsB,eAAiB,GACvC,OAAO,eAAeF,EAAO,MAAO,CAClC,IAAKE,EACL,aAAc,EACtB,CAAO,CACP,CACI,SAASE,GAAyC,CAChD,IAAIC,EAAgBlC,EAAyB,KAAK,IAAI,EACtD,OAAAmC,EAAuBD,CAAa,IAChCC,EAAuBD,CAAa,EAAI,GAC1C,QAAQ,MACN,6IACV,GACMA,EAAgB,KAAK,MAAM,IACTA,IAAX,OAA2BA,EAAgB,IACxD,CACI,SAASE,EAAazC,EAAMf,EAAKiD,EAAOQ,EAAOC,EAAYC,GAAW,CACpE,IAAIC,EAAUX,EAAM,IACpB,OAAAlC,EAAO,CACL,SAAUH,EACV,KAAMG,EACN,IAAKf,EACL,MAAOiD,EACP,OAAQQ,IAEWG,IAAX,OAAqBA,EAAU,QAAzC,KACI,OAAO,eAAe7C,EAAM,MAAO,CACjC,WAAY,GACZ,IAAKsC,EACN,EACD,OAAO,eAAetC,EAAM,MAAO,CAAE,WAAY,GAAI,MAAO,KAAM,EACtEA,EAAK,OAAS,CAAA,EACd,OAAO,eAAeA,EAAK,OAAQ,YAAa,CAC9C,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO,CACf,CAAO,EACD,OAAO,eAAeA,EAAM,aAAc,CACxC,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO,IACf,CAAO,EACD,OAAO,eAAeA,EAAM,cAAe,CACzC,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO2C,CACf,CAAO,EACD,OAAO,eAAe3C,EAAM,aAAc,CACxC,aAAc,GACd,WAAY,GACZ,SAAU,GACV,MAAO4C,EACf,CAAO,EACD,OAAO,SAAW,OAAO,OAAO5C,EAAK,KAAK,EAAG,OAAO,OAAOA,CAAI,GACxDA,CACb,CACI,SAAS8C,EACP9C,EACAC,EACAC,EACA6C,EACAJ,EACAC,GACA,CACA,IAAII,EAAW/C,EAAO,SACtB,GAAe+C,IAAX,OACF,GAAID,EACF,GAAIE,EAAYD,CAAQ,EAAG,CACzB,IACED,EAAmB,EACnBA,EAAmBC,EAAS,OAC5BD,IAEAG,EAAkBF,EAASD,CAAgB,CAAC,EAC9C,OAAO,QAAU,OAAO,OAAOC,CAAQ,CACnD,MACY,QAAQ,MACN,6JAEDE,EAAkBF,CAAQ,EACjC,GAAIjB,EAAe,KAAK9B,EAAQ,KAAK,EAAG,CACtC+C,EAAW3C,EAAyBL,CAAI,EACxC,IAAIb,EAAO,OAAO,KAAKc,CAAM,EAAE,OAAO,SAAUX,GAAG,CACjD,OAAiBA,KAAV,KACjB,CAAS,EACDyD,EACE,EAAI5D,EAAK,OACL,kBAAoBA,EAAK,KAAK,SAAS,EAAI,SAC3C,iBACNgE,EAAsBH,EAAWD,CAAgB,IAC7C5D,EACA,EAAIA,EAAK,OAAS,IAAMA,EAAK,KAAK,SAAS,EAAI,SAAW,KAC5D,QAAQ,MACN;AAAA;AAAA;AAAA;AAAA;AAAA,mCACA4D,EACAC,EACA7D,EACA6D,GAEDG,EAAsBH,EAAWD,CAAgB,EAAI,GAChE,CAMM,GALAC,EAAW,KACA9C,IAAX,SACGkB,EAAuBlB,CAAQ,EAAI8C,EAAW,GAAK9C,GACtD4B,EAAY7B,CAAM,IACfmB,EAAuBnB,EAAO,GAAG,EAAI+C,EAAW,GAAK/C,EAAO,KAC3D,QAASA,EAAQ,CACnBC,EAAW,CAAA,EACX,QAASC,MAAYF,EACTE,KAAV,QAAuBD,EAASC,EAAQ,EAAIF,EAAOE,EAAQ,EACrE,MAAaD,EAAWD,EAClB,OAAA+C,GACEf,EACE/B,EACe,OAAOF,GAAtB,WACIA,EAAK,aAAeA,EAAK,MAAQ,UACjCA,GAEDyC,EACLzC,EACAgD,EACA9C,EACAwB,EAAQ,EACRiB,EACAC,GAER,CACI,SAASM,EAAkBE,EAAM,CAC/BC,EAAeD,CAAI,EACfA,EAAK,SAAWA,EAAK,OAAO,UAAY,GAC3B,OAAOA,GAApB,UACSA,IAAT,MACAA,EAAK,WAAalC,IACDkC,EAAK,SAAS,SAA9B,YACGC,EAAeD,EAAK,SAAS,KAAK,GAClCA,EAAK,SAAS,MAAM,SACnBA,EAAK,SAAS,MAAM,OAAO,UAAY,GACxCA,EAAK,SAAWA,EAAK,OAAO,UAAY,GACtD,CACI,SAASC,EAAeC,EAAQ,CAC9B,OACe,OAAOA,GAApB,UACSA,IAAT,MACAA,EAAO,WAAazD,CAE5B,CACI,IAAI0D,EAAQC,EACV3D,EAAqB,OAAO,IAAI,4BAA4B,EAC5De,EAAoB,OAAO,IAAI,cAAc,EAC7Cd,EAAsB,OAAO,IAAI,gBAAgB,EACjDU,EAAyB,OAAO,IAAI,mBAAmB,EACvDD,EAAsB,OAAO,IAAI,gBAAgB,EACjDO,EAAsB,OAAO,IAAI,gBAAgB,EACjDD,EAAqB,OAAO,IAAI,eAAe,EAC/CE,EAAyB,OAAO,IAAI,mBAAmB,EACvDN,EAAsB,OAAO,IAAI,gBAAgB,EACjDC,EAA2B,OAAO,IAAI,qBAAqB,EAC3DO,EAAkB,OAAO,IAAI,YAAY,EACzCC,EAAkB,OAAO,IAAI,YAAY,EACzCP,EAAsB,OAAO,IAAI,gBAAgB,EACjDL,EAAyB,OAAO,IAAI,wBAAwB,EAC5DsB,EACE2B,EAAM,gEACRxB,EAAiB,OAAO,UAAU,eAClCkB,EAAc,MAAM,QACpBQ,EAAa,QAAQ,WACjB,QAAQ,WACR,UAAY,CACV,OAAO,IACnB,EACIF,EAAQ,CACN,yBAA0B,SAAUG,EAAmB,CACrD,OAAOA,EAAiB,CAChC,GAEI,IAAIrB,EACAG,EAAyB,CAAA,EACzBmB,EAAyBJ,EAAM,yBAAyB,KAC1DA,EACA1B,CACN,EAAK,EACG+B,EAAwBH,EAAWjC,EAAYK,CAAY,CAAC,EAC5DsB,EAAwB,CAAA,EAC5BU,GAAA,SAAmB/D,EACnB+D,GAAA,IAAc,SAAU7D,EAAMC,EAAQC,EAAU,CAC9C,IAAI4D,EACF,IAAMlC,EAAqB,6BAC7B,OAAOkB,EACL9C,EACAC,EACAC,EACA,GACA4D,EACI,MAAM,uBAAuB,EAC7BH,EACJG,EAAmBL,EAAWjC,EAAYxB,CAAI,CAAC,EAAI4D,EAE3D,EACIC,GAAA,KAAe,SAAU7D,EAAMC,EAAQC,EAAU,CAC/C,IAAI4D,EACF,IAAMlC,EAAqB,6BAC7B,OAAOkB,EACL9C,EACAC,EACAC,EACA,GACA4D,EACI,MAAM,uBAAuB,EAC7BH,EACJG,EAAmBL,EAAWjC,EAAYxB,CAAI,CAAC,EAAI4D,EAE3D,CACA,GAAG,4CC7VC,QAAQ,IAAI,WAAa,aAC3BG,GAAA,QAAiBP,GAAA,EAEjBO,GAAA,QAAiBC,GAAA,yBCOnB,SAASC,GAAWC,EAAiB,mBAA4B,CAI7D,OAAOC,EAAAA,WAAkBD,CAAM,CACnC,CAEA,SAASE,GAAYC,EAAoBC,EAA6B,CAClE,MAAMC,EAAS,OAAO,OAAW,IAAc,OAAO,SAAS,OAAS,mBAClEC,EAAU,OAAOH,GAAS,SAAW,IAAI,IAAIA,EAAME,CAAM,EAAIF,EAC7DI,EAAU,OAAOH,GAAS,SAAW,IAAI,IAAIA,EAAMC,CAAM,EAAID,EAEnE,MAAO,GAAGE,EAAQ,MAAM,GAAGA,EAAQ,QAAQ,IAAO,GAAGC,EAAQ,MAAM,GAAGA,EAAQ,QAAQ,EAC1F,+cCFMC,GAAoBC,EAAAA,cAA6C,IAAI,EAC3ED,GAAkB,YAAc,oBAEhC,IAAIE,GAA6B,KAC7BC,GAA6C,KAC7CC,EAAyB,KAS7B,MAAMC,OAAoB,IACpBC,OAAuB,IAE7B,SAASC,GAAoBC,EAAaC,EAAgBC,EAA8B,CACpF,MAAO,GAAGD,CAAM,IAAID,CAAG,IAAI,KAAK,UAAUE,CAAI,CAAC,EACnD,CAEA,SAASC,GAAkBH,EAAaC,EAAgBC,EAA4C,CAChG,MAAMnG,EAAMgG,GAAoBC,EAAKC,EAAQC,CAAI,EAC3CE,EAASP,GAAc,IAAI9F,CAAG,EAEpC,OAAKqG,EAID,KAAK,MAAQA,EAAO,WACpBP,GAAc,OAAO9F,CAAG,EACjB,MAGJqG,EAAO,SARH,IASf,CAEA,SAASC,GAAkBL,EAAaC,EAAgBC,EAAsBI,EAAyBC,EAAwB,CAC3H,MAAMxG,EAAMgG,GAAoBC,EAAKC,EAAQC,CAAI,EACjDL,GAAc,IAAI9F,EAAK,CACnB,SAAAuG,EACA,UAAW,KAAK,IAAA,EAChB,UAAW,KAAK,MAAQC,CAAA,CAC3B,CACL,CAEO,SAASC,GAASC,EAAcC,EAA2B,GAAmB,OACjF,GAAID,EAAK,WAAW,GAAG,EACnB,OAAO,QAAQ,QAAA,EAGnB,MAAMR,GAAUS,EAAQ,QAAU,OAAO,YAAA,EACnCR,EAAOQ,EAAQ,MAAS,CAAA,EACxBC,EAAUD,EAAQ,SAAW,CAAA,EAC7BE,EAAyBF,EAAQ,wBAA0B,WAC3DH,EAAWG,EAAQ,UAAY,IAE/B,CAACV,EAAKa,CAAU,EAAIC,GAAAA,yBAAyBb,EAAuDQ,GAAQ,GAAIP,EAAMU,CAAsB,EAIlJ,GADeT,GAAkBH,EAAKC,EAAQY,CAAU,EAEpD,OAAO,QAAQ,QAAA,EAInB,MAAME,EAAWhB,GAAoBC,EAAKC,EAAQY,CAAU,EACtDG,EAAWlB,GAAiB,IAAIiB,CAAQ,EAC9C,GAAIC,EACA,OAAOA,EAAS,KAAK,IAAM,CAAC,CAAC,GAGjCC,EAAAP,EAAQ,gBAAR,MAAAO,EAAA,KAAAP,GAEA,MAAMQ,EAAyC,CAC3C,GAAGP,EACH,OAAQ,mCACR,mBAAoB,iBACpB,YAAa,OACb,oBAAqBjB,IAAe,GACpC,oBAAqBX,GAAA,EACrB,6BAA8Ba,GAAW,EAAA,EAGvCuB,EAAUC,EAAM,CAClB,IAAApB,EACA,OAAAC,EACA,KAAMY,EACN,QAASK,CAAA,CACZ,EACI,KAAMZ,GAAa,OAChB,OAAAD,GAAkBL,EAAKC,EAAQY,EAAYP,EAAUC,CAAQ,GAC7DU,EAAAP,EAAQ,eAAR,MAAAO,EAAA,KAAAP,GACOJ,CACX,CAAC,EACA,QAAQ,IAAM,CACXR,GAAiB,OAAOiB,CAAQ,CACpC,CAAC,EAEL,OAAAjB,GAAiB,IAAIiB,EAAUI,CAAO,EAE/BA,EAAQ,KAAK,IAAM,CAAC,CAAC,CAChC,CAMO,MAAME,GAAqB,CAAC,CAAE,SAAAvD,KAAwC,CAEzE,MAAMwD,EAAWC,EAAAA,OAAgB,EAAE,EAC7B,CAAA,CAAGC,CAAW,EAAIC,EAAAA,WAAYC,GAAMA,EAAI,EAAG,CAAC,EAC5C,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAqC,CAAA,CAAE,EAEvEC,EAAeC,GAA+C,CAChE,MAAMC,EAAWD,EAAU,CAAC,GAAGT,EAAS,OAAO,CAAC,EAE1CW,EAAkBC,GAAoB,OACxC,OAAIF,EAAS,OAAS,EACX,KAIPf,EAAAe,EACK,IAAKG,IAAW,CAAE,GAAIA,EAAM,GAAI,aAAcA,EAAM,cAAe,EACnE,UACA,KAAMA,GAAUA,EAAM,YAAY,IAHvC,YAAAlB,EAG0C,MAAOiB,CAEzD,EAEAF,EAAS,QAAQ,CAACG,EAAOC,IAAU,CAC/BJ,EAASI,CAAK,EAAE,aAAeH,EAAeE,EAAM,EAAE,EACtDH,EAASI,CAAK,EAAE,eAAiB,IACzBA,EAAQ,EAED,KAKPd,EAAS,QACJ,MAAM,EAAGc,CAAK,EACd,QAAA,EACA,KAAMC,GAAMA,EAAE,MAAM,GAAK,KAGtCL,EAASI,CAAK,EAAE,cAAgB,IACxBA,IAAUd,EAAS,QAAQ,OAAS,EAE7B,KAIJA,EAAS,QAAQ,MAAMc,EAAQ,CAAC,EAAE,KAAMC,GAAMA,EAAE,MAAM,GAAK,IAE1E,CAAC,EAEDf,EAAS,QAAUU,EACnBR,EAAA,CACJ,EAEA,MAAMc,CAA4B,CAiB9B,YACIC,EACAjC,EACAvF,EACAyH,EACAC,EACF,CAmBF,KAAA,KAAO,IAAM,CACTX,EAAaY,GACTA,EAAU,IAAKP,IACPA,EAAM,KAAO,KAAK,IAAM,CAACA,EAAM,SAC/BA,EAAM,OAAS,GACfA,EAAM,aAAe,IAElBA,EACV,CAAA,CAET,EAEA,KAAA,QAAWQ,GAAkB,CACrBA,EACA,KAAK,KAAA,EAEL,KAAK,MAAA,CAEb,EAEA,KAAA,MAAQ,IAAM,CACVb,EAAac,GAAiB,CAC1B,IAAIC,EAAc,GAElB,MAAMb,EAAWY,EAAa,IAAKT,GAAU,OACzC,OAAIA,EAAM,KAAO,KAAK,IAAMA,EAAM,SAC9B,OAAO,KAAKA,EAAM,SAAS,EAAE,QAASW,GAAU,CAC5CX,EAAM,IAAIW,CAAK,CACnB,CAAC,EAEDX,EAAM,OAAS,IACflB,EAAAkB,EAAM,kBAAN,MAAAlB,EAAA,KAAAkB,GACAU,EAAc,IAEXV,CACX,CAAC,EAED,OAAOU,EAAcb,EAAWY,CACpC,CAAC,CACL,EAEA,KAAA,WAAa,IAAM,CACX,KAAK,QAITd,EAAaY,GAAc,CACvB,MAAMK,EAAeL,EAAU,IAAKP,GAAU,OAC1C,OAAIA,EAAM,KAAO,KAAK,IAAM,CAACA,EAAM,SAC/BA,EAAM,aAAe,IACrBlB,EAAAkB,EAAM,qBAAN,MAAAlB,EAAA,KAAAkB,GACAA,EAAM,mBAAqB,MAExBA,CACX,CAAC,EAED,OAAI,KAAK,QAAU,GAEXvC,GAAW,OAAO,OAAW,KAC7BoD,EAAAA,OAAO,KAAK,CACR,IAAKpD,EACL,eAAgB,GAChB,cAAe,GAEf,MAAQqD,GAA0C,CAE9C,KAAM,CAAE,iBAAAC,EAAkB,GAAGC,CAAA,EAASF,EACtC,MAAO,CAAE,GAAGE,EAAM,iBAAkB,MAAA,CACxC,CAAA,CACH,EAELvD,EAAU,KACH,CAAA,GAGJmD,CACX,CAAC,CACL,EAEA,KAAA,GAAK,CAACD,EAAeM,IAA4B,CAC7CN,EAAQO,EAAAA,UAAUP,CAAK,EACvB,KAAK,UAAUA,CAAK,EAAI,KAAK,UAAUA,CAAK,GAAK,CAAA,EACjD,KAAK,UAAUA,CAAK,EAAE,KAAKM,CAAQ,CACvC,EAEA,KAAA,IAAM,CAACN,EAAeM,IAA6B,OAC/CN,EAAQO,EAAAA,UAAUP,CAAK,EACnBM,EACA,KAAK,UAAUN,CAAK,IAAI7B,EAAA,KAAK,UAAU6B,CAAK,IAApB,YAAA7B,EAAuB,OAAQqC,GAAOA,IAAOF,KAAa,CAAA,EAElF,OAAO,KAAK,UAAUN,CAAK,CAEnC,EAEA,KAAA,KAAO,CAACA,KAAkBS,IAAoB,QAC1CtC,EAAA,KAAK,UAAUoC,YAAUP,CAAK,CAAC,IAA/B,MAAA7B,EAAkC,QAASmC,GAAaA,EAAS,GAAGG,CAAI,EAC5E,EAEA,KAAA,gCAAmCvG,GAAmC,CAClE,MAAMwG,EAAgC,CAAA,EAEtC,cAAO,KAAKxG,CAAK,EACZ,OAAQjD,GAAQA,EAAI,WAAW,IAAI,CAAC,EACpC,QAASA,GAAQ,CAEd,MAAM0J,EAAYJ,EAAAA,UAAUtJ,CAAG,EAAE,QAAQ,OAAQ,EAAE,EAC7CqJ,EAAWpG,EAAMjD,CAAG,EAC1B,KAAK,GAAG0J,EAAWL,CAAQ,EAC3BI,EAAc,KAAK,IAAM,KAAK,IAAIC,EAAWL,CAAQ,CAAC,CAC1D,CAAC,EAEE,IAAMI,EAAc,QAASE,GAAUA,GAAO,CACzD,EAEA,KAAA,OAAS,CAAChD,EAAyB,KAAO,SACtC,IAAIzG,EAAO,OAAO,KAAK,KAAK,SAAS,KAAK,EAU1C,GARIyG,EAAQ,OACRzG,EAAOyG,EAAQ,MAGfA,EAAQ,SACRzG,EAAO0J,EAAAA,OAAO1J,EAAMyG,EAAQ,MAAM,GAGlC,GAACO,EAAA,KAAK,WAAL,MAAAA,EAAe,KAChB,OAGJ,MAAMhB,GAAUS,EAAQ,QAAU,OAAO,YAAA,EACnCR,EAAOQ,EAAQ,MAAQ,CAAA,GAE7BkD,EAAAlD,EAAQ,UAAR,MAAAkD,EAAA,KAAAlD,GAEAU,EAAM,CACF,IAAK,KAAK,SAAS,IACnB,OAAAnB,EACA,KAAMA,IAAW,MAAQ,CAAA,EAAKC,EAC9B,OAAQD,IAAW,MAAQC,EAAO,CAAA,EAClC,QAAS,CACL,GAAIQ,EAAQ,SAAW,CAAA,EACvB,OAAQ,mCACR,YAAa,OACb,8BAA+B,KAAK,SAAS,UAC7C,oBAAqB,KAAK,SAAS,SAAW,GAC9C,yBAA0BzG,EAAK,KAAK,GAAG,EACvC,oBAAqB8E,GAAA,EACrB,6BAA8Ba,GAAW,EAAA,CAC7C,CACH,EACI,KAAMU,GAAa,OAChB,KAAK,YAAYA,EAAS,KAAK,KAAK,GAEpCW,EAAAP,EAAQ,YAAR,MAAAO,EAAA,KAAAP,EAAoBJ,EACxB,CAAC,EACA,MAAOuD,GAAU,QACd5C,EAAAP,EAAQ,UAAR,MAAAO,EAAA,KAAAP,EAAkBmD,EACtB,CAAC,EACA,QAAQ,IAAM,QACX5C,EAAAP,EAAQ,WAAR,MAAAO,EAAA,KAAAP,EACJ,CAAC,CACT,EAEA,KAAA,YAAe1D,GAAmC,CAC9C,OAAO,OAAO,KAAK,MAAOA,CAAK,EAC/B8E,EAAaY,GAAcA,CAAS,CACxC,EAxLI,KAAK,GAAKpC,EAAS,IAAMvB,GAAA,EACzB,KAAK,OAAS,GACd,KAAK,aAAe,GACpB,KAAK,UAAY,CAAA,EAEjB,KAAK,UAAYwD,EACjB,KAAK,MAAQjC,EAAS,OAAS,CAAA,EAC/B,KAAK,SAAWA,EAChB,KAAK,OAASvF,GAAU,CAAA,EACxB,KAAK,gBAAkByH,GAAW,KAClC,KAAK,mBAAqBC,GAAc,KAExC,KAAK,MAAQ,GACb,KAAK,eAAiB,IAAM,KAC5B,KAAK,cAAgB,IAAM,KAC3B,KAAK,aAAe,EACxB,CAAA,CA2KJ,MAAMqB,EAAwB5D,GAEtB,OAAOA,GAAS,UAChBA,IAAS,MACT,cAAeA,GACf,OAAQA,EAA2B,WAAc,SAInD6D,EAAuB,CACzBC,EACAjJ,EAAsB,CAAA,EACtByH,EAA+B,KAC/ByB,EAAoC,OAE/BtE,GAIAmE,EAAqBE,CAAY,EAS/BrE,GAAiBqE,EAAa,SAAS,EAAE,KAAMzB,GAClD2B,EAAK3B,EAAWyB,EAAcjJ,EAAQyH,EAASyB,CAAY,CAAA,EATpD,QAAQ,OACX,IAAI,MACA,8JAAA,CAEJ,EARG,QAAQ,OAAO,IAAI,MAAM,0BAA0B,CAAC,EAiB7DE,EAAqBhC,GAAiB,SACxC,MAAMiC,GAAWR,GAAA3C,EAAAkB,EAAM,WAAN,YAAAlB,EAAgB,OAAhB,YAAA2C,EAAsB,cAElCQ,GAIL,OAAO,KAAKA,CAAQ,EAAE,QAASrK,GAAQ,CACnCoI,EAAM,OAAO,CAAE,KAAMiC,EAASrK,CAAG,EAAG,CACxC,CAAC,CACL,EAEMmK,EAAO,CACT3B,EACAjC,EACAvF,EACAyH,EACAC,IACQ,CACR,MAAM4B,EAAW,IAAI/B,EAAWC,EAAWjC,EAAUvF,EAAQyH,EAASC,CAAU,EAChF,OAAA4B,EAAS,MAAQ/C,EAAS,QAAQ,OAElCQ,EAAaY,GAAc,CAAC,GAAGA,EAAW2B,CAAQ,CAAC,EACnDF,EAAkBE,CAAQ,EAE1BA,EAAS,KAAA,EAEFA,CACX,EAEA,SAASC,EACL/H,EACAxB,EACAyH,EACAC,EACAzF,EACK,CACL,GAAI,CAAC2E,EAAYpF,CAAI,EACjB,MAAM,IAAI,MAAM,oBAAoBA,CAAI,4BAA4B,EAIxE,MAAM4F,EAAQ+B,EAAK,KADE,CAAE,MAAOlH,GAAS,CAAA,CAAC,EACDjC,EAAQyH,EAASC,CAAU,EAClE,OAAAN,EAAM,KAAO5F,EACboF,EAAYpF,CAAI,EAAE,SAAS4F,CAAK,EACzBA,CACX,CAEA,MAAMoC,EAAa,CAACvE,EAAaU,EAAwB,CAAA,IACrD8D,EACIxE,EACAU,EAAQ,QAAU,MAClBA,EAAQ,MAAS,CAAA,EACjBA,EAAQ,SAAW,CAAA,EACnBA,EAAQ,QAAU,CAAA,EAClBA,EAAQ,SAAW,KACnBA,EAAQ,cAAgB,KACxBA,EAAQ,wBAA0B,WAClCA,EAAQ,UAAalG,GAAU,UAAU,EACzCkG,EAAQ,SAAW,KACnBA,EAAQ,WAAa,KACrBA,EAAQ,SAAW,KACnBA,EAAQ,OAAS,IAAA,EACnB,KAAMyB,GAAU,CACd,MAAMsC,EAAY/D,EAAQ,WAAa,CAAA,EAEvC,cAAO,KAAK+D,CAAS,EAAE,QAAS3B,GAAU,CAEtC,MAAMW,EAAYJ,EAAAA,UAAUP,CAAK,EACjCX,EAAM,GAAGsB,EAAWgB,EAAU3B,CAAK,CAAC,CACxC,CAAC,EAEMX,CACX,CAAC,EAECuC,EAAmB,CAAC1E,EAAyB2E,EAA4BC,IAAwC,CAC/G,CAAC5E,GAAO,CAAC2E,GAAqB,OAAO,OAAW,KAIpD3B,EAAAA,OAAO,KAAK,CACR,IAAAhD,EACA,eAAgB,GAChB,cAAe,GAEf,MAAO4E,EACA3B,IAA2C,CACxC,GAAGA,EACH,iBAAkB,CACd,GAAG2B,EACH,QAAAhF,CAAA,CACJ,GAEJ,MAAA,CACT,CACL,EAEM4E,EAAQ,CACV/D,EACAR,EACA4E,EAA0B,CAAA,EAC1BlE,EAAkC,CAAA,EAClC5F,EAAsB,GACtByH,EAA+B,KAC/ByB,EAAoC,KACpCrD,EAAiD,WACjD+D,EAAoB,GACpBG,EAA+B,KAC/BC,EAAyD,KACzDC,EAAiD,KACjDhI,EAAwC,OACvB,CACjB,MAAMkF,EAAUnD,GAAA,EAEhB,OAAO,IAAI,QAAQ,CAACkG,EAASC,IAAW,OACpC,GAAIzE,EAAK,WAAW,GAAG,EAAG,CACtBwE,EAAQX,EAAe7D,EAAK,UAAU,CAAC,EAAG1F,EAAQyH,EAASyB,EAAcjH,CAAK,CAAC,EAC/E,MACJ,CAEA,KAAM,CAACgD,EAAKE,CAAI,EAAIY,GAAAA,yBAAyBb,EAAuDQ,GAAQ,GAAIoE,EAASjE,CAAsB,EAGzIuE,EAAiBhF,GAAkBH,EAAKC,EAAQC,CAAI,EAC1D,GAAIiF,EAAgB,CAChBJ,GAAA,MAAAA,EAAYI,GACZpB,EAAqBoB,EAAe,KAAMpK,EAAQyH,EAASyB,CAAY,EAClE,KAAM9B,GAAU,CACbuC,EAAiBS,EAAe,KAAK,IAAKR,EAAmBQ,EAAe,IAAI,EAChFF,EAAQ9C,CAAK,CACjB,CAAC,EACA,MAAM+C,CAAM,EACjB,MACJ,CAEI5D,EAAS,QAAQ,SAAW,IAC5B1B,EAAU,OAAO,OAAW,IAAc,OAAO,SAAS,KAAO,IAGrE,MAAMsB,EAAyC,CAC3C,GAAGP,EACH,OAAQ,mCACR,mBAAoB,iBACpB,YAAa,OACb,oBAAqBjB,IAAe,GACpC,oBAAqBwC,EACrB,6BAA8BtC,GAAW,EAAA,EAG7CkF,GAAA,MAAAA,KAEAM,EAAAA,EAAAA,WAAAA,MAAAA,EAAU,QAEVhE,EAAM,CACF,IAAApB,EACA,OAAAC,EACA,KAAAC,EACA,QAASgB,CAAA,CACZ,EACI,KAAMZ,GAAa,CAChByE,GAAA,MAAAA,EAAYzE,GACZyD,EAAqBzD,EAAS,KAAMvF,EAAQyH,EAASyB,CAAY,EAC5D,KAAM9B,GAAU,CACbuC,EAAiBpE,EAAS,KAAK,IAAKqE,EAAmBrE,EAAS,IAAI,EACpE2E,EAAQ9C,CAAK,CACjB,CAAC,EACA,MAAM+C,CAAM,CACrB,CAAC,EACA,MAAM,IAAI3B,IAAoB,CAC3ByB,GAAA,MAAAA,EAAU,GAAGzB,GACb2B,EAAO3B,EAAK,CAAC,CAAC,CAClB,CAAC,EACA,QAAQ,IAAM,QACX6B,EAAAA,EAAAA,WAAAA,MAAAA,EAAU,QACd,CAAC,CACT,CAAC,CACL,EAkBMpL,EAAgC,CAClC,IAAI,OAAQ,CACR,OAAOsH,EAAS,OACpB,EACA,YAAAK,EACA,KAAAuC,EACA,qBAAAH,EACA,OAAQ,IAAMzC,EAAS,QAAQ,OAC/B,SAAU,CAAC+D,EAAQ,KAAU,CACrBA,EAEAvD,EAAY,IAAM,CAAA,CAAE,EAGnB,CAAC,GAAGR,EAAS,OAAO,EAAE,QAAA,EAAU,QAASa,GAAUA,EAAM,OAAO,CAEzE,EACA,MAAO,IAAML,EAAY,IAAM,EAAE,EACjC,MAAA0C,EACA,WAAAD,EACA,mBApCuB,CAAChI,EAAc6G,IAAqC,CAC3ExB,EAAgB0D,IAAqB,CACjC,GAAGA,EACH,CAAC/I,CAAI,EAAG,CAAE,KAAAA,EAAM,SAAA6G,CAAA,CAAS,EAC3B,CACN,EAgCI,iBA9BsB7G,GAAiB,CACvCqF,EAAgB0D,GAAoB,CAChC,MAAMC,EAAiB,CAAE,GAAGD,CAAA,EAC5B,cAAOC,EAAehJ,CAAI,EACnBgJ,CACX,CAAC,CACL,CAwBI,EAGJ,OAAOC,EAAAA,IAAChG,GAAkB,SAAlB,CAA2B,MAAAxF,EAAe,SAAA8D,CAAA,CAAS,CAC/D,EAEa2H,GAAgB,IAA8B,CACvD,MAAMC,EAAUC,EAAAA,WAAWnG,EAAiB,EAC5C,GAAIkG,IAAY,KACZ,MAAM,IAAI,MAAM,wDAAwD,EAE5E,OAAOA,CACX,EAEaE,GAAiB,CAAC,cAAe,kBAAmB,sBAAuB,WAAY,iBAAkB,eAAgB,WAAY,WAAW,EAEhJC,GAAqBC,GAAyB,CACnDA,EAAU,cACVpG,GAAcoG,EAAU,YAAY,SAAW,MAG/CA,EAAU,mBACVnG,GAAmBmG,EAAU,iBAErC,EAQaC,GAAY,CAACC,EAA+EF,IAAyB,CAC9HD,GAAkBC,CAAS,EAE3B,MAAMG,EAAmB,CAAC,CAAE,UAAAC,EAAW,MAAAlJ,EAAO,IAAAjD,KAAiC,CAC3E,MAAMoM,EAAkB,IAAM,CAC1B,MAAMC,EAAQC,EAAAA,cAAcH,EAAW,CAAE,IAAAnM,EAAK,GAAGiD,EAAO,EAExD,OAAI,OAAOkJ,EAAU,QAAW,WACrBA,EAAU,OAAOE,CAAK,EAG7B,MAAM,QAAQF,EAAU,MAAM,EACvBA,EAAU,OACZ,MAAA,EACA,UACA,OACG,CAACI,EAAKC,IAAWF,EAAAA,cAAcE,EAAkDvJ,EAAOsJ,CAAG,EAC3FF,CAAA,EAILA,CACX,EAEA,OACII,EAAAA,KAAAC,WAAA,CACK,SAAA,CAAAN,EAAA,QACAO,GAAA,CAAA,CAAU,CAAA,EACf,CAER,EAEA,aACKrF,GAAA,CACG,SAAAmE,EAAAA,IAACQ,GAAK,GAAIF,EAAwC,WAAiB,CAAA,CACvE,CAER,EAOaY,GAAY,CAAC,CAAE,SAAA5I,KAA+B,SACvD,MAAM4H,EAAUC,EAAAA,WAAWnG,EAAiB,EACtCmH,EAAQC,EAAAA,QAAA,EACRC,EAAsBtF,EAAAA,OAAO,IAAI,GAAa,EAG9CuF,EAAelC,GAAiCA,EAAU,IAAM,GAAGA,EAAU,SAAS,IAAIA,EAAU,GAAG,GAEvGmC,EAAkBxF,EAAAA,OAAO,EAAK,EAC9ByF,EAA6BzF,EAAAA,OAAO,CAAC,GAACN,EAAA0F,EAAM,QAAN,MAAA1F,EAAa,iBAAgB,EAEzEgG,YAAU,IAAMjE,SAAO,GAAG,QAAS,IAAO+D,EAAgB,QAAU,EAAK,EAAG,EAAE,EAC9EE,YAAU,IAAMjE,SAAO,GAAG,SAAU,IAAO+D,EAAgB,QAAU,EAAM,EAAG,EAAE,EAChFE,EAAAA,UACI,IACIjE,SAAO,GAAG,WAAY,SAAUkE,EAAQ,CACpC,MAAMC,EAAeD,EAAiF,OAAO,KAAK,MAAM,iBAClHE,EAAWF,EAAiD,OAAO,KAAK,IAE9E,GAAI,CAACC,EAAa,CAEdzB,GAAA,MAAAA,EAAS,SAAS,IAClB9F,EAAU,KACVoH,EAA2B,QAAU,GACrC,MACJ,CAGA,GAAI,CAAC9H,GAAYkI,EAASD,EAAY,GAAG,EAAG,CACxCzB,GAAA,MAAAA,EAAS,SAAS,IAClB9F,EAAU,KACVoH,EAA2B,QAAU,GACrC,MACJ,CAEApH,EAAUuH,EAAY,QAGtB,MAAME,EAAWP,EAAYK,CAAW,EACpCN,EAAoB,QAAQ,IAAIQ,CAAQ,GAKxCF,EAAY,KAAMzB,GAAA,MAAAA,EAAS,MAAM,KAAMrD,GAAMA,EAAE,KAAO8E,EAAY,MAKlEzB,GAAA,MAAAA,EAAS,MAAM,KAAMrD,GAAA,SAAM,QAAApB,EAAAoB,EAAE,WAAF,YAAApB,EAAY,aAAckG,EAAY,WAAajI,IAAY0E,EAAAvB,EAAE,WAAF,YAAAuB,EAAY,IAAKuD,EAAY,GAAG,MAI9HN,EAAoB,QAAQ,IAAIQ,CAAQ,EAExC3B,GAAA,MAAAA,EACM,qBAAqByB,EAAa,CAAA,EAAI,IAAM,CAC1C,GAAI,CAACA,EAAY,QAAS,CACtB,QAAQ,MAAM,4DAA4D,EAC1E,MACJ,CACI,CAACJ,EAAgB,SAAW,OAAO,OAAW,KAAe,OAAO,SAAS,OAASI,EAAY,SAClGnE,SAAO,MAAMmE,EAAY,QAAS,CAC9B,eAAgB,GAChB,cAAe,EAAA,CAClB,CAET,GACC,KAAK,IAAM,CACRN,EAAoB,QAAQ,OAAOQ,CAAQ,CAC/C,GACR,CAAC,EACL,CAAA,CAAC,EAGL,MAAMC,EAA2BvM,GAAuC,OAIpE,MAAMwM,EAAe3H,IAAYoH,EAA2B,SAAU/F,EAAA0F,EAAM,MAAM,mBAAZ,YAAA1F,EAA8B,QAAU,MAC9G,OAAIsG,IACAxM,EAAO,QAAQ,4BAA4B,EAAIwM,GAG5CxM,CACX,EAEAkM,EAAAA,UAAU,IAAM,CACZ,MAAMO,EAAgBpG,EAAM,aAAa,QAAQ,IAAIkG,CAAuB,EAC5E,MAAO,IAAMlG,EAAM,aAAa,QAAQ,MAAMoG,CAAa,CAC/D,EAAG,CAAA,CAAE,EAEL,MAAMC,EAAmBlG,EAAAA,OAA8D,MAAS,EAEhG0F,OAAAA,EAAAA,UAAU,IAAM,SACZ,MAAM5C,GAAWpD,EAAA0F,EAAM,QAAN,YAAA1F,EAAa,iBACxByG,EAAgBD,EAAiB,QAKvC,GAFAA,EAAiB,QAAUpD,EAEvB,EAACA,EAKL,IAAIqD,GAAiBrD,EAAS,YAAcqD,EAAc,WAAaxI,GAAYmF,EAAS,IAAKqD,EAAc,GAAG,EAAG,EACjH9D,EAAA8B,GAAA,YAAAA,EAAS,MAAM,KAAf,MAAA9B,EAAmB,YAAYS,EAAS,OAAS,IACjD,MACJ,CAIA,GAAI,CAACqD,GAAiBhC,GAAWA,EAAQ,MAAM,OAAS,EAAG,CACvD,MAAMiC,EAAgBjC,EAAQ,MAAM,KAC/BrD,GAAA,SAAM,QAAApB,EAAAoB,EAAE,WAAF,YAAApB,EAAY,aAAcoD,EAAS,WAAanF,IAAY0E,EAAAvB,EAAE,WAAF,YAAAuB,EAAY,IAAKS,EAAS,GAAG,EAAA,EAEhGsD,GACAA,EAAc,YAAYtD,EAAS,OAAS,CAAA,CAAE,CAEtD,EACJ,EAAG,EAACT,EAAA+C,EAAM,QAAN,YAAA/C,EAAa,gBAAgB,CAAC,EAG9B4C,EAAAA,KAAAC,WAAA,CACK,SAAA,CAAA3I,EACA4H,GAAWA,EAAQ,MAAM,OAAS,GAAKF,EAAAA,IAACoC,GAAA,CAAc,MAAO,CAAA,CAAG,CAAA,EACrE,CAER,EC50BMC,GAAoBxJ,EAAM,cAA6B,IAAI,EACjEwJ,GAAkB,YAAc,oBAEzB,MAAMC,GAAgB,IAClBzJ,EAAM,WAAWwJ,EAAiB,EAGvCD,GAAgB,CAAC,CAAE,MAAAxF,KAAgC,CACrD,KAAM,CAAE,MAAA2F,CAAA,EAAUtC,GAAA,EAEZuC,EAAeC,EAAAA,QAAQ,IAClBF,EAAM3F,CAAK,EACnB,CAAC2F,EAAO3F,CAAK,CAAC,EAEjB,OAAK4F,GAAA,MAAAA,EAAc,UAKfxC,EAAAA,IAACqC,GAAkB,SAAlB,CAA2B,MAAOzF,EAC9B,SAAAiE,EAAAA,cAAc2B,EAAa,UAA2D,CACnF,GAAGA,EAAa,MAChB,aAAc,IAAIzE,IAAoByE,EAAa,KAAK,cAAe,GAAGzE,CAAI,CAAA,CACjF,EACL,EATO,IAWf,EC1BA,SAAwB2E,IAAyB,CAC7C,OAAOzC,GAAA,EAAgB,MAAMqC,GAAA,CAAe,GAAK,IACrD,CCIA,MAAMK,GAAW,CAAC,CAAE,SAAArK,EAAU,KAAAoC,EAAM,SAAAkI,KAA8B,CAC9D,GAAI,CAAClI,EACD,MAAM,IAAI,MAAM,wEAAwE,EAG5F,KAAM,CAACmI,EAAQC,CAAS,EAAIzG,EAAAA,SAAS,EAAK,EACpC5H,EAAO,MAAM,QAAQiG,CAAI,EAAIA,EAAO,CAACA,CAAI,EACzCiC,EAAQ+F,GAAA,EACRK,GAAapG,GAAA,YAAAA,EAAO,QAAS,CAAA,EAEnC8E,OAAAA,EAAAA,UAAU,IAAM,CACZqB,EAAUrO,EAAK,MAAOF,GAAQwO,EAAWxO,CAAG,IAAM,MAAS,CAAC,CAChE,EAAG,CAACwO,EAAYtO,CAAI,CAAC,EAEdoO,EAASvK,EAAWsK,CAC/B,EAEAD,GAAS,YAAc,uBC8CvB,MAAMK,GAAgBC,EAAAA,WAClB,CAACC,EAAUC,IAAQ,CACf,KAAM,CAAE,KAAApM,EAAM,SAAAuB,EAAU,QAAA8K,EAAS,OAAAC,EAAQ,QAAArG,EAAS,UAAAuC,EAAW,GAAG/H,CAAA,EAAU0L,EACpEI,EAAahB,GAAA,EACb,CAAE,MAAAC,EAAO,mBAAAgB,EAAoB,iBAAAC,CAAA,EAAqBvD,GAAA,EAElD,CAACwD,EAAmBC,CAAoB,EAAIrH,EAAAA,SAAuB,IAAI,EACvEmG,EAAeC,EAAAA,QACjB,IAAO1L,EAAO0M,EAAoBlB,EAAMe,CAAU,EAClD,CAACvM,EAAM0M,EAAmBH,EAAYf,CAAK,CAAA,EAGzCoB,EAAYlB,EAAAA,QAAQ,IAAM,OAC5B,OAAOhH,EAAA8G,EAAM,KAAM1F,GAAMA,EAAE,cAAgBA,EAAE,QAAS2F,GAAA,YAAAA,EAAc,QAAS,GAAG,IAAzE,YAAA/G,EAA4E,KACvF,EAAG,CAAC6H,EAAYf,CAAK,CAAC,EAEhBqB,EAAkBnB,EAAAA,QACpB,KAAMD,GAAA,YAAAA,EAAc,OAAO,YAAahL,EAAM,WAAaxC,GAAU,MAAM,IAAM,YACjF,CAACwC,EAAM,UAAWgL,GAAA,YAAAA,EAAc,OAAO,SAAS,CAAA,EAG9CjN,EAA8BkN,EAAAA,QAChC,KAAO,CACH,UAAWmB,EACX,YAAcpM,EAAM,aAAevC,EAAgB2O,EAA4B,aAAa,EAC5F,gBAAkBpM,EAAM,iBAAmBvC,EAAgB2O,EAA4B,iBAAiB,EACxG,oBAAsBpM,EAAM,qBAAuBvC,EAAgB2O,EAA4B,qBAAqB,EACpH,SAAWpM,EAAM,UAAYvC,EAAgB2O,EAA4B,UAAU,EACnF,eAAiBpM,EAAM,gBAAkBvC,EAAgB2O,EAA4B,gBAAgB,EACrG,aAAepM,EAAM,cAAgBvC,EAAgB2O,EAA4B,cAAc,EAC/F,SAAWpM,EAAM,UAAYvC,EAAgB2O,EAA4B,UAAU,EACnF,GAAGpB,GAAA,YAAAA,EAAc,MAAA,GAErB,CAAChL,EAAOgL,GAAA,YAAAA,EAAc,OAAQoB,CAAe,CAAA,EAGjDnC,EAAAA,UAAU,IAAM,CACZ,GAAI1K,EAAM,CACN,IAAI8M,EAAuC,KAE3C,OAAAN,EAAmBxM,EAAiB+M,GAAiB,CACjDD,EAAkBC,EAAa,gCAAgCtM,CAAgC,EAC/FkM,EAAqBI,CAAY,CACrC,CAAC,EAEM,IAAM,CACTD,GAAA,MAAAA,IACAA,EAAkB,KAClBL,EAAiBzM,CAAc,CACnC,CACJ,CAEA,OAAOyL,GAAA,YAAAA,EAAc,gCAAgChL,EACzD,EAAG,CAACT,CAAI,CAAC,EAGT,MAAMgN,EAAkBhI,EAAAA,OAAOyG,CAAY,EAG3Cf,EAAAA,UAAU,IAAM,CACZsC,EAAgB,QAAUvB,CAC9B,EAAG,CAACA,CAAY,CAAC,EAGjB,MAAMwB,EAAoBjI,EAAAA,OAA4B,MAAS,EAE/D0F,EAAAA,UAAU,IAAM,CACRe,IAAiB,OACbA,EAAa,OACbjD,GAAA,MAAAA,IACOyE,EAAkB,UAAY,KAGrChH,GAAA,MAAAA,KAEJgH,EAAkB,QAAUxB,EAAa,OAEjD,EAAG,CAACA,GAAA,YAAAA,EAAc,MAAM,CAAC,EAEzB,KAAM,CAACyB,EAAUC,CAAW,EAAI7H,EAAAA,SAAS,EAAK,EAkD9C,OAhDAoF,EAAAA,UAAU,IAAM,CACRwC,GAAYzB,IAAiB,MAAQA,EAAa,SAC9CA,EAAa,aACbY,GAAA,MAAAA,IAEAC,GAAA,MAAAA,KAIRa,EAAY,EAAI,CACpB,EAAG,CAAC1B,GAAA,YAAAA,EAAc,YAAY,CAAC,EAE/B2B,EAAAA,oBACIhB,EACA,KAAO,CACH,WAAY,IAAA,OAAM,OAAA1H,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,cAC3C,MAAO,IAAA,OAAM,OAAAA,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,SACtC,KAAM,IAAIsC,IAAA,OAAiC,OAAAtC,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,KAAK,GAAGsC,IAC5E,cAAe,IAAA,OAAM,OAAAtC,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,iBAC9C,eAAgB,IAAA,OAAM,OAAAA,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,kBAC/C,OAASP,GAAA,OAA4B,OAAAO,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,OAAOP,IACrE,QAAUiC,GAAA,OAAkB,OAAA1B,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,QAAQ0B,IAE7D,IAAI,IAAK,OACL,OAAO1B,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,EACpC,EACA,IAAI,OAAQ,OACR,OAAOA,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,KACpC,EACA,IAAI,QAAS,OACT,OAAOA,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,MACpC,EACA,IAAI,QAAS,OACT,OAAOA,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,MACpC,EACA,IAAI,cAAe,CACf,OAAOsI,EAAgB,OAC3B,EACA,IAAI,cAAe,OACf,OAAOtI,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,YACpC,EACA,IAAI,cAAe,OACf,OAAOA,EAAAsI,EAAgB,UAAhB,YAAAtI,EAAyB,YACpC,CAAA,GAEJ,CAAC+G,CAAY,CAAA,EAGZA,GAAA,MAAAA,EAAc,aAKfxB,EAAAA,KAAAC,WAAA,CACK,SAAA,CAAA,OAAO3I,GAAa,WACfA,EAAS,CAEL,GAAGkK,EAAa,MAChB,WAAYA,EAAa,WACzB,MAAOA,EAAa,MACpB,OAAAjN,EACA,KAAMiN,EAAa,KACnB,cAAeA,EAAa,cAC5B,eAAgBA,EAAa,eAC7B,GAAIA,EAAa,GACjB,MAAOA,EAAa,MACpB,OAAQA,EAAa,OACrB,aAAAA,EACA,aAAcA,EAAa,aAC3B,OAAQA,EAAa,OACrB,QAASA,EAAa,QACtB,aAAcA,EAAa,YAAA,CAC9B,EACDlK,EAGLqL,IAAc,QAAa3D,EAAAA,IAACoC,GAAA,CAAc,MAAOuB,CAAA,CAAW,CAAA,EACjE,EA5BO,IA8Bf,CACJ,EAEAX,GAAc,YAAc,gBCxO5B,SAAwBoB,GAAY,CAAE,QAAAC,GAA6B,CAC/D,OACIrD,EAAAA,KAAC,SAAA,CACG,KAAK,SACL,UAAU,oDACV,QAAAqD,EAEA,SAAA,CAAArE,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,QAAK,EAC/BA,EAAAA,IAAC,MAAA,CACG,UAAU,SACV,MAAM,6BACN,KAAK,OACL,QAAQ,YACR,YAAY,IACZ,OAAO,eACP,cAAY,OAEZ,SAAAA,EAAAA,IAAC,OAAA,CACG,cAAc,QACd,eAAe,QACf,EAAE,sBAAA,CAAA,CACN,CAAA,CACJ,CAAA,CAAA,CAGZ,CC7BA,SAASsE,GAAEC,EAAE,CAAC,IAAIC,EAAEC,EAAEC,EAAE,GAAG,GAAa,OAAOH,GAAjB,UAA8B,OAAOA,GAAjB,SAAmBG,GAAGH,UAAoB,OAAOA,GAAjB,SAAmB,GAAG,MAAM,QAAQA,CAAC,EAAE,CAAC,IAAII,EAAEJ,EAAE,OAAO,IAAIC,EAAE,EAAEA,EAAEG,EAAEH,IAAID,EAAEC,CAAC,IAAIC,EAAEH,GAAEC,EAAEC,CAAC,CAAC,KAAKE,IAAIA,GAAG,KAAKA,GAAGD,EAAE,KAAM,KAAIA,KAAKF,EAAEA,EAAEE,CAAC,IAAIC,IAAIA,GAAG,KAAKA,GAAGD,GAAG,OAAOC,CAAC,CAAQ,SAASE,GAAM,CAAC,QAAQL,EAAEC,EAAEC,EAAE,EAAEC,EAAE,GAAGC,EAAE,UAAU,OAAOF,EAAEE,EAAEF,KAAKF,EAAE,UAAUE,CAAC,KAAKD,EAAEF,GAAEC,CAAC,KAAKG,IAAIA,GAAG,KAAKA,GAAGF,GAAG,OAAOE,CAAC,CCIxW,MAAMG,GAA0C,CACnD,GAAI,cACJ,GAAI,cACJ,GAAI,0BACJ,GAAI,0BACJ,MAAO,uCACP,MAAO,uCACP,MAAO,oDACP,MAAO,oDACP,MAAO,kEACP,MAAO,iEACX,EAEaC,GAAkB,MAExB,SAASC,GAAiBC,EAA0B,CACvD,OAAOH,GAAgBG,CAAQ,GAAKH,GAAgBC,EAAe,CACvE,CCKA,MAAMG,GAAe,CAAC,CAAE,aAAAzC,EAAc,OAAAjN,EAAQ,gBAAA2P,EAAiB,aAAAC,EAAc,aAAA1G,EAAc,SAAAnG,KAAkC,CACzH,KAAM,CAAC8M,EAASC,CAAU,EAAIhJ,EAAAA,SAAS,EAAK,EACtC,CAACiJ,EAAWC,CAAY,EAAIlJ,EAAAA,SAAS,EAAK,EAC1C,CAACmJ,EAAiBC,CAAkB,EAAIpJ,EAAAA,SAAwD,UAAU,EAC1GqJ,EAAa3J,EAAAA,OAAuB,IAAI,EACxC4J,EAAY5J,EAAAA,OAA0B,IAAI,EAC1C6J,EAAsB7J,EAAAA,OAA4B,IAAI,EACtD8J,EAAsB9J,EAAAA,OAA4B,IAAI,EACtD+J,EAAgB/J,EAAAA,OAAO,EAAI,EAE3BgK,EAAgBtD,UAAQ,IAAMsC,GAAiBxP,EAAO,QAAQ,EAAG,CAACA,EAAO,QAAQ,CAAC,EAIlFyQ,EAAiBC,EAAAA,YAAY,IAAM,CACjCf,GACA,CAACQ,EAAW,SAAW,CAAClD,EAAa,cACrCoD,EAAoB,UAExBA,EAAoB,QAAUM,kBAAgBR,EAAW,QAAS,CAC9D,aAAc,GACd,YAAa,EAAA,CAChB,EACL,EAAG,CAAClD,EAAa,aAAc0C,CAAe,CAAC,EAEzCiB,EAAmBF,EAAAA,YAAY,IAAM,CACnCL,EAAoB,UACpBA,EAAoB,QAAA,EACpBA,EAAoB,QAAU,KAEtC,EAAG,CAAA,CAAE,EAECQ,EAAiBH,EAAAA,YAAY,IAAM,CACjCf,GACAW,EAAoB,SACpBtQ,GAAA,MAAAA,EAAQ,kBAEZsQ,EAAoB,QAAUQ,EAAAA,YAAY,IAAM,CACxC7D,EAAa,cACbA,EAAa,MAAA,CAErB,CAAC,EACL,EAAG,CAACjN,GAAA,YAAAA,EAAQ,gBAAiBiN,EAAc0C,CAAe,CAAC,EAErDoB,EAAmBL,EAAAA,YAAY,IAAM,CACnCJ,EAAoB,UACpBA,EAAoB,QAAA,EACpBA,EAAoB,QAAU,KAEtC,EAAG,CAAA,CAAE,EAECU,EAAqBN,EAAAA,YACtB3I,GAAsB,CACf4H,GACC1C,EAAa,eACdjN,GAAA,MAAAA,EAAQ,kBACRA,GAAA,YAAAA,EAAQ,uBAAwB,IAC/BmQ,EAAW,UAEXA,EAAW,QAAQ,SAASpI,EAAM,MAAc,GACjDkF,EAAa,MAAA,GAErB,EACA,CAACA,EAAcjN,GAAA,YAAAA,EAAQ,gBAAiBA,GAAA,YAAAA,EAAQ,oBAAqB2P,CAAe,CAAA,EAKlFsB,EAAeP,EAAAA,YAChB3I,GAA0B,CACvBA,EAAM,eAAA,EACFkF,EAAa,cAAgB,EAACjN,GAAA,MAAAA,EAAQ,kBACtCiN,EAAa,MAAA,CAErB,EACA,CAACA,EAAcjN,GAAA,YAAAA,EAAQ,eAAe,CAAA,EAGpCkR,EAAoBR,EAAAA,YACrB3I,GAAsB,CACfA,EAAM,SAAWqI,EAAU,SACvBnD,EAAa,cAAgB,EAACjN,GAAA,MAAAA,EAAQ,mBAAmBA,GAAA,YAAAA,EAAQ,uBAAwB,IACzFiN,EAAa,MAAA,CAGzB,EACA,CAACA,EAAcjN,GAAA,YAAAA,EAAQ,gBAAiBA,GAAA,YAAAA,EAAQ,mBAAmB,CAAA,EAGjEmR,EAAaT,EAAAA,YAAY,IAAM,CAC7BN,EAAU,SAAW,CAACA,EAAU,QAAQ,OACxCA,EAAU,QAAQ,UAAA,EAClB,sBAAsB,IAAM,CACxB,sBAAsB,IAAM,CACxBN,EAAW,EAAI,CACnB,CAAC,CACL,CAAC,EAET,EAAG,CAAA,CAAE,EAECsB,EAAcV,EAAAA,YAAY,IAAM,CAC9BN,EAAU,SAAWA,EAAU,QAAQ,OACvCJ,EAAa,EAAI,EACjBF,EAAW,EAAK,EAChB,WAAW,IAAM,CACTM,EAAU,SACVA,EAAU,QAAQ,MAAA,EAEtBJ,EAAa,EAAK,EAClB9G,GAAA,MAAAA,IACA+D,EAAa,WAAA,CACjB,EAAG,GAAG,EAEd,EAAG,CAAC/D,EAAc+D,CAAY,CAAC,EAK/Bf,EAAAA,UAAU,KACFyD,EACI1C,EAAa,QACbkE,EAAA,EAGJN,EAAA,EAEG,IAAM,OACLlB,GACIzJ,EAAAkK,EAAU,UAAV,MAAAlK,EAAmB,MACnBkK,EAAU,QAAQ,MAAA,GAGtBQ,EAAA,EACAG,EAAA,EAER,GACD,CAAA,CAAE,EAGL7E,EAAAA,UAAU,IAAM,CACRyD,IAEA1C,EAAa,cACb4D,EAAA,EACIhB,GACAY,EAAA,IAGJG,EAAA,EACAG,EAAA,GAER,EAAG,CAAC9D,EAAa,aAAc4C,EAASgB,EAAgBJ,EAAgBG,EAAkBG,EAAkBpB,CAAe,CAAC,EAG5HzD,EAAAA,UAAU,IAAM,CACRyD,GAEAY,EAAc,SAAWtD,EAAa,SACtCsD,EAAc,QAAU,GACxB,sBAAsB,IAAM,CACxB,sBAAsB,IAAM,CACxBL,EAAmB,SAAS,EAC5B,WAAW,IAAM,CACbJ,EAAW,EAAI,EACfW,EAAA,CACJ,EAAG,GAAG,CACV,CAAC,CACL,CAAC,EAET,EAAG,CAACxD,EAAa,OAAQwD,EAAgBd,CAAe,CAAC,EAGzDzD,EAAAA,UAAU,IAAM,CACRyD,GAEA,CAAC1C,EAAa,QAAUgD,IAAoB,YAC5CC,EAAmB,SAAS,EAC5B,WAAW,IAAM,CACbA,EAAmB,QAAQ,EAC3BhH,GAAA,MAAAA,IACA+D,EAAa,WAAA,CACjB,EAAG,GAAG,EAEd,EAAG,CAACA,EAAa,OAAQgD,EAAiB/G,EAAc+D,EAAc0C,CAAe,CAAC,EAGtFzD,EAAAA,UAAU,IAAM,CACPyD,IAED1C,EAAa,OACbkE,EAAA,EACQpB,GACRqB,EAAA,EAER,EAAG,CAACnE,EAAa,OAAQkE,EAAYC,EAAarB,EAAWJ,CAAe,CAAC,EAI7E,MAAM0B,EAAgB,IAClB5F,EAAAA,KAAC,MAAA,CACG,UAAW,6BAA6BzL,EAAO,cAAc,IAAIA,EAAO,YAAY,GACpF,+BAA8B6P,EAE7B,SAAA,CAAA7P,EAAO,aACJyK,EAAAA,IAAC,MAAA,CAAI,UAAU,mCACX,eAACoE,GAAA,CAAY,QAAS5B,EAAa,KAAA,CAAO,CAAA,CAC9C,EAEH,OAAOlK,GAAa,WAAaA,EAAS,CAAE,aAAAkK,EAAc,OAAAjN,CAAA,CAAQ,EAAI+C,CAAA,CAAA,CAAA,EAK/E,GAAI4M,EACA,OACIlF,EAAAA,IAAC,SAAA,CACG,IAAK2F,EACL,UAAWf,EACP,0DACA,kCACA,yEACAQ,EAAU,uBAAyB,qBACnC,CAACD,GAAgB,yBAAA,EAErB,SAAUqB,EACV,QAASC,EAET,SAAAzG,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACX,SAAAA,EAAAA,IAAC,MAAA,CACG,UAAW4E,EAAK,qDAAsD,CAClE,cAAerP,EAAO,WAAa,MACnC,eAAgBA,EAAO,WAAa,SACpC,YAAaA,EAAO,WAAa,QAAA,CACpC,EAED,SAAAyK,EAAAA,IAAC,MAAA,CACG,UAAW4E,EACP,8DACApC,EAAa,aAAe,GAAK,UACjC4C,GAAW,CAACE,EAAY,yCAA2C,uDACnES,CAAA,EAGH,SAAAa,EAAA,CAAc,CAAA,CACnB,CAAA,CACJ,CACJ,CAAA,CAAA,EAMZ,GAAIpB,IAAoB,SAAU,OAAO,KAEzC,MAAMqB,EAAarB,IAAoB,WACjCsB,EAAqBtB,IAAoB,UAE/C,OACIxF,EAAAA,IAAC,MAAA,CACG,UAAU,4DACV,YAAauG,EAEb,SAAAvG,EAAAA,IAAC,MAAA,CACG,UAAW4E,EAAK,qDAAsD,CAClE,cAAerP,EAAO,WAAa,MACnC,eAAgBA,EAAO,WAAa,SACpC,YAAaA,EAAO,WAAa,QAAA,CACpC,EACD,YAAagR,EAEb,SAAAvF,EAAAA,KAAC,MAAA,CACG,IAAK0E,EACL,KAAK,SACL,aAAW,OACX,UAAWd,EACP,8DACApC,EAAa,aAAe,GAAK,UACjCqE,GAAcC,EAAqB,uDAAyD,yCAC5Ff,CAAA,EAGJ,SAAA,CAAA/F,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,SAAM,EAC/B4G,EAAA,CAAc,CAAA,CAAA,CACnB,CAAA,CACJ,CAAA,CAGZ,EC/RMG,GAAmB,CAAC,CAAE,aAAAvE,EAAc,OAAAjN,EAAQ,gBAAA2P,EAAiB,aAAAC,EAAc,aAAA1G,EAAc,SAAAnG,KAAsC,CACjI,KAAM,CAAC8M,EAASC,CAAU,EAAIhJ,EAAAA,SAAS,EAAK,EACtC,CAACiJ,EAAWC,CAAY,EAAIlJ,EAAAA,SAAS,EAAK,EAC1C,CAACmJ,EAAiBC,CAAkB,EAAIpJ,EAAAA,SAAwD,UAAU,EAC1GqJ,EAAa3J,EAAAA,OAAuB,IAAI,EACxC4J,EAAY5J,EAAAA,OAA0B,IAAI,EAC1C6J,EAAsB7J,EAAAA,OAA4B,IAAI,EACtD8J,EAAsB9J,EAAAA,OAA4B,IAAI,EACtD+J,EAAgB/J,EAAAA,OAAO,EAAI,EAE3BiL,EAASzR,EAAO,WAAa,OAE7BwQ,EAAgBtD,UAAQ,IAAMsC,GAAiBxP,EAAO,QAAQ,EAAG,CAACA,EAAO,QAAQ,CAAC,EAGlF0R,EAAoBhB,EAAAA,YACrBiB,GACOA,EACOF,EAAS,8BAAgC,6BAE7C,4BAEX,CAACA,CAAM,CAAA,EAKLhB,EAAiBC,EAAAA,YAAY,IAAM,CACjCf,GACA,CAACQ,EAAW,SAAW,CAAClD,EAAa,cACrCoD,EAAoB,UAExBA,EAAoB,QAAUM,kBAAgBR,EAAW,QAAS,CAC9D,aAAc,GACd,YAAa,EAAA,CAChB,EACL,EAAG,CAAClD,EAAa,aAAc0C,CAAe,CAAC,EAEzCiB,EAAmBF,EAAAA,YAAY,IAAM,CACnCL,EAAoB,UACpBA,EAAoB,QAAA,EACpBA,EAAoB,QAAU,KAEtC,EAAG,CAAA,CAAE,EAECQ,EAAiBH,EAAAA,YAAY,IAAM,CACjCf,GACAW,EAAoB,SACpBtQ,GAAA,MAAAA,EAAQ,kBAEZsQ,EAAoB,QAAUQ,EAAAA,YAAY,IAAM,CACxC7D,EAAa,cACbA,EAAa,MAAA,CAErB,CAAC,EACL,EAAG,CAACjN,GAAA,YAAAA,EAAQ,gBAAiBiN,EAAc0C,CAAe,CAAC,EAErDoB,EAAmBL,EAAAA,YAAY,IAAM,CACnCJ,EAAoB,UACpBA,EAAoB,QAAA,EACpBA,EAAoB,QAAU,KAEtC,EAAG,CAAA,CAAE,EAECU,EAAqBN,EAAAA,YACtB3I,GAAsB,CACf4H,GACC1C,EAAa,eACdjN,GAAA,MAAAA,EAAQ,kBACRA,GAAA,YAAAA,EAAQ,uBAAwB,IAC/BmQ,EAAW,UAEXA,EAAW,QAAQ,SAASpI,EAAM,MAAc,GACjDkF,EAAa,MAAA,GAErB,EACA,CAACA,EAAcjN,GAAA,YAAAA,EAAQ,gBAAiBA,GAAA,YAAAA,EAAQ,oBAAqB2P,CAAe,CAAA,EAKlFsB,EAAeP,EAAAA,YAChB3I,GAA0B,CACvBA,EAAM,eAAA,EACFkF,EAAa,cAAgB,EAACjN,GAAA,MAAAA,EAAQ,kBACtCiN,EAAa,MAAA,CAErB,EACA,CAACA,EAAcjN,GAAA,YAAAA,EAAQ,eAAe,CAAA,EAGpCkR,EAAoBR,EAAAA,YACrB3I,GAAsB,CACfA,EAAM,SAAWqI,EAAU,SACvBnD,EAAa,cAAgB,EAACjN,GAAA,MAAAA,EAAQ,mBAAmBA,GAAA,YAAAA,EAAQ,uBAAwB,IACzFiN,EAAa,MAAA,CAGzB,EACA,CAACA,EAAcjN,GAAA,YAAAA,EAAQ,gBAAiBA,GAAA,YAAAA,EAAQ,mBAAmB,CAAA,EAGjEmR,EAAaT,EAAAA,YAAY,IAAM,CAC7BN,EAAU,SAAW,CAACA,EAAU,QAAQ,OACxCA,EAAU,QAAQ,UAAA,EAClB,sBAAsB,IAAM,CACxB,sBAAsB,IAAM,CACxBN,EAAW,EAAI,CACnB,CAAC,CACL,CAAC,EAET,EAAG,CAAA,CAAE,EAECsB,EAAcV,EAAAA,YAAY,IAAM,CAC9BN,EAAU,SAAWA,EAAU,QAAQ,OACvCJ,EAAa,EAAI,EACjBF,EAAW,EAAK,EAChB,WAAW,IAAM,CACTM,EAAU,SACVA,EAAU,QAAQ,MAAA,EAEtBJ,EAAa,EAAK,EAClB9G,GAAA,MAAAA,IACA+D,EAAa,WAAA,CACjB,EAAG,GAAG,EAEd,EAAG,CAAC/D,EAAc+D,CAAY,CAAC,EAK/Bf,EAAAA,UAAU,KACFyD,EACI1C,EAAa,QACbkE,EAAA,EAGJN,EAAA,EAEG,IAAM,OACLlB,GACIzJ,EAAAkK,EAAU,UAAV,MAAAlK,EAAmB,MACnBkK,EAAU,QAAQ,MAAA,GAGtBQ,EAAA,EACAG,EAAA,EAER,GACD,CAAA,CAAE,EAGL7E,EAAAA,UAAU,IAAM,CACRyD,IAEA1C,EAAa,cACb4D,EAAA,EACIhB,GACAY,EAAA,IAGJG,EAAA,EACAG,EAAA,GAER,EAAG,CAAC9D,EAAa,aAAc4C,EAASgB,EAAgBJ,EAAgBG,EAAkBG,EAAkBpB,CAAe,CAAC,EAG5HzD,EAAAA,UAAU,IAAM,CACRyD,GAEAY,EAAc,SAAWtD,EAAa,SACtCsD,EAAc,QAAU,GACxB,sBAAsB,IAAM,CACxB,sBAAsB,IAAM,CACxBL,EAAmB,SAAS,EAC5B,WAAW,IAAM,CACbJ,EAAW,EAAI,EACfW,EAAA,CACJ,EAAG,GAAG,CACV,CAAC,CACL,CAAC,EAET,EAAG,CAACxD,EAAa,OAAQwD,EAAgBd,CAAe,CAAC,EAGzDzD,EAAAA,UAAU,IAAM,CACRyD,GAEA,CAAC1C,EAAa,QAAUgD,IAAoB,YAC5CC,EAAmB,SAAS,EAC5B,WAAW,IAAM,CACbA,EAAmB,QAAQ,EAC3BhH,GAAA,MAAAA,IACA+D,EAAa,WAAA,CACjB,EAAG,GAAG,EAEd,EAAG,CAACA,EAAa,OAAQgD,EAAiB/G,EAAc+D,EAAc0C,CAAe,CAAC,EAGtFzD,EAAAA,UAAU,IAAM,CACPyD,IAED1C,EAAa,OACbkE,EAAA,EACQpB,GACRqB,EAAA,EAER,EAAG,CAACnE,EAAa,OAAQkE,EAAYC,EAAarB,EAAWJ,CAAe,CAAC,EAI7E,MAAM0B,EAAgB,IAClB5F,EAAAA,KAAC,MAAA,CACG,UAAW,iCAAiCzL,EAAO,cAAc,IAAIA,EAAO,YAAY,GACxF,+BAA8B6P,EAE7B,SAAA,CAAA7P,EAAO,aACJyK,EAAAA,IAAC,MAAA,CAAI,UAAU,mCACX,eAACoE,GAAA,CAAY,QAAS5B,EAAa,KAAA,CAAO,CAAA,CAC9C,EAEH,OAAOlK,GAAa,WAAaA,EAAS,CAAE,aAAAkK,EAAc,OAAAjN,CAAA,CAAQ,EAAI+C,CAAA,CAAA,CAAA,EAK/E,GAAI4M,EACA,OACIlF,EAAAA,IAAC,SAAA,CACG,IAAK2F,EACL,UAAWf,EACP,8DACA,kCACA,yEACAQ,EAAU,uBAAyB,qBACnC,CAACD,GAAgB,yBAAA,EAErB,SAAUqB,EACV,QAASC,EAET,SAAAzG,EAAAA,IAAC,MAAA,CAAI,UAAU,yEACX,SAAAA,EAAAA,IAAC,MAAA,CACG,UAAW4E,EAAK,uDAAwD,CACpE,iCAAiCrP,GAAA,YAAAA,EAAQ,YAAa,OACtD,iCAAiCA,GAAA,YAAAA,EAAQ,YAAa,OAAA,CACzD,EAED,SAAAyK,EAAAA,IAAC,MAAA,CACG,UAAW4E,EACP,kEACApC,EAAa,aAAe,GAAK,UACjCyE,EAAkB,EAAE7B,GAAW,CAACE,EAAU,EAC1CS,CAAA,EAGH,SAAAa,EAAA,CAAc,CAAA,CACnB,CAAA,CACJ,CACJ,CAAA,CAAA,EAMZ,GAAIpB,IAAoB,SAAU,OAAO,KAEzC,MAAMqB,EAAarB,IAAoB,WACjCsB,EAAqBtB,IAAoB,UAE/C,OACIxF,EAAAA,IAAC,MAAA,CACG,UAAU,8EACV,YAAauG,EAEb,SAAAvG,EAAAA,IAAC,MAAA,CACG,UAAW4E,EAAK,uDAAwD,CACpE,iCAAiCrP,GAAA,YAAAA,EAAQ,YAAa,OACtD,iCAAiCA,GAAA,YAAAA,EAAQ,YAAa,OAAA,CACzD,EACD,YAAagR,EAEb,SAAAvF,EAAAA,KAAC,MAAA,CACG,IAAK0E,EACL,KAAK,SACL,aAAW,OACX,UAAWd,EACP,kEACApC,EAAa,aAAe,GAAK,UACjCyE,EAAkBJ,GAAcC,CAAkB,EAClDf,CAAA,EAGJ,SAAA,CAAA/F,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAU,SAAA,SAAM,EAC/B4G,EAAA,CAAc,CAAA,CAAA,CACnB,CAAA,CACJ,CAAA,CAGZ,ECrQMO,GAAQlE,EAAAA,WACV,CAACC,EAAUC,IAAQ,CACf,KAAM,CAAE,KAAApM,EAAM,SAAAuB,EAAU,QAAA8K,EAAS,OAAAC,EAAQ,QAAArG,EAAS,UAAAuC,EAAW,aAAAd,EAAc,GAAGjH,CAAA,EAAU0L,EAClFkE,EAAkBC,GAChB,OAAO/O,GAAa,WACbA,EAAS+O,CAAY,EAGzB/O,EAGLgP,EAAmBvL,EAAAA,OAAyB,IAAI,EAChDwL,EAAuBxL,EAAAA,OAA4B,IAAI,EACvDyL,EAAuBzL,EAAAA,OAA4B,IAAI,EACvD,CAACkI,EAAUC,CAAW,EAAI7H,EAAAA,SAAS,EAAK,EACxC6I,EAAkBzC,EAAAA,QAAQ,IAAMzN,GAAU,iBAAiB,EAAc,CAAA,CAAE,EAEjFmP,EAAAA,oBAAoBhB,EAAK,IAAMmE,EAAiB,QAAU,CAACA,CAAgB,CAAC,EAG5E7F,EAAAA,UAAU,IACC,IAAM,UACThG,EAAA8L,EAAqB,UAArB,MAAA9L,EAAA,KAAA8L,IACAnJ,EAAAoJ,EAAqB,UAArB,MAAApJ,EAAA,KAAAoJ,EACJ,EACD,CAAA,CAAE,EAEL,MAAMC,EAAgBxB,EAAAA,YAAY,IAAM,CACpC1G,GAAA,MAAAA,IACKgI,EAAqB,UACtBA,EAAqB,QAAUG,aAAA,EAC/BF,EAAqB,QAAUG,EAAAA,eAAe,MAAM,EAE5D,EAAG,CAACpI,CAAS,CAAC,EAERqI,EAAc3B,EAAAA,YAAY,IAAM,SAClCjJ,GAAA,MAAAA,KACAvB,EAAA8L,EAAqB,UAArB,MAAA9L,EAAA,KAAA8L,IACAnJ,EAAAoJ,EAAqB,UAArB,MAAApJ,EAAA,KAAAoJ,GACAD,EAAqB,QAAU,KAC/BC,EAAqB,QAAU,IACnC,EAAG,CAACxK,CAAO,CAAC,EAEN6K,EAAmB5B,EAAAA,YAAY,IAAM,CACvCxH,GAAA,MAAAA,GACJ,EAAG,CAACA,CAAY,CAAC,EAEjB,OACIuB,EAAAA,IAACgD,GAAA,CACG,IAAKsE,EACL,KAAAvQ,EACA,QAASqM,GAAW,OACpB,OAAQC,GAAU,OAClB,QAASuE,EACT,UAAWH,EACV,GAAGjQ,EAEH,SAAA,CAAC,CACE,WAAAyF,EACA,MAAA6K,EACA,OAAAvS,EACA,KAAAwS,EACA,cAAAC,EACA,eAAAC,EACA,GAAAC,EACA,MAAAtL,EACA,OAAAuL,EACA,aAAA3F,EACA,aAAA4F,EACA,OAAAC,EACA,QAAAC,EACA,aAAAC,EACA,GAAGC,CAAA,UAEFC,GAAA,CACG,SAAAzH,EAAAA,KAAC,MAAA,CACG,UAAU,0BACV,0BAAyBkH,EACzB,6BAA4BtL,EAC5B,cAAa,CAACwL,EAIb,SAAA,CAAAxL,IAAU,GAAK,CAACsI,GACblF,EAAAA,IAAC0I,GAAA,CACG,KAAMP,EACN,OAAQ,CAAClE,EACT,cAAe,IAAMC,EAAY,EAAI,CAAA,CAAA,EAK5C3O,EAAO,UACJyK,EAAAA,IAAC+G,GAAA,CACG,aAAAvE,EACA,OAAAjN,EACA,gBAAA2P,EACA,aAActI,IAAU,EACxB,aAAciL,EAEb,SAAAT,EAAe,CACZ,GAAGoB,EACH,WAAAvL,EACA,MAAA6K,EACA,OAAAvS,EACA,KAAAwS,EACA,cAAAC,EACA,eAAAC,EACA,GAAAC,EACA,MAAAtL,EACA,OAAAuL,EACA,aAAA3F,EACA,aAAA4F,EACA,OAAAC,EACA,QAAAC,EACA,aAAAC,CAAA,CACH,CAAA,CAAA,EAGLvI,EAAAA,IAACiF,GAAA,CACG,aAAAzC,EACA,OAAAjN,EACA,gBAAA2P,EACA,aAActI,IAAU,EACxB,aAAciL,EAEb,SAAAT,EAAe,CACZ,GAAGoB,EACH,WAAAvL,EACA,MAAA6K,EACA,OAAAvS,EACA,KAAAwS,EACA,cAAAC,EACA,eAAAC,EACA,GAAAC,EACA,MAAAtL,EACA,OAAAuL,EACA,aAAA3F,EACA,aAAA4F,EACA,OAAAC,EACA,QAAAC,EACA,aAAAC,CAAA,CACH,CAAA,CAAA,CACL,CAAA,CAAA,CAER,CACJ,CAAA,CAAA,CAIhB,CACJ,EAGA,SAASE,GAAY,CAAE,SAAAnQ,GAAqC,CACxD,KAAM,CAACqQ,EAASC,CAAU,EAAIvM,EAAAA,SAAS,EAAK,EAM5C,OAJAoF,EAAAA,UAAU,IAAM,CACZmH,EAAW,EAAI,CACnB,EAAG,CAAA,CAAE,EAEAD,EAEEE,gBAAavQ,EAAU,SAAS,IAAI,EAFtB,IAGzB,CAGA,SAASoQ,GAAmB,CAAE,KAAAI,EAAM,OAAAC,EAAQ,cAAAC,GAA0C,CAClF,KAAM,CAACC,EAAOC,CAAQ,EAAI7M,EAAAA,SAAwD,IAC1E0M,GAAUD,EAAa,WACpBA,EAAO,UAAY,QAC7B,EACKhD,EAAgB/J,EAAAA,OAAO,EAAI,EAyBjC,GAvBA0F,EAAAA,UAAU,IAAM,CACZ,GAAIqE,EAAc,QAAS,CACvBA,EAAc,QAAU,GACpBiD,GAAUD,GACV,sBAAsB,IAAM,CACxBI,EAAS,SAAS,EAClB,WAAW,IAAMF,GAAA,YAAAA,IAAmB,GAAG,CAC3C,CAAC,EAEL,MACJ,CAEIF,GACAI,EAAS,UAAU,EACnB,sBAAsB,IAAM,CACxBA,EAAS,SAAS,CACtB,CAAC,IAEDA,EAAS,SAAS,EAClB,WAAW,IAAMA,EAAS,QAAQ,EAAG,GAAG,EAEhD,EAAG,CAACJ,EAAMC,EAAQC,CAAa,CAAC,EAE5BC,IAAU,SAAU,OAAO,KAE/B,MAAME,EAAYF,IAAU,UAE5B,OACIjJ,EAAAA,IAAC,MAAA,CACG,UAAW,0FAA0FmJ,EAAY,cAAgB,WAAW,GAC5I,cAAY,MAAA,CAAA,CAGxB,CAEAhC,GAAM,YAAc,QCjPpB,MAAMiC,GAAY,CAAC,CACf,KAAAnO,EACA,OAAAR,EAAS,MACT,KAAAC,EAAO,CAAA,EACP,GAAIgG,EAAY,IAChB,QAAAvF,EAAU,CAAA,EACV,uBAAAC,EAAyB,WACzB,aAAAqD,EACA,OAAA4E,EACA,QAAArG,EACA,QAAAwC,EACA,QAAA4D,EACA,QAAA9D,EACA,UAAAC,EACA,cAAA8J,EACA,aAAAC,EACA,SAAAC,EAAA,SACAvO,EAAW,GACX,SAAAD,EAAW,IACX,SAAAzC,EACA,GAAGd,CACP,IAAsB,CAClB,KAAM,CAACgS,EAASC,CAAU,EAAIpN,EAAAA,SAAS,EAAK,EACtC,CAACmG,EAAckH,CAAe,EAAIrN,EAAAA,SAAuB,IAAI,EAC7D,CAAE,MAAAkG,EAAO,MAAAvD,CAAA,EAAUiB,GAAA,EACnB0J,EAAe5N,EAAAA,OAA6C,IAAI,EAEhE6N,EAAiBnH,EAAAA,QAAQ,IACpB8G,GAAavU,GAAU,UAAU,EACzC,CAACuU,CAAQ,CAAC,EAGPM,EAAgBpH,EAAAA,QAAQ,IACtBzH,IAAa,GACN,CAAC,OAAO,EAEfA,IAAa,GACN,CAAA,EAEP,MAAM,QAAQA,CAAQ,EACfA,EAEJ,CAACA,CAAQ,EACjB,CAACA,CAAQ,CAAC,EAEP8O,EAAa7D,EAAAA,YAAY,IAAM,CACjC8D,GAAc9O,EAAM,CAChB,OAAAR,EACA,KAAAC,EACA,QAAAS,EACA,uBAAAC,EACA,SAAAL,EACA,cAAesO,GAAiB,OAChC,aAAcC,GAAgB,MAAA,CACjC,CACL,EAAG,CAACrO,EAAMR,EAAQC,EAAMS,EAASC,EAAwBL,EAAUsO,EAAeC,CAAY,CAAC,EAEzFU,EAAmB/D,EAAAA,YAAY,IAAM,CAClC4D,EAAc,SAAS,OAAO,IAEnCF,EAAa,QAAU,WAAW,IAAM,CACpCG,EAAA,CACJ,EAAG,EAAE,EACT,EAAG,CAACD,EAAeC,CAAU,CAAC,EAExBG,EAAmBhE,EAAAA,YAAY,IAAM,CACnC0D,EAAa,UACb,aAAaA,EAAa,OAAO,EACjCA,EAAa,QAAU,KAE/B,EAAG,CAAA,CAAE,EAECO,EAAkBjE,EAAAA,YACnB3I,GAAsB,CACduM,EAAc,SAAS,OAAO,GAC/BvM,EAAM,SAAW,GAErBwM,EAAA,CACJ,EACA,CAACD,EAAeC,CAAU,CAAA,EAI9BrI,EAAAA,UAAU,IAAM,CACRoI,EAAc,SAAS,OAAO,GAC9BC,EAAA,CAER,EAAG,CAAA,CAAE,EAGLrI,EAAAA,UAAU,IACC,IAAM,CACLkI,EAAa,SACb,aAAaA,EAAa,OAAO,CAEzC,EACD,CAAA,CAAE,EAGL,MAAMQ,EAAyC,CAAA,EACzCC,EAA6D,CAAA,EAEnE,OAAO,KAAK5S,CAAK,EAAE,QAASjD,GAAQ,CAC5B6L,GAAe,SAAS7L,CAAG,IAI3BA,EAAI,WAAW,IAAI,GAAK,OAAOiD,EAAMjD,CAAG,GAAM,WAC1C8V,EAAAA,mBAAmB9V,CAAG,EACtB4V,EAAc5V,CAAG,EAAIiD,EAAMjD,CAAG,EAE9B6V,EAAa7V,CAAG,EAAIiD,EAAMjD,CAAG,EAGjC4V,EAAc5V,CAAG,EAAIiD,EAAMjD,CAAG,EAEtC,CAAC,EAED,KAAM,CAAC+V,EAAWC,CAAY,EAAIlO,EAAAA,SAAS,EAAK,EAEhDoF,EAAAA,UAAU,IAAM,CACPe,IAIDA,EAAa,cAAgB8H,EAC7BlH,GAAA,MAAAA,IACO,CAACZ,EAAa,cAAgB,CAAC8H,IACtCjH,GAAA,MAAAA,KAGJkH,EAAa,CAAC/H,EAAa,YAAY,EAC3C,EAAG,CAACD,CAAK,CAAC,EAEV,MAAMiI,EAAkBvE,EAAAA,YAAY,IAAM,CACtCjJ,GAAA,MAAAA,GACJ,EAAG,CAACA,CAAO,CAAC,EAENyN,EAAuBxE,EAAAA,YAAY,IAAM,CAC3CyD,EAAgB,IAAI,EACpBjL,GAAA,MAAAA,GACJ,EAAG,CAACA,CAAY,CAAC,EAEXiM,EAASzE,EAAAA,YACV1B,GAAmB,CAChBA,GAAA,MAAAA,EAAG,iBACC,CAAAiF,IAECvO,EAAK,WAAW,GAAG,IACpBwO,EAAW,EAAI,EACfnK,GAAA,MAAAA,KAGJN,EACI/D,EACAR,EACAC,EACAS,EACAwP,EAAAA,iBAAiBC,EAAAA,KAAKpT,EAAO4I,EAAc,CAAC,EAC5C,IAAMoK,EAAA,EACNC,EACArP,EACAwO,CAAA,EAEC,KAAMiB,GAAoB,CACvBnB,EAAgBmB,CAAe,EAC/BA,EAAgB,gCAAgCT,CAAY,EAC5D7K,GAAA,MAAAA,GACJ,CAAC,EACA,MAAOlB,GAAU,CACd,QAAQ,MAAMA,CAAK,EACnBmB,GAAA,MAAAA,EAAUnB,EACd,CAAC,EACA,QAAQ,IAAMoL,EAAW,EAAK,CAAC,EACxC,EACA,CAACxO,EAAMR,EAAQC,EAAMS,EAASC,EAAwB5D,EAAOgT,EAAiBC,CAAoB,CAAA,EAGtG,OACIzK,EAAAA,IAACU,EAAA,CACI,GAAGyJ,EACJ,KAAAlP,EACA,QAASyP,EACT,aAAcV,EACd,aAAcC,EACd,YAAaC,EAEZ,gBAAO5R,GAAa,WAAaA,EAAS,CAAE,QAAAkR,CAAA,CAAS,EAAIlR,CAAA,CAAA,CAGtE,EC9MMwS,GAAc,CAAC,CAAE,SAAAxS,EAAU,KAAAoC,EAAM,OAAAqQ,EAAQ,OAAAC,EAAQ,GAAAC,EAAI,OAAAC,EAAQ,SAAAtI,KAAiC,CAChGsI,EAASA,GAAU,GACnBD,EAAKA,GAAM,MACXrI,EAAWA,GAAY,KAEvB,KAAM,CAACC,EAAQC,CAAS,EAAIzG,EAAAA,SAAS,EAAK,EACpC8O,EAAapP,EAAAA,OAAO,EAAK,EACzBqP,EAAWrP,EAAAA,OAAO,EAAK,EACvBoH,EAAMpH,EAAAA,OAAoB,IAAI,EAE9BY,EAAQ+F,GAAA,EAER2I,EAAkBpF,EAAAA,YAAY,IAAqB,CACrD,GAAIvL,EACA,MAAO,CACH,KAAM,MAAM,QAAQA,CAAI,EAAIA,EAAO,CAACA,CAAI,CAAA,EAIhD,GAAI,CAACqQ,EACD,MAAM,IAAI,MAAM,oDAAoD,EAGxE,OAAOA,CACX,EAAG,CAACA,EAAQrQ,CAAI,CAAC,EAuDjB,OArDA+G,EAAAA,UAAU,IAAM,CACZ,GAAI,CAAC0B,EAAI,QACL,OAGJ,MAAMmI,EAAW,IAAI,qBAChBC,GAAY,CAST,GARI,CAACA,EAAQ,CAAC,EAAE,iBAIZ,CAACL,GAAUC,EAAW,SACtBG,EAAS,WAAA,EAGTF,EAAS,SACT,OAGJD,EAAW,QAAU,GACrBC,EAAS,QAAU,GAEnB,MAAMI,EAAeH,EAAA,EAErB1O,GAAA,MAAAA,EAAO,OAAO,CACV,GAAG6O,EACH,QAAS,IAAM,OACXJ,EAAS,QAAU,IACnB3P,EAAA+P,EAAa,UAAb,MAAA/P,EAAA,KAAA+P,EACJ,EACA,SAAU,IAAM,OACZ1I,EAAU,EAAI,EACdsI,EAAS,QAAU,IACnB3P,EAAA+P,EAAa,WAAb,MAAA/P,EAAA,KAAA+P,GAEKN,GACDI,EAAS,WAAA,CAEjB,CAAA,EAER,EACA,CACI,WAAY,GAAGN,GAAU,CAAC,IAAA,CAC9B,EAGJ,OAAAM,EAAS,QAAQnI,EAAI,OAAO,EAErB,IAAM,CACTmI,EAAS,WAAA,CACb,CACJ,EAAG,CAACnI,EAAKkI,EAAiBL,CAAM,CAAC,EAE7BE,GAAU,CAACrI,EACJhC,EAAAA,cACHoK,EACA,CACI,MAAO,KACP,IAAA9H,CAAA,EAEJN,EAASvK,EAAWsK,CAAA,EAIrBC,EAASvK,EAAW,IAC/B,EAEAwS,GAAY,YAAc,qBCpE1B,MAAMW,GACFC,GACEC,IACFA,EAAO,QAAQ,OAAUC,GAAS/K,EAAAA,cAAc6K,EAAQ,CAAE,SAAUE,EAAM,EACnED","x_google_ignoreList":[1,2,3,11]}