{"version":3,"file":"inertiaui-modal.umd.cjs","sources":["../src/config.ts","../src/helpers.ts","../src/ModalRenderer.vue","../src/ModalRoot.vue","../src/modalStack.ts","../src/useModal.ts","../src/Deferred.vue","../src/HeadlessModal.vue","../src/CloseButton.vue","../src/constants.ts","../src/ModalContent.vue","../src/SlideoverContent.vue","../src/Modal.vue","../src/ModalLink.vue","../src/WhenVisible.vue","../src/inertiauiModal.ts"],"sourcesContent":["export interface ModalTypeConfig {\n    closeButton: boolean\n    closeExplicitly: boolean\n    closeOnClickOutside: boolean\n    maxWidth: string\n    paddingClasses: string\n    panelClasses: string\n    position: string\n}\n\nexport interface ModalConfig {\n    type: 'modal' | 'slideover'\n    navigate: boolean\n    useNativeDialog: boolean\n    appElement: string | null\n    modal: ModalTypeConfig\n    slideover: ModalTypeConfig\n}\n\nconst defaultConfig: ModalConfig = {\n    type: 'modal',\n    navigate: false,\n    useNativeDialog: true,\n    appElement: '#app',\n    modal: {\n        closeButton: true,\n        closeExplicitly: false,\n        closeOnClickOutside: true,\n        maxWidth: '2xl',\n        paddingClasses: 'p-4 sm:p-6',\n        panelClasses: 'bg-white rounded',\n        position: 'center',\n    },\n    slideover: {\n        closeButton: true,\n        closeExplicitly: false,\n        closeOnClickOutside: true,\n        maxWidth: 'md',\n        paddingClasses: 'p-4 sm:p-6',\n        panelClasses: 'bg-white min-h-screen',\n        position: 'right',\n    },\n}\n\nclass Config {\n    private config: ModalConfig\n\n    constructor() {\n        this.config = {} as ModalConfig\n        this.reset()\n    }\n\n    reset(): void {\n        this.config = JSON.parse(JSON.stringify(defaultConfig))\n    }\n\n    put(key: string | Partial<ModalConfig>, value?: unknown): void {\n        if (typeof key === 'object') {\n            this.config = {\n                type: key.type ?? defaultConfig.type,\n                navigate: key.navigate ?? defaultConfig.navigate,\n                useNativeDialog: key.useNativeDialog ?? defaultConfig.useNativeDialog,\n                appElement: key.appElement !== undefined ? key.appElement : defaultConfig.appElement,\n                modal: { ...defaultConfig.modal, ...(key.modal ?? {}) },\n                slideover: { ...defaultConfig.slideover, ...(key.slideover ?? {}) },\n            }\n            return\n        }\n        const keys = key.split('.')\n        let current: Record<string, unknown> = this.config as unknown as Record<string, unknown>\n        for (let i = 0; i < keys.length - 1; i++) {\n            current = (current[keys[i]] = current[keys[i]] || {}) as Record<string, unknown>\n        }\n        current[keys[keys.length - 1]] = value\n    }\n\n    get(key?: string): unknown {\n        if (typeof key === 'undefined') {\n            return this.config\n        }\n        const keys = key.split('.')\n        let current: unknown = this.config\n        for (const k of keys) {\n            if (current === null || current === undefined || typeof current !== 'object') {\n                return null\n            }\n            current = (current as Record<string, unknown>)[k]\n        }\n        return current === undefined ? null : current\n    }\n}\n\nconst configInstance = new Config()\n\nexport const resetConfig = (): void => configInstance.reset()\nexport const putConfig = (key: string | Partial<ModalConfig>, value?: unknown): void => configInstance.put(key, value)\nexport const getConfig = (key?: string): unknown => configInstance.get(key)\nexport const getConfigByType = (isSlideover: boolean, key: string): unknown =>\n    configInstance.get(isSlideover ? `slideover.${key}` : `modal.${key}`)\n","// Re-export from vanilla package\nimport { generateId as vanillaGenerateId } from '@inertiaui/vanilla'\nexport { except, only, rejectNullValues, kebabCase, isStandardDomEvent, sameUrlPath } from '@inertiaui/vanilla'\n\n// Modal-specific helpers\n\nlet generateIdUsingCallback: (() => string) | null = null\n\nfunction generateIdUsing(callback: () => string): void {\n    generateIdUsingCallback = callback\n}\n\nfunction generateId(prefix: string = 'inertiaui_modal_'): string {\n    if (generateIdUsingCallback) {\n        return generateIdUsingCallback()\n    }\n    return vanillaGenerateId(prefix)\n}\n\nexport { generateIdUsing, generateId }\n","<script setup>\nimport { only } from './helpers'\nimport { useModalStack } from './modalStack'\nimport { computed, provide } from 'vue'\n\nconst props = defineProps({\n    index: {\n        type: Number,\n        required: true,\n    },\n})\n\nconst modalStack = useModalStack()\n\nconst modalContext = computed(() => {\n    return modalStack.stack.value[props.index]\n})\n\nprovide('modalContext', modalContext)\n</script>\n\n<template>\n    <modalContext.component\n        v-if=\"modalContext?.component\"\n        v-bind=\"only(modalContext.props ?? {}, modalContext.getComponentPropKeys(), true)\"\n        @modal-event=\"(event, ...args) => modalContext.emit(event, ...args)\"\n    />\n</template>\n","<script setup>\nimport { onMounted, onUnmounted, watch } from 'vue'\nimport { router, usePage } from '@inertiajs/vue3'\nimport { useModalStack } from './modalStack'\nimport ModalRenderer from './ModalRenderer.vue'\nimport { default as Axios } from 'axios'\nimport { sameUrlPath } from './helpers'\n\nconst modalStack = useModalStack()\nconst $page = usePage()\n\nlet isNavigating = false\nlet initialModalStillOpened = false\nconst pendingModalKeys = new Set()\n\n// Generate a unique key for deduplication (handles case when modal has no id)\nconst getModalKey = (modalData) => modalData.id || `${modalData.component}:${modalData.url}`\n\nonUnmounted(router.on('start', () => (isNavigating = true)))\nonUnmounted(router.on('finish', () => (isNavigating = false)))\nonUnmounted(\n    router.on('navigate', ($event) => {\n        const modalOnBase = $event.detail.page.props._inertiaui_modal\n        const pageUrl = $event.detail.page.url\n\n        // If we're closing to this specific URL, don't re-open the modal\n        // This handles the race condition where router.push in afterLeave\n        // fires a navigate event before the props callback clears _inertiaui_modal\n        // Only suppresses when navigating to our closing target URL (not browser back to modal)\n        if (modalStack.isClosingToBaseUrl(pageUrl)) {\n            modalStack.clearClosingToBaseUrl()\n            modalStack.closeAll(true)\n            modalStack.setBaseUrl(null)\n            initialModalStillOpened = false\n            return\n        }\n\n        if (!modalOnBase) {\n            // No modal data - close any open modals (force close without transition)\n            modalStack.closeAll(true)\n            modalStack.setBaseUrl(null)\n            initialModalStillOpened = false\n            return\n        }\n\n        // If the page URL doesn't match the modal URL, close all modals\n        // (handles browser back to non-modal URL when history state still has modal data)\n        if (!sameUrlPath(pageUrl, modalOnBase.url)) {\n            modalStack.closeAll(true)\n            modalStack.setBaseUrl(null)\n            initialModalStillOpened = false\n            return\n        }\n\n        // Skip if this modal is already being pushed (handles duplicate navigate events)\n        const modalKey = getModalKey(modalOnBase)\n        if (pendingModalKeys.has(modalKey)) {\n            return\n        }\n\n        // Also skip if a modal with this id is already in the stack\n        if (modalOnBase.id && modalStack.stack.value.some((m) => m.id === modalOnBase.id)) {\n            return\n        }\n\n        // Skip if a modal with the same component and URL is already open\n        // (handles \"Edit again!\" case where same modal is revisited with new props)\n        if (modalStack.stack.value.some((m) => m.response?.component === modalOnBase.component && sameUrlPath(m.response?.url, modalOnBase.url))) {\n            return\n        }\n\n        // Only set baseUrl when we're actually opening a new modal\n        // (after deduplication checks pass)\n        modalStack.setBaseUrl(modalOnBase.baseUrl)\n        pendingModalKeys.add(modalKey)\n\n        modalStack\n            .pushFromResponseData(modalOnBase, {}, () => {\n                if (!modalOnBase.baseUrl) {\n                    console.error('No base url in modal response data so cannot navigate back')\n                    return\n                }\n\n                if (!isNavigating && typeof window !== 'undefined' && window.location.href !== modalOnBase.baseUrl) {\n                    router.visit(modalOnBase.baseUrl, {\n                        preserveScroll: true,\n                        preserveState: true,\n                    })\n                }\n            })\n            .finally(() => {\n                pendingModalKeys.delete(modalKey)\n            })\n    }),\n)\n\nconst axiosRequestInterceptor = (config) => {\n    // A Modal is opened on top of a base route, so we need to pass this base route\n    // so it can redirect back with the back() helper method...\n    // Only send the header when we have an actual base URL value\n    // Check modalStack first, then fall back to page props if a modal is still open from initial load\n    const baseUrlValue = modalStack.getBaseUrl() ?? $page.props?._inertiaui_modal?.baseUrl ?? null\n    if (baseUrlValue) {\n        config.headers['X-InertiaUI-Modal-Base-Url'] = baseUrlValue\n    }\n\n    return config\n}\n\nlet axiosInterceptorId = null\nonMounted(() => (axiosInterceptorId = Axios.interceptors.request.use(axiosRequestInterceptor)))\nonUnmounted(() => axiosInterceptorId !== null && Axios.interceptors.request.eject(axiosInterceptorId))\n\nwatch(\n    () => $page.props?._inertiaui_modal,\n    (newModal, previousModal) => {\n        if (!newModal) {\n            return\n        }\n\n        // If there's a previous modal with same component/URL, update its props\n        if (previousModal && newModal.component === previousModal.component && sameUrlPath(newModal.url, previousModal.url)) {\n            modalStack.stack.value[0]?.updateProps(newModal.props ?? {})\n            return\n        }\n\n        // If there's no previous modal but we have modals in the stack (opened via XHR),\n        // check if the new modal matches any open modal and update its props\n        if (!previousModal && modalStack.stack.value.length > 0) {\n            const existingModal = modalStack.stack.value.find(\n                (m) => m.response?.component === newModal.component && sameUrlPath(m.response?.url, newModal.url),\n            )\n            if (existingModal) {\n                existingModal.updateProps(newModal.props ?? {})\n            }\n        }\n    },\n)\n</script>\n\n<template>\n    <slot />\n\n    <ModalRenderer\n        v-if=\"modalStack.stack.value.length\"\n        :index=\"0\"\n    />\n</template>\n","import { computed, readonly, ref, markRaw, h, nextTick, type Component, type Ref, type ComputedRef } from 'vue'\nimport { generateId, except, kebabCase } from './helpers'\nimport { router, usePage, progress } from '@inertiajs/vue3'\nimport { mergeDataIntoQueryString, type RequestPayload } from '@inertiajs/core'\nimport { default as Axios, type AxiosResponse } from 'axios'\nimport ModalRoot from './ModalRoot.vue'\n\n// Type definitions\nexport interface ModalResponseData {\n    id?: string\n    component: string\n    props: Record<string, unknown>\n    url?: string\n    version?: string\n    meta?: {\n        deferredProps?: Record<string, string[]>\n    }\n    baseUrl?: string\n}\n\nexport interface ModalConfig {\n    [key: string]: unknown\n}\n\nexport interface ReloadOptions {\n    only?: string[]\n    except?: string[]\n    method?: string\n    data?: Record<string, unknown>\n    headers?: Record<string, string>\n    onStart?: () => void\n    onSuccess?: (response: AxiosResponse) => void\n    onError?: (error: unknown) => void\n    onFinish?: () => void\n}\n\nexport interface VisitOptions {\n    method?: string\n    data?: RequestPayload\n    headers?: Record<string, string>\n    config?: ModalConfig\n    onClose?: () => void\n    onAfterLeave?: () => void\n    queryStringArrayFormat?: 'brackets' | 'indices'\n    navigate?: boolean\n    onStart?: () => void\n    onSuccess?: (response?: AxiosResponse) => void\n    onError?: (...args: unknown[]) => void\n    listeners?: Record<string, (...args: unknown[]) => void>\n    // Props to pass to local modals (#152)\n    props?: Record<string, unknown>\n}\n\n// Prefetch types (#146)\nexport type PrefetchOption = boolean | 'hover' | 'click' | 'mount' | Array<'hover' | 'click' | 'mount'>\n\nexport interface PrefetchOptions {\n    method?: string\n    data?: RequestPayload\n    headers?: Record<string, string>\n    queryStringArrayFormat?: 'brackets' | 'indices'\n    cacheFor?: number\n    onPrefetching?: () => void\n    onPrefetched?: () => void\n}\n\ntype EventCallback = (...args: unknown[]) => void\ntype ComponentResolver = (name: string) => Promise<Component>\n\nlet resolveComponent: ComponentResolver | null = null\n\nconst baseUrl = ref<string | null>(null)\nconst stack = ref<Modal[]>([])\nconst localModals = ref<Record<string, { name: string; callback: (modal: Modal) => void }>>({})\n\n// Track the URL we're closing to (prevents navigate handler from re-setting baseUrl)\n// Only suppresses if navigate event URL matches this URL\nlet closingToBaseUrlTarget: string | null = null\n\n// Prefetch cache (#146)\ninterface PrefetchCacheEntry {\n    response: AxiosResponse\n    timestamp: number\n    expiresAt: number\n}\n\nconst prefetchCache = new Map<string, PrefetchCacheEntry>()\nconst prefetchInFlight = new Map<string, Promise<AxiosResponse>>()\n\nfunction getPrefetchCacheKey(url: string, method: string, data: RequestPayload): string {\n    return `${method}:${url}:${JSON.stringify(data)}`\n}\n\nfunction getCachedResponse(url: string, method: string, data: RequestPayload): AxiosResponse | null {\n    const key = getPrefetchCacheKey(url, method, data)\n    const cached = prefetchCache.get(key)\n\n    if (!cached) {\n        return null\n    }\n\n    if (Date.now() > cached.expiresAt) {\n        prefetchCache.delete(key)\n        return null\n    }\n\n    return cached.response\n}\n\nfunction setCachedResponse(url: string, method: string, data: RequestPayload, response: AxiosResponse, cacheFor: number): void {\n    const key = getPrefetchCacheKey(url, method, data)\n    prefetchCache.set(key, {\n        response,\n        timestamp: Date.now(),\n        expiresAt: Date.now() + cacheFor,\n    })\n}\n\nexport function prefetch(href: string, options: PrefetchOptions = {}): Promise<void> {\n    if (href.startsWith('#')) {\n        return Promise.resolve()\n    }\n\n    const method = (options.method ?? 'get').toLowerCase()\n    const data = options.data ?? ({} as RequestPayload)\n    const headers = options.headers ?? {}\n    const queryStringArrayFormat = options.queryStringArrayFormat ?? 'brackets'\n    const cacheFor = options.cacheFor ?? 30000\n\n    const [url, mergedData] = mergeDataIntoQueryString(method as 'get' | 'post' | 'put' | 'patch' | 'delete', href || '', data, queryStringArrayFormat)\n\n    // Check if already cached\n    const cached = getCachedResponse(url, method, mergedData)\n    if (cached) {\n        return Promise.resolve()\n    }\n\n    // Check if already in flight\n    const cacheKey = getPrefetchCacheKey(url, method, mergedData)\n    const inFlight = prefetchInFlight.get(cacheKey)\n    if (inFlight) {\n        return inFlight.then(() => {})\n    }\n\n    options.onPrefetching?.()\n\n    const requestHeaders: Record<string, string> = {\n        ...headers,\n        Accept: 'text/html, application/xhtml+xml',\n        'X-Requested-With': 'XMLHttpRequest',\n        'X-Inertia': 'true',\n        'X-Inertia-Version': usePage().version ?? '',\n        'X-InertiaUI-Modal': generateId(),\n        'X-InertiaUI-Modal-Base-Url': baseUrl.value ?? '',\n    }\n\n    const request = Axios({ url, method, data: mergedData, headers: requestHeaders })\n        .then((response) => {\n            setCachedResponse(url, method, mergedData, response, cacheFor)\n            options.onPrefetched?.()\n            return response\n        })\n        .finally(() => {\n            prefetchInFlight.delete(cacheKey)\n        })\n\n    prefetchInFlight.set(cacheKey, request)\n\n    return request.then(() => {})\n}\n\nconst setComponentResolver = (resolver: ComponentResolver): void => {\n    resolveComponent = resolver\n}\n\nexport const initFromPageProps = (pageProps: { resolveComponent?: ComponentResolver }): void => {\n    if (pageProps.resolveComponent) {\n        resolveComponent = pageProps.resolveComponent\n    }\n}\n\nexport class Modal {\n    id: string\n    isOpen: boolean\n    shouldRender: boolean\n    listeners: Record<string, EventCallback[]>\n    component: Component | null\n    props: Ref<Record<string, unknown>>\n    response: ModalResponseData\n    config: ModalConfig\n    onCloseCallback: (() => void) | null\n    afterLeaveCallback: (() => void) | null\n    index: ComputedRef<number>\n    onTopOfStack: ComputedRef<boolean>\n    name?: string\n\n    constructor(\n        component: Component | null,\n        response: ModalResponseData,\n        config?: ModalConfig | null,\n        onClose?: (() => void) | null,\n        afterLeave?: (() => void) | null,\n    ) {\n        this.id = response.id ?? generateId()\n        this.isOpen = false\n        this.shouldRender = false\n        this.listeners = {}\n\n        this.component = component\n        this.props = ref(response.props ?? {})\n        this.response = response\n        this.config = config ?? {}\n        this.onCloseCallback = onClose ?? null\n        this.afterLeaveCallback = afterLeave ?? null\n\n        this.index = computed(() => stack.value.findIndex((m) => m.id === this.id))\n        this.onTopOfStack = computed(() => {\n            if (stack.value.length < 2) {\n                return true\n            }\n\n            const modals = stack.value.map((modal) => ({ id: modal.id, shouldRender: modal.shouldRender }))\n\n            return modals.reverse().find((modal) => modal.shouldRender)?.id === this.id\n        })\n    }\n\n    getComponentPropKeys = (): string[] => {\n        if (!this.component) {\n            return []\n        }\n\n        const componentProps = (this.component as Component & { props?: string[] | Record<string, unknown> }).props\n\n        if (Array.isArray(componentProps)) {\n            return componentProps\n        }\n\n        return componentProps ? Object.keys(componentProps) : []\n    }\n\n    getParentModal = (): Modal | null | undefined => {\n        const index = this.index.value\n\n        if (index < 1) {\n            // This is the first modal in the stack\n            return null\n        }\n\n        // Find the first open modal before this one\n        return stack.value\n            .slice(0, index)\n            .reverse()\n            .find((modal) => modal.isOpen) as unknown as Modal | undefined\n    }\n\n    getChildModal = (): Modal | null => {\n        const index = this.index.value\n\n        if (index === stack.value.length - 1) {\n            // This is the last modal in the stack\n            return null\n        }\n\n        // Find the first open modal after this one\n        return (stack.value.slice(index + 1).find((modal) => modal.isOpen) as unknown as Modal | undefined) ?? null\n    }\n\n    show = (): void => {\n        const index = this.index.value\n\n        if (index > -1) {\n            if (stack.value[index].isOpen) {\n                // Only open if the modal is closed\n                return\n            }\n\n            stack.value[index].isOpen = true\n            stack.value[index].shouldRender = true\n        }\n    }\n\n    close = (): void => {\n        const index = this.index.value\n\n        if (index > -1) {\n            if (!stack.value[index].isOpen) {\n                // Only close if the modal is open\n                return\n            }\n\n            Object.keys(this.listeners).forEach((event) => {\n                this.off(event)\n            })\n\n            stack.value[index].isOpen = false\n            this.onCloseCallback?.()\n            this.onCloseCallback = null\n        }\n    }\n\n    setOpen = (open: boolean): void => {\n        if (open) {\n            this.show()\n        } else {\n            this.close()\n        }\n    }\n\n    afterLeave = (): void => {\n        const index = this.index.value\n\n        if (index > -1) {\n            if (stack.value[index].isOpen) {\n                // Only execute the callback if the modal is closed\n                return\n            }\n\n            stack.value[index].shouldRender = false\n            this.afterLeaveCallback?.()\n            this.afterLeaveCallback = null\n        }\n\n        if (index === 0) {\n            stack.value = []\n\n            // Update browser URL back to base when all modals are closed\n            // Clear baseUrl BEFORE router.push to prevent the navigate event\n            // from setting it back (race condition with props callback)\n            const savedBaseUrl = baseUrl.value\n            baseUrl.value = null\n\n            // Set target URL to prevent navigate handler from re-setting baseUrl\n            // Only suppresses navigate events to this specific URL\n            closingToBaseUrlTarget = savedBaseUrl\n\n            if (savedBaseUrl && typeof window !== 'undefined') {\n                router.push({\n                    url: savedBaseUrl,\n                    preserveScroll: true,\n                    preserveState: true,\n                    // Clear _inertiaui_modal prop to prevent modal from reopening\n                    // Must explicitly set to undefined since props are merged\n                    props: (currentProps: Record<string, unknown>) => {\n                        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                        const { _inertiaui_modal, ...rest } = currentProps\n                        return { ...rest, _inertiaui_modal: undefined }\n                    },\n                })\n            }\n        }\n    }\n\n    on = (event: string, callback: EventCallback): void => {\n        event = kebabCase(event)\n        this.listeners[event] = this.listeners[event] ?? []\n        this.listeners[event].push(callback)\n    }\n\n    off = (event: string, callback?: EventCallback): void => {\n        event = kebabCase(event)\n        if (callback) {\n            this.listeners[event] = this.listeners[event]?.filter((cb) => cb !== callback) ?? []\n        } else {\n            delete this.listeners[event]\n        }\n    }\n\n    emit = (event: string, ...args: unknown[]): void => {\n        this.listeners[kebabCase(event)]?.forEach((callback) => callback(...args))\n    }\n\n    registerEventListenersFromAttrs = ($attrs: Record<string, unknown>): (() => void) => {\n        const unsubscribers: (() => void)[] = []\n\n        Object.keys($attrs)\n            .filter((key) => key.startsWith('on'))\n            .forEach((key) => {\n                const eventName = kebabCase(key).replace(/^on-/, '')\n                const callback = $attrs[key] as EventCallback\n                this.on(eventName, callback)\n                unsubscribers.push(() => this.off(eventName, callback))\n            })\n\n        return () => unsubscribers.forEach((unsub) => unsub())\n    }\n\n    reload = (options: ReloadOptions = {}): void => {\n        let keys = Object.keys(this.response.props)\n\n        if (options.only) {\n            keys = options.only\n        }\n\n        if (options.except) {\n            keys = except(keys, options.except) as string[]\n        }\n\n        if (!this.response?.url) {\n            return\n        }\n\n        const method = (options.method ?? 'get').toLowerCase()\n        const data = options.data ?? {}\n\n        options.onStart?.()\n\n        Axios({\n            url: this.response.url,\n            method,\n            data: method === 'get' ? {} : data,\n            params: method === 'get' ? data : {},\n            headers: {\n                ...(options.headers ?? {}),\n                Accept: 'text/html, application/xhtml+xml',\n                'X-Inertia': 'true',\n                'X-Inertia-Partial-Component': this.response.component,\n                'X-Inertia-Version': this.response.version ?? '',\n                'X-Inertia-Partial-Data': keys.join(','),\n                'X-InertiaUI-Modal': generateId(),\n                'X-InertiaUI-Modal-Base-Url': baseUrl.value ?? '',\n            },\n        })\n            .then((response) => {\n                this.updateProps(response.data.props)\n                options.onSuccess?.(response)\n            })\n            .catch((error) => {\n                options.onError?.(error)\n            })\n            .finally(() => {\n                options.onFinish?.()\n            })\n    }\n\n    updateProps = (props: Record<string, unknown>): void => {\n        Object.assign(this.props.value, props)\n    }\n}\n\nfunction registerLocalModal(name: string, callback: (modal: Modal) => void): void {\n    localModals.value[name] = { name, callback }\n}\n\nfunction pushLocalModal(\n    name: string,\n    config?: ModalConfig | null,\n    onClose?: (() => void) | null,\n    afterLeave?: (() => void) | null,\n    props?: Record<string, unknown> | null,\n): Modal {\n    if (!localModals.value[name]) {\n        throw new Error(`The local modal \"${name}\" has not been registered.`)\n    }\n\n    const responseData = { props: props ?? {} } as ModalResponseData\n    const modal = push(null, responseData, config, onClose, afterLeave)\n    modal.name = name\n    localModals.value[name].callback(modal)\n    return modal\n}\n\nfunction isValidModalResponse(data: unknown): data is ModalResponseData {\n    return (\n        typeof data === 'object' &&\n        data !== null &&\n        'component' in data &&\n        typeof (data as ModalResponseData).component === 'string'\n    )\n}\n\nfunction updateBrowserUrl(url: string | undefined, useBrowserHistory: boolean, modalData?: ModalResponseData): void {\n    if (!url || !useBrowserHistory || typeof window === 'undefined') {\n        return\n    }\n\n    router.push({\n        url,\n        preserveScroll: true,\n        preserveState: true,\n        // Store modal data in page props for history navigation\n        // This allows forward/back to restore the modal\n        props: modalData\n            ? (currentProps: Record<string, unknown>) => ({\n                  ...currentProps,\n                  _inertiaui_modal: {\n                      ...modalData,\n                      baseUrl: baseUrl.value,\n                  },\n              })\n            : undefined,\n    })\n}\n\nfunction pushFromResponseData(\n    responseData: ModalResponseData,\n    config: ModalConfig = {},\n    onClose: (() => void) | null = null,\n    onAfterLeave: (() => void) | null = null,\n): Promise<Modal> {\n    if (!resolveComponent) {\n        return Promise.reject(new Error('Component resolver not set'))\n    }\n\n    if (!isValidModalResponse(responseData)) {\n        return Promise.reject(\n            new Error(\n                'Invalid modal response. This usually happens when the server returns a redirect (e.g., due to session expiration). ' +\n                    'Check if the user is still authenticated.',\n            ),\n        )\n    }\n\n    return resolveComponent(responseData.component).then((component) =>\n        push(markRaw(component), responseData, config, onClose, onAfterLeave),\n    )\n}\n\nfunction visit(\n    href: string,\n    method: string,\n    payload: RequestPayload = {},\n    headers: Record<string, string> = {},\n    config: ModalConfig = {},\n    onClose: (() => void) | null = null,\n    onAfterLeave: (() => void) | null = null,\n    queryStringArrayFormat: 'brackets' | 'indices' = 'brackets',\n    useBrowserHistory: boolean = false,\n    onStart: (() => void) | null = null,\n    onSuccess: ((response?: AxiosResponse) => void) | null = null,\n    onError: ((...args: unknown[]) => void) | null = null,\n    props: Record<string, unknown> | null = null,\n): Promise<Modal> {\n    const modalId = generateId()\n\n    return new Promise((resolve, reject) => {\n        if (href.startsWith('#')) {\n            resolve(pushLocalModal(href.substring(1), config, onClose, onAfterLeave, props))\n            return\n        }\n\n        const [url, data] = mergeDataIntoQueryString(method as 'get' | 'post' | 'put' | 'patch' | 'delete', href || '', payload, queryStringArrayFormat)\n\n        // Check for cached prefetch response (#146)\n        const cachedResponse = getCachedResponse(url, method, data)\n        if (cachedResponse) {\n            onSuccess?.(cachedResponse)\n            pushFromResponseData(cachedResponse.data, config, onClose, onAfterLeave)\n                .then((modal) => {\n                    updateBrowserUrl(cachedResponse.data.url, useBrowserHistory, cachedResponse.data)\n                    resolve(modal)\n                })\n                .catch(reject)\n            return\n        }\n\n        if (stack.value.length === 0) {\n            baseUrl.value = typeof window !== 'undefined' ? window.location.href : ''\n        }\n\n        const requestHeaders: Record<string, string> = {\n            ...headers,\n            Accept: 'text/html, application/xhtml+xml',\n            'X-Requested-With': 'XMLHttpRequest',\n            'X-Inertia': 'true',\n            'X-Inertia-Version': usePage().version ?? '',\n            'X-InertiaUI-Modal': modalId,\n            'X-InertiaUI-Modal-Base-Url': baseUrl.value ?? '',\n        }\n\n        onStart?.()\n\n        progress?.start()\n\n        Axios({ url, method, data, headers: requestHeaders })\n            .then((response) => {\n                onSuccess?.(response)\n                pushFromResponseData(response.data, config, onClose, onAfterLeave)\n                    .then((modal) => {\n                        updateBrowserUrl(response.data.url, useBrowserHistory, response.data)\n                        resolve(modal)\n                    })\n                    .catch(reject)\n            })\n            .catch((...args: unknown[]) => {\n                onError?.(...args)\n                reject(args[0])\n            })\n            .finally(() => {\n                progress?.finish()\n            })\n    })\n}\n\nfunction loadDeferredProps(modal: Modal): void {\n    const deferred = modal.response?.meta?.deferredProps\n\n    if (!deferred) {\n        return\n    }\n\n    Object.keys(deferred).forEach((key) => {\n        modal.reload({ only: deferred[key] })\n    })\n}\n\nfunction push(\n    component: Component | null,\n    response: ModalResponseData,\n    config?: ModalConfig | null,\n    onClose?: (() => void) | null,\n    afterLeave?: (() => void) | null,\n): Modal {\n    const newModal = new Modal(component, response, config, onClose, afterLeave)\n    // @ts-expect-error Vue reactivity transforms the Modal instance\n    stack.value.push(newModal)\n    loadDeferredProps(newModal)\n\n    nextTick(() => newModal.show())\n\n    return newModal\n}\n\nexport const modalPropNames = ['closeButton', 'closeExplicitly', 'closeOnClickOutside', 'maxWidth', 'paddingClasses', 'panelClasses', 'position', 'slideover']\n\nexport const renderApp = (App: Component, props: { resolveComponent?: ComponentResolver }): (() => ReturnType<typeof h>) => {\n    if (props.resolveComponent) {\n        resolveComponent = props.resolveComponent\n    }\n\n    return () => h(ModalRoot, () => h(App, props))\n}\n\nexport interface ModalStack {\n    setComponentResolver: (resolver: ComponentResolver) => void\n    getBaseUrl: () => string | null\n    setBaseUrl: (url: string | null) => void\n    isClosingToBaseUrl: (pageUrl: string) => boolean\n    clearClosingToBaseUrl: () => void\n    stack: Readonly<Ref<readonly Modal[]>>\n    push: typeof push\n    pushFromResponseData: typeof pushFromResponseData\n    closeAll: (force?: boolean) => void\n    reset: () => void\n    visit: typeof visit\n    registerLocalModal: typeof registerLocalModal\n    removeLocalModal: (name: string) => boolean\n}\n\nexport function useModalStack(): ModalStack {\n    return {\n        setComponentResolver,\n        getBaseUrl: () => baseUrl.value,\n        setBaseUrl: (url: string | null) => (baseUrl.value = url),\n        isClosingToBaseUrl: (pageUrl: string) => {\n            if (!closingToBaseUrlTarget) return false\n            // Check if the page URL matches our closing target (ignoring query strings)\n            const targetPath = new URL(closingToBaseUrlTarget, 'http://x').pathname\n            const pagePath = new URL(pageUrl, 'http://x').pathname\n            return targetPath === pagePath\n        },\n        clearClosingToBaseUrl: () => (closingToBaseUrlTarget = null),\n        stack: readonly(stack) as unknown as Readonly<Ref<readonly Modal[]>>,\n        push,\n        pushFromResponseData,\n        closeAll: (force = false) => {\n            if (force) {\n                // Force close: immediately remove all modals without transition\n                stack.value = []\n            } else {\n                // Normal close: trigger leave transition for each modal\n                ;[...stack.value].reverse().forEach((modal) => modal.close())\n            }\n        },\n        reset: () => (stack.value = []),\n        visit,\n        registerLocalModal,\n        removeLocalModal: (name: string) => delete localModals.value[name],\n    }\n}\n","import { inject, toValue } from 'vue'\nimport type { Modal } from './modalStack'\n\nexport default function useModal(): Modal | null {\n    return toValue(inject<Modal | null>('modalContext', null))\n}\n","<script setup>\n// See: https://github.com/inertiajs/inertia/blob/48bcd21fb7daf467d0df1bfde2408f161f94a579/packages/vue3/src/deferred.ts\nimport { computed, inject } from 'vue'\n\nconst props = defineProps({\n    data: {\n        type: [String, Array],\n        required: true,\n    },\n})\n\nconst modalContext = inject('modalContext')\n\nif (!modalContext) {\n    throw new Error('Deferred component must be used inside a Modal component')\n}\n\nconst allKeysAreAvailable = computed(() => {\n    const keys = Array.isArray(props.data) ? props.data : [props.data]\n\n    return keys.every((key) => modalContext.value.props[key] !== undefined)\n})\n</script>\n\n<template>\n    <slot v-if=\"allKeysAreAvailable\" />\n\n    <slot\n        v-else\n        name=\"fallback\"\n    />\n</template>\n","<script setup>\nimport { getConfig, getConfigByType } from './config'\nimport { inject, onBeforeUnmount, ref, computed, useAttrs, onMounted, watch, unref } from 'vue'\nimport { useModalStack } from './modalStack'\nimport ModalRenderer from './ModalRenderer.vue'\n\nconst props = defineProps({\n    name: {\n        type: String,\n        required: false,\n    },\n    // The slideover prop is on top because we need to know if it's a slideover\n    // before we can determine the default value of other props\n    slideover: {\n        type: Boolean,\n        default: null,\n    },\n    closeButton: {\n        type: Boolean,\n        default: null,\n    },\n    closeExplicitly: {\n        type: Boolean,\n        default: null,\n    },\n    closeOnClickOutside: {\n        type: Boolean,\n        default: null,\n    },\n    maxWidth: {\n        type: String,\n        default: null,\n    },\n    paddingClasses: {\n        type: [Boolean, String],\n        default: null,\n    },\n    panelClasses: {\n        type: [Boolean, String],\n        default: null,\n    },\n    position: {\n        type: String,\n        default: null,\n    },\n})\n\nconst modalStack = useModalStack()\nconst modalContext = props.name ? ref({}) : inject('modalContext')\nconst config = computed(() => {\n    const isSlideover = modalContext.value.config?.slideover ?? props.slideover ?? getConfig('type') === 'slideover'\n\n    return {\n        slideover: isSlideover,\n        closeButton: props.closeButton ?? getConfigByType(isSlideover, 'closeButton'),\n        closeExplicitly: props.closeExplicitly ?? getConfigByType(isSlideover, 'closeExplicitly'),\n        closeOnClickOutside: props.closeOnClickOutside ?? getConfigByType(isSlideover, 'closeOnClickOutside'),\n        maxWidth: props.maxWidth ?? getConfigByType(isSlideover, 'maxWidth'),\n        paddingClasses: props.paddingClasses ?? getConfigByType(isSlideover, 'paddingClasses'),\n        panelClasses: props.panelClasses ?? getConfigByType(isSlideover, 'panelClasses'),\n        position: props.position ?? getConfigByType(isSlideover, 'position'),\n        ...modalContext.value.config,\n    }\n})\n\n// Local Modals...\nif (props.name) {\n    modalStack.registerLocalModal(props.name, function (context) {\n        modalContext.value = context\n        registerEventListeners()\n    })\n\n    onBeforeUnmount(() => {\n        modalStack.removeLocalModal(props.name)\n    })\n}\n\nonMounted(() => {\n    if (!props.name) {\n        registerEventListeners()\n    }\n})\n\nconst unsubscribeEventListeners = ref(null)\nonBeforeUnmount(() => unsubscribeEventListeners.value?.())\n\nconst $attrs = useAttrs()\n\nfunction registerEventListeners() {\n    unsubscribeEventListeners.value = modalContext.value.registerEventListenersFromAttrs($attrs)\n}\n\nconst emits = defineEmits(['modal-event', 'focus', 'blur', 'close', 'success'])\n\nfunction emit(event, ...args) {\n    emits('modal-event', event, ...args)\n}\n\ndefineExpose({\n    emit,\n    afterLeave: () => modalContext.value?.afterLeave(),\n    close: () => modalContext.value?.close(),\n    reload: (...args) => modalContext.value?.reload(...args),\n    setOpen: (...args) => modalContext.value?.setOpen(...args),\n    getChildModal: () => modalContext.value?.getChildModal(),\n    getParentModal: () => modalContext.value?.getParentModal(),\n\n    get config() {\n        return modalContext.value?.config\n    },\n    get id() {\n        return modalContext.value?.id\n    },\n    get index() {\n        return modalContext.value?.index\n    },\n    get isOpen() {\n        return modalContext.value?.isOpen\n    },\n    get modalContext() {\n        return modalContext.value?.modalContext\n    },\n    get onTopOfStack() {\n        return modalContext.value?.onTopOfStack\n    },\n    get shouldRender() {\n        return modalContext.value?.shouldRender\n    },\n})\n\nwatch(\n    () => modalContext.value?.onTopOfStack,\n    (onTopOfStack, previousOnTopOfStack) => {\n        if (onTopOfStack && !previousOnTopOfStack) {\n            emits('focus')\n        } else if (!onTopOfStack && previousOnTopOfStack) {\n            emits('blur')\n        }\n    },\n)\n\nwatch(\n    () => modalContext.value?.isOpen,\n    (isOpen, previousIsOpen) => {\n        if (isOpen) {\n            emits('success')\n        } else if (previousIsOpen === true) {\n            // Only emit 'close' when transitioning from open to closed,\n            // not when the component first mounts with isOpen undefined\n            emits('close')\n        }\n    },\n    { immediate: true },\n)\n\nconst nextIndex = computed(() => {\n    return modalStack.stack.value.find((m) => m.shouldRender && m.index > modalContext.value.index)?.index\n})\n\n// Computed to unwrap the modal's props ref for slot binding (#152)\nconst modalProps = computed(() => {\n    const ctx = modalContext.value\n    if (!ctx) return {}\n    // The Modal class stores props as a ref, so we need to unref it\n    return unref(ctx.props) ?? {}\n})\n\ndefineOptions({\n    inheritAttrs: false,\n})\n</script>\n\n<template>\n    <slot\n        v-if=\"modalContext.shouldRender\"\n        v-bind=\"modalProps\"\n        :id=\"modalContext.id\"\n        :after-leave=\"modalContext.afterLeave\"\n        :close=\"modalContext.close\"\n        :config=\"config\"\n        :emit=\"emit\"\n        :get-child-modal=\"modalContext.getChildModal\"\n        :get-parent-modal=\"modalContext.getParentModal\"\n        :index=\"modalContext.index\"\n        :is-open=\"modalContext.isOpen\"\n        :modal-context=\"modalContext\"\n        :on-top-of-stack=\"modalContext.onTopOfStack\"\n        :reload=\"modalContext.reload\"\n        :set-open=\"modalContext.setOpen\"\n        :should-render=\"modalContext.shouldRender\"\n    />\n\n    <!-- The next modal in the stack -->\n    <ModalRenderer\n        v-if=\"nextIndex\"\n        :index=\"nextIndex\"\n    />\n</template>\n","<script setup>\nimport useModal from './useModal'\n\nconst modal = useModal()\n</script>\n\n<template>\n    <button\n        type=\"button\"\n        class=\"im-close-button text-gray-400 hover:text-gray-500\"\n        @click=\"modal.close()\"\n    >\n        <span class=\"sr-only\">Close</span>\n        <svg\n            class=\"size-6\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke-width=\"2\"\n            stroke=\"currentColor\"\n            aria-hidden=\"true\"\n        >\n            <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                d=\"M6 18L18 6M6 6l12 12\"\n            ></path>\n        </svg>\n    </button>\n</template>\n","/**\n * Max width classes for modals and slideovers.\n * Uses a map lookup for Tailwind 4 compatibility (scanner picks up full class strings).\n */\nexport const maxWidthClasses: Record<string, string> = {\n    sm: 'sm:max-w-sm',\n    md: 'sm:max-w-md',\n    lg: 'sm:max-w-md md:max-w-lg',\n    xl: 'sm:max-w-md md:max-w-xl',\n    '2xl': 'sm:max-w-md md:max-w-xl lg:max-w-2xl',\n    '3xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl',\n    '4xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-4xl',\n    '5xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-5xl',\n    '6xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-5xl 2xl:max-w-6xl',\n    '7xl': 'sm:max-w-md md:max-w-xl lg:max-w-3xl xl:max-w-5xl 2xl:max-w-7xl',\n}\n\nexport const defaultMaxWidth = '2xl'\n\nexport function getMaxWidthClass(maxWidth: string): string {\n    return maxWidthClasses[maxWidth] || maxWidthClasses[defaultMaxWidth]\n}\n","<script setup>\nimport { ref, onMounted, onUnmounted, watch, nextTick, computed } from 'vue'\nimport CloseButton from './CloseButton.vue'\nimport { createFocusTrap, onEscapeKey, onTransitionEnd } from './dialog'\nimport { getMaxWidthClass } from './constants'\n\nconst props = defineProps({\n    modalContext: Object,\n    config: Object,\n    useNativeDialog: Boolean,\n    isFirstModal: Boolean,\n})\n\nconst emit = defineEmits(['after-leave'])\n\nconst entered = ref(false)\nconst isLeaving = ref(false)\nconst wrapperRef = ref(null)\nconst dialogRef = ref(null)\nconst nativeWrapperRef = ref(null)\n\nlet cleanupFocusTrap = null\nlet cleanupEscapeKey = null\n\nconst maxWidthClass = computed(() => getMaxWidthClass(props.config.maxWidth))\n\n// ============ Non-native dialog handlers ============\n\nfunction setupFocusTrap() {\n    if (props.useNativeDialog) return\n    if (!wrapperRef.value || !props.modalContext.onTopOfStack) return\n    if (cleanupFocusTrap) return\n\n    cleanupFocusTrap = createFocusTrap(wrapperRef.value, {\n        initialFocus: true,\n        returnFocus: false,\n    })\n}\n\nfunction cleanupFocusTrap_() {\n    if (cleanupFocusTrap) {\n        cleanupFocusTrap()\n        cleanupFocusTrap = null\n    }\n}\n\nfunction setupEscapeKey() {\n    if (props.useNativeDialog) return\n    if (cleanupEscapeKey) return\n    if (props.config?.closeExplicitly) return\n\n    cleanupEscapeKey = onEscapeKey(() => {\n        if (props.modalContext.onTopOfStack) {\n            props.modalContext.close()\n        }\n    })\n}\n\nfunction cleanupEscapeKey_() {\n    if (cleanupEscapeKey) {\n        cleanupEscapeKey()\n        cleanupEscapeKey = null\n    }\n}\n\nfunction handleClickOutside(event) {\n    if (props.useNativeDialog) return\n    if (!props.modalContext.onTopOfStack) return\n    if (props.config?.closeExplicitly) return\n    if (props.config?.closeOnClickOutside === false) return\n    if (!wrapperRef.value) return\n\n    if (!wrapperRef.value.contains(event.target)) {\n        props.modalContext.close()\n    }\n}\n\nfunction onAfterEnter() {\n    entered.value = true\n    setupFocusTrap()\n}\n\nfunction onAfterLeave() {\n    emit('after-leave')\n    props.modalContext.afterLeave()\n}\n\n// ============ Native dialog handlers ============\n\nfunction handleCancel(event) {\n    event.preventDefault()\n    if (props.modalContext.onTopOfStack && !props.config?.closeExplicitly) {\n        props.modalContext.close()\n    }\n}\n\nfunction handleDialogClick(event) {\n    if (event.target === dialogRef.value) {\n        if (props.modalContext.onTopOfStack && !props.config?.closeExplicitly && props.config?.closeOnClickOutside !== false) {\n            props.modalContext.close()\n        }\n    }\n}\n\nfunction openDialog() {\n    if (dialogRef.value && !dialogRef.value.open) {\n        dialogRef.value.showModal()\n        nextTick(() => {\n            requestAnimationFrame(() => {\n                entered.value = true\n            })\n        })\n    }\n}\n\nlet cleanupTransition = null\n\nfunction closeDialog() {\n    if (dialogRef.value && dialogRef.value.open) {\n        isLeaving.value = true\n        entered.value = false\n\n        const wrapper = nativeWrapperRef.value\n        if (wrapper) {\n            cleanupTransition = onTransitionEnd(wrapper, finishClose)\n        } else {\n            finishClose()\n        }\n    }\n}\n\nfunction finishClose() {\n    if (dialogRef.value) {\n        dialogRef.value.close()\n    }\n    isLeaving.value = false\n    emit('after-leave')\n    props.modalContext.afterLeave()\n}\n\n// ============ Lifecycle ============\n\nonMounted(() => {\n    if (props.useNativeDialog) {\n        if (props.modalContext.isOpen) {\n            openDialog()\n        }\n    } else {\n        setupEscapeKey()\n    }\n})\n\nonUnmounted(() => {\n    if (props.useNativeDialog) {\n        if (dialogRef.value?.open) {\n            dialogRef.value.close()\n        }\n    } else {\n        cleanupFocusTrap_()\n        cleanupEscapeKey_()\n    }\n})\n\nwatch(\n    () => props.modalContext.onTopOfStack,\n    (onTop) => {\n        if (props.useNativeDialog) return\n\n        if (onTop) {\n            setupEscapeKey()\n            if (entered.value) {\n                setupFocusTrap()\n            }\n        } else {\n            cleanupFocusTrap_()\n            cleanupEscapeKey_()\n        }\n    },\n)\n\nwatch(\n    () => props.modalContext.isOpen,\n    (isOpen) => {\n        if (!props.useNativeDialog) return\n\n        if (isOpen) {\n            openDialog()\n        } else if (!isLeaving.value) {\n            closeDialog()\n        }\n    },\n)\n</script>\n\n<template>\n    <!-- Native dialog mode -->\n    <dialog\n        v-if=\"useNativeDialog\"\n        ref=\"dialogRef\"\n        :class=\"[\n            'im-modal-dialog m-0 overflow-visible bg-transparent p-0',\n            'size-full max-h-none max-w-none',\n            'backdrop:bg-black/75 backdrop:transition-opacity backdrop:duration-300',\n            entered ? 'backdrop:opacity-100' : 'backdrop:opacity-0',\n            !isFirstModal && 'backdrop:bg-transparent',\n        ]\"\n        @cancel=\"handleCancel\"\n        @click=\"handleDialogClick\"\n    >\n        <div class=\"im-modal-container fixed inset-0 overflow-y-auto p-4\">\n            <div\n                class=\"im-modal-positioner flex min-h-full justify-center\"\n                :class=\"{\n                    'items-start': config.position === 'top',\n                    'items-center': config.position === 'center',\n                    'items-end': config.position === 'bottom',\n                }\"\n            >\n                <div\n                    ref=\"nativeWrapperRef\"\n                    :class=\"[\n                        'im-modal-wrapper w-full transition duration-300 ease-in-out',\n                        modalContext.onTopOfStack ? '' : 'blur-xs',\n                        entered && !isLeaving ? 'translate-y-0 opacity-100 sm:scale-100' : 'translate-y-4 opacity-0 sm:translate-y-0 sm:scale-95',\n                        maxWidthClass,\n                    ]\"\n                >\n                    <div\n                        class=\"im-modal-content relative\"\n                        :data-inertiaui-modal-entered=\"entered\"\n                        :class=\"[config.paddingClasses, config.panelClasses]\"\n                    >\n                        <div\n                            v-if=\"config.closeButton\"\n                            class=\"absolute right-0 top-0 pr-3 pt-3\"\n                        >\n                            <CloseButton />\n                        </div>\n\n                        <slot\n                            :modal-context=\"modalContext\"\n                            :config=\"config\"\n                        />\n                    </div>\n                </div>\n            </div>\n        </div>\n    </dialog>\n\n    <!-- Non-native dialog mode -->\n    <div\n        v-else\n        class=\"im-modal-container fixed inset-0 z-40 overflow-y-auto p-4\"\n        @mousedown.self=\"handleClickOutside\"\n    >\n        <div\n            class=\"im-modal-positioner flex min-h-full justify-center\"\n            :class=\"{\n                'items-start': config.position === 'top',\n                'items-center': config.position === 'center',\n                'items-end': config.position === 'bottom',\n            }\"\n            @mousedown.self=\"handleClickOutside\"\n        >\n            <Transition\n                appear\n                enter-active-class=\"transition duration-300 ease-in-out\"\n                enter-from-class=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                enter-to-class=\"opacity-100 translate-y-0 sm:scale-100\"\n                leave-active-class=\"transition duration-300 ease-in-out\"\n                leave-from-class=\"opacity-100 translate-y-0 sm:scale-100\"\n                leave-to-class=\"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95\"\n                @after-enter=\"onAfterEnter\"\n                @after-leave=\"onAfterLeave\"\n            >\n                <div\n                    v-if=\"modalContext.isOpen\"\n                    ref=\"wrapperRef\"\n                    role=\"dialog\"\n                    aria-modal=\"true\"\n                    :class=\"['im-modal-wrapper w-full', modalContext.onTopOfStack ? '' : 'blur-xs', maxWidthClass]\"\n                >\n                    <span class=\"sr-only\">Dialog</span>\n\n                    <div\n                        class=\"im-modal-content relative\"\n                        :data-inertiaui-modal-entered=\"entered\"\n                        :class=\"[config.paddingClasses, config.panelClasses]\"\n                    >\n                        <div\n                            v-if=\"config.closeButton\"\n                            class=\"absolute right-0 top-0 pr-3 pt-3\"\n                        >\n                            <CloseButton />\n                        </div>\n\n                        <slot\n                            :modal-context=\"modalContext\"\n                            :config=\"config\"\n                        />\n                    </div>\n                </div>\n            </Transition>\n        </div>\n    </div>\n</template>\n","<script setup>\nimport { ref, onMounted, onUnmounted, watch, nextTick, computed } from 'vue'\nimport CloseButton from './CloseButton.vue'\nimport { createFocusTrap, onEscapeKey, onTransitionEnd } from './dialog'\nimport { getMaxWidthClass } from './constants'\n\nconst props = defineProps({\n    modalContext: Object,\n    config: Object,\n    useNativeDialog: Boolean,\n    isFirstModal: Boolean,\n})\n\nconst emit = defineEmits(['after-leave'])\n\nconst entered = ref(false)\nconst isLeaving = ref(false)\nconst wrapperRef = ref(null)\nconst dialogRef = ref(null)\nconst nativeWrapperRef = ref(null)\n\nlet cleanupFocusTrap = null\nlet cleanupEscapeKey = null\n\nconst maxWidthClass = computed(() => getMaxWidthClass(props.config.maxWidth))\n\n// Transform classes for slideover animation\nconst transformEnterFrom = computed(() => (props.config.position === 'left' ? '-translate-x-full' : 'translate-x-full'))\n\n// ============ Non-native dialog handlers ============\n\nfunction setupFocusTrap() {\n    if (props.useNativeDialog) return\n    if (!wrapperRef.value || !props.modalContext.onTopOfStack) return\n    if (cleanupFocusTrap) return\n\n    cleanupFocusTrap = createFocusTrap(wrapperRef.value, {\n        initialFocus: true,\n        returnFocus: false,\n    })\n}\n\nfunction cleanupFocusTrap_() {\n    if (cleanupFocusTrap) {\n        cleanupFocusTrap()\n        cleanupFocusTrap = null\n    }\n}\n\nfunction setupEscapeKey() {\n    if (props.useNativeDialog) return\n    if (cleanupEscapeKey) return\n    if (props.config?.closeExplicitly) return\n\n    cleanupEscapeKey = onEscapeKey(() => {\n        if (props.modalContext.onTopOfStack) {\n            props.modalContext.close()\n        }\n    })\n}\n\nfunction cleanupEscapeKey_() {\n    if (cleanupEscapeKey) {\n        cleanupEscapeKey()\n        cleanupEscapeKey = null\n    }\n}\n\nfunction handleClickOutside(event) {\n    if (props.useNativeDialog) return\n    if (!props.modalContext.onTopOfStack) return\n    if (props.config?.closeExplicitly) return\n    if (props.config?.closeOnClickOutside === false) return\n    if (!wrapperRef.value) return\n\n    if (!wrapperRef.value.contains(event.target)) {\n        props.modalContext.close()\n    }\n}\n\nfunction onAfterEnter() {\n    entered.value = true\n    setupFocusTrap()\n}\n\nfunction onAfterLeave() {\n    emit('after-leave')\n    props.modalContext.afterLeave()\n}\n\n// ============ Native dialog handlers ============\n\nfunction handleCancel(event) {\n    event.preventDefault()\n    if (props.modalContext.onTopOfStack && !props.config?.closeExplicitly) {\n        props.modalContext.close()\n    }\n}\n\nfunction handleDialogClick(event) {\n    if (event.target === dialogRef.value) {\n        if (props.modalContext.onTopOfStack && !props.config?.closeExplicitly && props.config?.closeOnClickOutside !== false) {\n            props.modalContext.close()\n        }\n    }\n}\n\nfunction openDialog() {\n    if (dialogRef.value && !dialogRef.value.open) {\n        dialogRef.value.showModal()\n        nextTick(() => {\n            requestAnimationFrame(() => {\n                entered.value = true\n            })\n        })\n    }\n}\n\nlet cleanupTransition = null\n\nfunction closeDialog() {\n    if (dialogRef.value && dialogRef.value.open) {\n        isLeaving.value = true\n        entered.value = false\n\n        const wrapper = nativeWrapperRef.value\n        if (wrapper) {\n            cleanupTransition = onTransitionEnd(wrapper, finishClose)\n        } else {\n            finishClose()\n        }\n    }\n}\n\nfunction finishClose() {\n    if (dialogRef.value) {\n        dialogRef.value.close()\n    }\n    isLeaving.value = false\n    emit('after-leave')\n    props.modalContext.afterLeave()\n}\n\n// ============ Lifecycle ============\n\nonMounted(() => {\n    if (props.useNativeDialog) {\n        if (props.modalContext.isOpen) {\n            openDialog()\n        }\n    } else {\n        setupEscapeKey()\n    }\n})\n\nonUnmounted(() => {\n    if (props.useNativeDialog) {\n        if (dialogRef.value?.open) {\n            dialogRef.value.close()\n        }\n    } else {\n        cleanupFocusTrap_()\n        cleanupEscapeKey_()\n    }\n})\n\nwatch(\n    () => props.modalContext.onTopOfStack,\n    (onTop) => {\n        if (props.useNativeDialog) return\n\n        if (onTop) {\n            setupEscapeKey()\n            if (entered.value) {\n                setupFocusTrap()\n            }\n        } else {\n            cleanupFocusTrap_()\n            cleanupEscapeKey_()\n        }\n    },\n)\n\nwatch(\n    () => props.modalContext.isOpen,\n    (isOpen) => {\n        if (!props.useNativeDialog) return\n\n        if (isOpen) {\n            openDialog()\n        } else if (!isLeaving.value) {\n            closeDialog()\n        }\n    },\n)\n</script>\n\n<template>\n    <!-- Native dialog mode -->\n    <dialog\n        v-if=\"useNativeDialog\"\n        ref=\"dialogRef\"\n        :class=\"[\n            'im-slideover-dialog m-0 overflow-visible bg-transparent p-0',\n            'size-full max-h-none max-w-none',\n            'backdrop:bg-black/75 backdrop:transition-opacity backdrop:duration-300',\n            entered ? 'backdrop:opacity-100' : 'backdrop:opacity-0',\n            !isFirstModal && 'backdrop:bg-transparent',\n        ]\"\n        @cancel=\"handleCancel\"\n        @click=\"handleDialogClick\"\n    >\n        <div class=\"im-slideover-container fixed inset-0 overflow-y-auto overflow-x-hidden\">\n            <div\n                class=\"im-slideover-positioner flex min-h-full items-center\"\n                :class=\"{\n                    'justify-start rtl:justify-end': config.position === 'left',\n                    'justify-end rtl:justify-start': config.position === 'right',\n                }\"\n            >\n                <div\n                    ref=\"nativeWrapperRef\"\n                    :class=\"[\n                        'im-slideover-wrapper w-full transition duration-300 ease-in-out',\n                        modalContext.onTopOfStack ? '' : 'blur-xs',\n                        entered && !isLeaving\n                            ? 'translate-x-0 opacity-100'\n                            : config.position === 'left'\n                              ? '-translate-x-full opacity-0'\n                              : 'translate-x-full opacity-0',\n                        maxWidthClass,\n                    ]\"\n                >\n                    <div\n                        class=\"im-slideover-content relative\"\n                        :data-inertiaui-modal-entered=\"entered\"\n                        :class=\"[config.paddingClasses, config.panelClasses]\"\n                    >\n                        <div\n                            v-if=\"config.closeButton\"\n                            class=\"absolute right-0 top-0 pr-3 pt-3\"\n                        >\n                            <CloseButton />\n                        </div>\n\n                        <slot\n                            :modal-context=\"modalContext\"\n                            :config=\"config\"\n                        />\n                    </div>\n                </div>\n            </div>\n        </div>\n    </dialog>\n\n    <!-- Non-native dialog mode -->\n    <div\n        v-else\n        class=\"im-slideover-container fixed inset-0 z-40 overflow-y-auto overflow-x-hidden\"\n        @mousedown.self=\"handleClickOutside\"\n    >\n        <div\n            class=\"im-slideover-positioner flex min-h-full items-center\"\n            :class=\"{\n                'justify-start rtl:justify-end': config.position === 'left',\n                'justify-end rtl:justify-start': config.position === 'right',\n            }\"\n            @mousedown.self=\"handleClickOutside\"\n        >\n            <Transition\n                appear\n                enter-active-class=\"transition duration-300 ease-in-out\"\n                :enter-from-class=\"'opacity-0 ' + transformEnterFrom\"\n                enter-to-class=\"opacity-100 translate-x-0\"\n                leave-active-class=\"transition duration-300 ease-in-out\"\n                leave-from-class=\"opacity-100 translate-x-0\"\n                :leave-to-class=\"'opacity-0 ' + transformEnterFrom\"\n                @after-enter=\"onAfterEnter\"\n                @after-leave=\"onAfterLeave\"\n            >\n                <div\n                    v-if=\"modalContext.isOpen\"\n                    ref=\"wrapperRef\"\n                    role=\"dialog\"\n                    aria-modal=\"true\"\n                    :class=\"['im-slideover-wrapper w-full', modalContext.onTopOfStack ? '' : 'blur-xs', maxWidthClass]\"\n                >\n                    <span class=\"sr-only\">Dialog</span>\n\n                    <div\n                        class=\"im-slideover-content relative\"\n                        :data-inertiaui-modal-entered=\"entered\"\n                        :class=\"[config.paddingClasses, config.panelClasses]\"\n                    >\n                        <div\n                            v-if=\"config.closeButton\"\n                            class=\"absolute right-0 top-0 pr-3 pt-3\"\n                        >\n                            <CloseButton />\n                        </div>\n\n                        <slot\n                            :modal-context=\"modalContext\"\n                            :config=\"config\"\n                        />\n                    </div>\n                </div>\n            </Transition>\n        </div>\n    </div>\n</template>\n","<script setup>\nimport ModalContent from './ModalContent.vue'\nimport HeadlessModal from './HeadlessModal.vue'\nimport SlideoverContent from './SlideoverContent.vue'\nimport { onMounted, onUnmounted, ref, computed } from 'vue'\nimport { lockScroll, markAriaHidden } from './dialog'\nimport { getConfig } from './config'\n\nconst modal = ref(null)\nconst rendered = ref(false)\n\nconst emits = defineEmits(['after-leave', 'blur', 'close', 'focus', 'success'])\n\ndefineExpose({\n    afterLeave: () => modal.value?.afterLeave(),\n    close: () => modal.value?.close(),\n    emit: (...args) => modal.value?.emit(...args),\n    getChildModal: () => modal.value?.getChildModal(),\n    getParentModal: () => modal.value?.getParentModal(),\n    reload: (...args) => modal.value?.reload(...args),\n    setOpen: (...args) => modal.value?.setOpen(...args),\n\n    get config() {\n        return modal.value?.config\n    },\n    get id() {\n        return modal.value?.id\n    },\n    get index() {\n        return modal.value?.index\n    },\n    get isOpen() {\n        return modal.value?.isOpen\n    },\n    get modalContext() {\n        return modal.value?.modalContext\n    },\n    get onTopOfStack() {\n        return modal.value?.onTopOfStack\n    },\n    get shouldRender() {\n        return modal.value?.shouldRender\n    },\n})\n\n// Cleanup functions for scroll lock and aria-hidden\nlet cleanupScrollLock = null\nlet cleanupAriaHidden = null\n\nonMounted(() => {\n    // Initial setup if modal is already open\n    // Only call lockScroll if not already set (onSuccessEvent may have already called it)\n    if (modal.value?.isOpen && !cleanupScrollLock) {\n        cleanupScrollLock = lockScroll()\n        cleanupAriaHidden = markAriaHidden(getConfig('appElement'))\n    }\n})\n\nonUnmounted(() => {\n    cleanupScrollLock?.()\n    cleanupAriaHidden?.()\n})\n\n// Handle open state changes\nfunction onSuccessEvent() {\n    emits('success')\n    if (!cleanupScrollLock) {\n        cleanupScrollLock = lockScroll()\n        cleanupAriaHidden = markAriaHidden(getConfig('appElement'))\n    }\n}\n\nfunction onCloseEvent() {\n    emits('close')\n    cleanupScrollLock?.()\n    cleanupAriaHidden?.()\n    cleanupScrollLock = null\n    cleanupAriaHidden = null\n}\n\nconst useNativeDialog = computed(() => getConfig('useNativeDialog'))\n</script>\n\n<template>\n    <HeadlessModal\n        ref=\"modal\"\n        v-slot=\"{\n            afterLeave,\n            close,\n            config,\n            emit,\n            getChildModal,\n            getParentModal,\n            id,\n            index,\n            isOpen,\n            modalContext,\n            onTopOfStack,\n            reload,\n            setOpen,\n            shouldRender,\n            ...props\n        }\"\n        @success=\"onSuccessEvent\"\n        @close=\"onCloseEvent\"\n        @focus=\"emits('focus')\"\n        @blur=\"emits('blur')\"\n    >\n        <Teleport to=\"body\">\n            <div\n                :data-inertiaui-modal-id=\"id\"\n                :data-inertiaui-modal-index=\"index\"\n                class=\"im-dialog relative z-20\"\n                :aria-hidden=\"!onTopOfStack\"\n            >\n                <!-- Only render backdrop for the first modal (non-native dialog mode) -->\n                <!-- Native dialog uses ::backdrop pseudo-element instead -->\n                <Transition\n                    v-if=\"index === 0 && !useNativeDialog\"\n                    :appear=\"!rendered\"\n                    enter-active-class=\"transition transform ease-in-out duration-300\"\n                    enter-from-class=\"opacity-0\"\n                    enter-to-class=\"opacity-100\"\n                    leave-active-class=\"transition transform ease-in-out duration-300\"\n                    leave-from-class=\"opacity-100\"\n                    leave-to-class=\"opacity-0\"\n                    @after-appear=\"rendered = true\"\n                >\n                    <div\n                        v-if=\"isOpen\"\n                        class=\"im-backdrop fixed inset-0 z-30 bg-black/75\"\n                    />\n                </Transition>\n\n                <!-- The modal/slideover content itself -->\n                <component\n                    :is=\"config?.slideover ? SlideoverContent : ModalContent\"\n                    :modal-context=\"modalContext\"\n                    :config=\"config\"\n                    :use-native-dialog=\"useNativeDialog\"\n                    :is-first-modal=\"index === 0\"\n                    @after-leave=\"$emit('after-leave')\"\n                >\n                    <slot\n                        v-bind=\"props\"\n                        :id=\"id\"\n                        :after-leave=\"afterLeave\"\n                        :close=\"close\"\n                        :config=\"config\"\n                        :emit=\"emit\"\n                        :get-child-modal=\"getChildModal\"\n                        :get-parent-modal=\"getParentModal\"\n                        :index=\"index\"\n                        :is-open=\"isOpen\"\n                        :modal-context=\"modalContext\"\n                        :on-top-of-stack=\"onTopOfStack\"\n                        :reload=\"reload\"\n                        :set-open=\"setOpen\"\n                        :should-render=\"shouldRender\"\n                    />\n                </component>\n            </div>\n        </Teleport>\n    </HeadlessModal>\n</template>\n","<script setup>\nimport { modalPropNames, useModalStack, prefetch as prefetchModal } from './modalStack'\nimport { ref, provide, computed, watch, useAttrs, onBeforeUnmount, onMounted } from 'vue'\nimport { only, rejectNullValues } from './helpers'\nimport { getConfig } from './config'\n\nconst props = defineProps({\n    href: {\n        type: String,\n        required: true,\n    },\n    method: {\n        type: String,\n        default: 'get',\n    },\n    data: {\n        type: Object,\n        default: () => ({}),\n    },\n    as: {\n        type: [String, Object],\n        default: 'a',\n    },\n    headers: {\n        type: Object,\n        default: () => ({}),\n    },\n    queryStringArrayFormat: {\n        type: String,\n        default: 'brackets',\n    },\n    navigate: {\n        type: Boolean,\n        default: null,\n    },\n    // Prefetch options (#146)\n    prefetch: {\n        type: [Boolean, String, Array],\n        default: false,\n    },\n    cacheFor: {\n        type: Number,\n        default: 30000,\n    },\n    // Passthrough to Modal.vue\n    closeButton: {\n        type: Boolean,\n        required: false,\n        default: null,\n    },\n    closeExplicitly: {\n        type: Boolean,\n        required: false,\n        default: null,\n    },\n    closeOnClickOutside: {\n        type: Boolean,\n        required: false,\n        default: null,\n    },\n    maxWidth: {\n        type: String,\n        required: false,\n        default: null,\n    },\n    paddingClasses: {\n        type: [Boolean, String],\n        required: false,\n        default: null,\n    },\n    panelClasses: {\n        type: [Boolean, String],\n        required: false,\n        default: null,\n    },\n    position: {\n        type: String,\n        required: false,\n        default: null,\n    },\n    slideover: {\n        type: Boolean,\n        required: false,\n        default: null,\n    },\n})\n\nconst loading = ref(false)\nconst modalStack = useModalStack()\nconst modalContext = ref(null)\n\nprovide('modalContext', modalContext)\n\nconst emit = defineEmits(['after-leave', 'blur', 'close', 'error', 'focus', 'start', 'success', 'prefetching', 'prefetched'])\nconst isBlurred = ref(false)\n\nconst shouldNavigate = computed(() => {\n    return props.navigate ?? getConfig('navigate')\n})\n\n// Prefetch logic (#146)\nconst hoverTimeout = ref(null)\n\nconst prefetchModes = computed(() => {\n    if (props.prefetch === true) {\n        return ['hover']\n    }\n    if (props.prefetch === false) {\n        return []\n    }\n    if (Array.isArray(props.prefetch)) {\n        return props.prefetch\n    }\n    return [props.prefetch]\n})\n\nfunction doPrefetch() {\n    prefetchModal(props.href, {\n        method: props.method,\n        data: props.data,\n        headers: props.headers,\n        queryStringArrayFormat: props.queryStringArrayFormat,\n        cacheFor: props.cacheFor,\n        onPrefetching: () => emit('prefetching'),\n        onPrefetched: () => emit('prefetched'),\n    })\n}\n\nfunction onMouseenter() {\n    if (!prefetchModes.value.includes('hover')) return\n\n    hoverTimeout.value = setTimeout(() => {\n        doPrefetch()\n    }, 75) // Small delay to avoid prefetching on accidental hovers\n}\n\nfunction onMouseleave() {\n    if (hoverTimeout.value) {\n        clearTimeout(hoverTimeout.value)\n        hoverTimeout.value = null\n    }\n}\n\nfunction onMousedown(event) {\n    if (!prefetchModes.value.includes('click')) return\n    if (event.button !== 0) return // Only left click\n\n    doPrefetch()\n}\n\nonMounted(() => {\n    if (prefetchModes.value.includes('mount')) {\n        doPrefetch()\n    }\n})\n\nwatch(\n    () => modalContext.value?.onTopOfStack,\n    (onTopOfStack) => {\n        if (modalContext.value) {\n            if (onTopOfStack && isBlurred.value) {\n                emit('focus')\n            } else if (!onTopOfStack) {\n                emit('blur')\n            }\n\n            isBlurred.value = !onTopOfStack\n        }\n    },\n)\n\nconst unsubscribeEventListeners = ref(null)\n\nonBeforeUnmount(() => {\n    unsubscribeEventListeners.value?.()\n    if (hoverTimeout.value) {\n        clearTimeout(hoverTimeout.value)\n    }\n})\n\nconst $attrs = useAttrs()\n\nfunction registerEventListeners() {\n    unsubscribeEventListeners.value = modalContext.value.registerEventListenersFromAttrs($attrs)\n}\n\nwatch(modalContext, (value, oldValue) => {\n    if (value && !oldValue) {\n        registerEventListeners()\n        emit('success')\n    }\n})\n\nfunction onClose() {\n    emit('close')\n}\n\nfunction onAfterLeave() {\n    modalContext.value = null\n    emit('after-leave')\n}\n\nfunction handle() {\n    if (loading.value) {\n        return\n    }\n\n    if (!props.href.startsWith('#')) {\n        loading.value = true\n        emit('start')\n    }\n\n    modalStack\n        .visit(\n            props.href,\n            props.method,\n            props.data,\n            props.headers,\n            rejectNullValues(only(props, modalPropNames)),\n            onClose,\n            onAfterLeave,\n            props.queryStringArrayFormat,\n            shouldNavigate.value,\n        )\n        .then((context) => {\n            modalContext.value = context\n        })\n        .catch((error) => {\n            console.error(error)\n            emit('error', error)\n        })\n        .finally(() => (loading.value = false))\n}\n</script>\n\n<template>\n    <component\n        v-bind=\"$attrs\"\n        :is=\"as\"\n        :href=\"href\"\n        @click.prevent=\"handle\"\n        @mouseenter=\"onMouseenter\"\n        @mouseleave=\"onMouseleave\"\n        @mousedown=\"onMousedown\"\n    >\n        <slot :loading=\"loading\" />\n    </component>\n</template>\n","<script setup>\n// See: https://github.com/inertiajs/inertia/blob/48bcd21fb7daf467d0df1bfde2408f161f94a579/packages/vue3/src/whenVisible.ts\nimport { ref, onMounted, onUnmounted, inject } from 'vue'\n\nconst props = defineProps({\n    data: [String, Array],\n    params: Object,\n    buffer: { type: Number, default: 0 },\n    as: { type: String, default: 'div' },\n    always: { type: Boolean, default: false },\n})\n\nconst modalContext = inject('modalContext')\n\nif (!modalContext) {\n    throw new Error('Deferred component must be used inside a Modal component')\n}\n\nconst loaded = ref(false)\nconst fetching = ref(false)\nconst rootElement = ref(null)\nlet observer = null\n\nconst getReloadParams = () => {\n    if (props.data) {\n        return { only: Array.isArray(props.data) ? props.data : [props.data] }\n    }\n\n    if (!props.params) {\n        throw new Error('You must provide either a `data` or `params` prop.')\n    }\n\n    return props.params\n}\n\nconst observeElement = () => {\n    if (!rootElement.value) {\n        return\n    }\n\n    observer = new IntersectionObserver(\n        (entries) => {\n            if (!entries[0].isIntersecting) {\n                return\n            }\n\n            if (!props.always) {\n                observer.disconnect()\n            }\n\n            if (fetching.value) {\n                return\n            }\n\n            fetching.value = true\n            const reloadParams = getReloadParams()\n\n            modalContext.value.reload({\n                ...reloadParams,\n                onStart: () => {\n                    fetching.value = true\n                    reloadParams.onStart?.()\n                },\n                onFinish: () => {\n                    loaded.value = true\n                    fetching.value = false\n                    reloadParams.onFinish?.()\n                },\n            })\n        },\n        { rootMargin: `${props.buffer}px` },\n    )\n\n    observer.observe(rootElement.value)\n}\n\nonMounted(observeElement)\nonUnmounted(() => observer?.disconnect())\n</script>\n\n<template>\n    <component\n        :is=\"props.as\"\n        ref=\"rootElement\"\n    >\n        <slot v-if=\"loaded\"></slot>\n        <slot\n            v-else\n            name=\"fallback\"\n        ></slot>\n    </component>\n</template>\n","import { getConfig, putConfig, resetConfig } from './config'\nimport { useModalStack, initFromPageProps, renderApp, Modal as ModalClass, modalPropNames, prefetch } from './modalStack'\nimport type { ModalStack, ModalResponseData, ModalConfig, ReloadOptions, VisitOptions, PrefetchOption, PrefetchOptions } from './modalStack'\nimport useModal from './useModal'\nimport Deferred from './Deferred.vue'\nimport HeadlessModal from './HeadlessModal.vue'\nimport ModalComponent from './Modal.vue'\nimport ModalLink from './ModalLink.vue'\nimport ModalRoot from './ModalRoot.vue'\nimport WhenVisible from './WhenVisible.vue'\nimport * as dialogUtils from './dialog'\nimport { kebabCase } from './helpers'\n\nfunction visitModal(url: string, options: VisitOptions = {}): Promise<ModalClass> {\n    return useModalStack()\n        .visit(\n            url,\n            options.method ?? 'get',\n            options.data ?? {},\n            options.headers ?? {},\n            options.config ?? {},\n            options.onClose,\n            options.onAfterLeave,\n            options.queryStringArrayFormat ?? 'brackets',\n            options.navigate ?? (getConfig('navigate') as boolean),\n            options.onStart,\n            options.onSuccess,\n            options.onError,\n            options.props ?? null,\n        )\n        .then((modal) => {\n            const listeners = options.listeners ?? {}\n\n            Object.keys(listeners).forEach((event) => {\n                // e.g. refreshKey -> refresh-key\n                const eventName = kebabCase(event)\n                modal.on(eventName, listeners[event])\n            })\n\n            return modal\n        })\n}\n\nexport {\n    // Components\n    Deferred,\n    HeadlessModal,\n    ModalComponent as Modal,\n    ModalLink,\n    ModalRoot,\n    WhenVisible,\n    // Config functions\n    getConfig,\n    putConfig,\n    resetConfig,\n    // Modal stack functions\n    initFromPageProps,\n    renderApp,\n    useModal,\n    useModalStack,\n    visitModal,\n    modalPropNames,\n    // Prefetch function (#146)\n    prefetch,\n    // Modal class (exported as ModalInstance to avoid conflict with Modal component)\n    ModalClass as ModalInstance,\n    // Dialog utilities (framework-agnostic)\n    dialogUtils,\n}\n\n// Export types\nexport type { ModalStack, ModalResponseData, ModalConfig, ReloadOptions, VisitOptions, PrefetchOption, PrefetchOptions }\nexport type { ModalTypeConfig } from './config'\nexport type {\n    CleanupFunction,\n    FocusTrapOptions,\n    ClickOutsideOptions,\n    EscapeKeyOptions,\n    DialogOptions,\n    Dialog,\n} from './dialog'\n"],"names":["vanillaGenerateId","computed","provide","_createBlock","_unref","_mergeProps","only","usePage","onUnmounted","router","sameUrlPath","onMounted","watch","_renderSlot","ModalRenderer","ref","mergeDataIntoQueryString","kebabCase","except","response","markRaw","progress","nextTick","h","ModalRoot","readonly","toValue","inject","onBeforeUnmount","useAttrs","unref","_createElementBlock","_createElementVNode","createFocusTrap","onEscapeKey","onTransitionEnd","_normalizeClass","_hoisted_1","_openBlock","_hoisted_3","_createVNode","CloseButton","_Transition","_hoisted_5","lockScroll","markAriaHidden","HeadlessModal","_Teleport","_resolveDynamicComponent","SlideoverContent","ModalContent","$emit","prefetchModal","rejectNullValues"],"mappings":"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"}